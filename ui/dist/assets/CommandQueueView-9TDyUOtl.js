import{_ as A}from"./index-CNybHuB8.js";import{i as re,e as ke,_ as Re,a as Ae,b as De,c as Se,d as Me}from"./TooltipTrigger.vuevuetypescriptsetuptruelang-BShrC6cv.js";import{P as K,c as V,a as P}from"./createLucideIcon-FGb3WsIc.js";import{u as B,b as je,d as Ve}from"./PopperContent-5AD4M8ZJ.js";import{d as v,a as f,o as u,w as s,r as E,m as O,u as e,h as q,i as W,g as I,c as x,f as H,j as g,k as L,t as y,I as Pe,J as Ie,K as Le,L as Te,D as le,b as t,y as $,e as a,R as Be,M as N,N as j,O as de,p as T,v as Fe,F as Ne,B as ue}from"./index-Ih2bx1sl.js";import{_ as Qe,C as Ge,a as Ue,L as F,b as J,A as me,u as ze,c as He,d as Ke,e as ce,f as pe,g as fe,h as qe,i as We,j as Je,k as Xe,l as Ye,m as Ze,n as et}from"./PaginationPrev.vuevuetypescriptsetuptruelang-C1o9kFsA.js";import{_ as X,A as _e,d as ge,r as tt,f as st,a as S}from"./date-93lgfLM3.js";import{C as at,P as R,M as ye,_ as Y,a as Z}from"./CardTitle.vuevuetypescriptsetuptruelang-Bjt3tWMz.js";import{_ as ee,a as te}from"./CardContent.vuevuetypescriptsetuptruelang-C6a-jh97.js";import{_ as ve}from"./CardFooter.vuevuetypescriptsetuptruelang-CezkxpG7.js";import{z as p,u as nt,F as Q,_ as G,a as U,b as ot,c as z,d as ie,t as lt}from"./vee-validate-zod-CPrs48TQ.js";import{_ as xe,a as Ce,b as be,c as $e,d as b}from"./SelectValue.vuevuetypescriptsetuptruelang-CoQ8nKEQ.js";import{_ as it}from"./http-BA7jRX-_.js";import"./useMutation-BAEd9agh.js";const rt=v({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(c){const o=c,l=re();return B(),(r,n)=>(u(),f(e(K),O(o,{id:e(l).titleId}),{default:s(()=>[E(r.$slots,"default")]),_:3},16,["id"]))}}),dt=v({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(c){const o=c;B();const l=re();return(r,n)=>(u(),f(e(K),O(o,{id:e(l).descriptionId}),{default:s(()=>[E(r.$slots,"default")]),_:3},16,["id"]))}}),ut=v({__name:"MenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(c){const o=c;return(l,r)=>(u(),f(e(K),O(o,{role:"separator","aria-orientation":"horizontal"}),{default:s(()=>[E(l.$slots,"default")]),_:3},16))}}),mt=v({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(c,{emit:o}){const l=c,n=je(o);return B(),(m,C)=>(u(),f(e(Qe),q(W({...l,...e(n)})),{default:s(()=>[E(m.$slots,"default")]),_:3},16))}}),ct=v({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(c){const o=c;return B(),(l,r)=>(u(),f(e(ut),q(W(o)),{default:s(()=>[E(l.$slots,"default")]),_:3},16))}});/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=V("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=V("circle-stop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=V("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=V("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=V("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),_t=v({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(c){const o=c,l=I(()=>{const{class:r,...n}=o;return n});return(r,n)=>(u(),f(e(dt),O({class:e(P)("text-sm text-muted-foreground",o.class)},l.value),{default:s(()=>[E(r.$slots,"default")]),_:3},16,["class"]))}}),gt=v({__name:"SheetHeader",props:{class:{}},setup(c){const o=c;return(l,r)=>(u(),x("div",{class:H(e(P)("flex flex-col gap-y-2 text-center sm:text-left",o.class))},[E(l.$slots,"default")],2))}}),yt=v({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(c){const o=c,l=I(()=>{const{class:r,...n}=o;return n});return(r,n)=>(u(),f(e(rt),O({class:e(P)("text-lg font-semibold text-foreground",o.class)},l.value),{default:s(()=>[E(r.$slots,"default")]),_:3},16,["class"]))}}),vt=v({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(c){const o=c;return(l,r)=>(u(),f(e(ke),q(W(o)),{default:s(()=>[E(l.$slots,"default")]),_:3},16))}}),se=v({__name:"SourceBadge",props:{source:{}},setup(c){const o=c,l={CLOUD:{icon:at,label:"Cloud"},APP:{icon:ft,label:"App"}};return(r,n)=>(u(),f(e(X),{variant:"outline",class:"flex items-center gap-1"},{default:s(()=>[(u(),f(L(l[o.source].icon),{class:"w-3 h-3"})),g(" "+y(l[o.source].label),1)]),_:1}))}}),ae=v({__name:"StatusBadge",props:{status:{}},setup(c){const o=c,l={QUEUED:{icon:J,label:"Queued",class:"bg-amber-500/10 text-amber-500 hover:bg-amber-500/20 hover:text-amber-500"},PROCESSING:{icon:F,label:"Processing",class:"bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 hover:text-blue-500"},SUCCEEDED:{icon:Ue,label:"Succeeded",class:"bg-green-500/10 text-green-500 hover:bg-green-500/20 hover:text-green-500"},FAILED:{icon:Ge,label:"Failed",class:"bg-red-500/10 text-red-500 hover:bg-red-500/20 hover:text-red-500"},CANCELED:{icon:pt,label:"Canceled",class:"bg-slate-500/10 text-slate-500 hover:bg-slate-500/20 hover:text-slate-500"}};return(r,n)=>(u(),f(e(X),{variant:"secondary",class:H(["flex items-center gap-1",[l[o.status].class]])},{default:s(()=>[(u(),f(L(l[o.status].icon),{class:H(["w-3 h-3",{"animate-spin":o.status==="PROCESSING"}])},null,8,["class"])),g(" "+y(l[o.status].label),1)]),_:1},8,["class"]))}});ge.extend(tt);const xt={STOP_MOVEMENT:we,MOVE_FORWARD:me,MOVE_BACKWARD:_e,MOVE_TO:ye,CARGO_OPEN:R,CARGO_CLOSE:R,CARGO_LIFT:R,CARGO_LOWER:R,CARGO_CHECK_QR:he};function ne(c){return xt[c]}function oe(c){return c.replace(/_/g," ").toLowerCase().replace(/\b\w/g,o=>o.toUpperCase())}function Ct(c){const o=ge(c);return o.isValid()?o.fromNow():"N/A"}const bt={key:0},$t={class:"flex items-center justify-center py-8"},wt={key:1},Et={key:2,class:"mt-6 space-y-6"},ht={class:"flex items-center justify-between"},Ot={class:"flex items-center gap-2"},kt={class:"text-sm font-medium"},Rt={class:"grid grid-cols-2 gap-4"},At={class:"font-medium"},Dt={class:"flex flex-col items-start gap-2"},St={key:0},Mt={class:"font-medium"},jt={class:"space-y-2"},Vt={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Pt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},It={key:0,class:"space-y-2"},Lt={class:"p-3 rounded-md bg-destructive/10 text-destructive"},Tt={class:"space-y-2"},Bt={class:"space-y-3"},Ft={class:"flex justify-between text-sm"},Nt={key:0,class:"flex justify-between text-sm"},Qt={key:1,class:"flex justify-between text-sm"},Gt={class:"flex justify-between text-sm"},Ut={class:"flex gap-2 pt-4"},zt=1e3,Ht=v({__name:"CommandDetailSheet",props:Pe({commandId:{}},{isOpen:{type:Boolean,required:!0},isOpenModifiers:{}}),emits:["update:isOpen"],setup(c){const o=c,l=Ie(c,"isOpen"),r=Le(o,"commandId"),{data:n,isPending:m,isError:C,refetch:D}=ze(r,{axiosOpts:{doNotShowLoading:!0}}),{pause:_,resume:h}=Te(()=>{D()},zt,{immediate:!1});return le(n,w=>{w&&["SUCCEEDED","FAILED","CANCELED"].includes(w.status)?_():h()},{immediate:!0}),le(l,w=>{w?h():_()},{immediate:!0}),(w,i)=>(u(),f(e(Re),{open:l.value,"onUpdate:open":i[0]||(i[0]=d=>l.value=d)},{default:s(()=>[t(e(Ae),{class:"max-h-screen overflow-y-auto sm:max-w-md"},{default:s(()=>[t(e(gt),null,{default:s(()=>[t(e(yt),null,{default:s(()=>i[1]||(i[1]=[g(" Command detail ")])),_:1}),t(e(_t),null,{default:s(()=>i[2]||(i[2]=[g(" Real-time information about the selected command ")])),_:1})]),_:1}),e(m)?(u(),x("div",bt,[a("div",$t,[t(e(F),{class:"w-8 h-8 animate-spin"})])])):e(C)?(u(),x("div",wt,i[3]||(i[3]=[a("div",{class:"flex items-center justify-center py-8"},[a("p",{class:"text-sm text-muted-foreground"}," Failed to load command details ")],-1)]))):e(n)?(u(),x("div",Et,[a("div",ht,[a("div",Ot,[(u(),f(L(e(ne)(e(n).type)))),a("span",kt,y(e(oe)(e(n).type)),1)]),t(ae,{status:e(n).status},null,8,["status"])]),a("div",Rt,[a("div",null,[i[4]||(i[4]=a("p",{class:"text-sm text-muted-foreground"}," ID ",-1)),a("p",At,y(e(n).id),1)]),a("div",Dt,[i[5]||(i[5]=a("p",{class:"text-sm text-muted-foreground"}," Source ",-1)),t(se,{source:e(n).source},null,8,["source"])]),e(n).completedAt&&e(n).startedAt?(u(),x("div",St,[i[6]||(i[6]=a("p",{class:"text-sm text-muted-foreground"}," Duration ",-1)),a("p",Mt,y(e(st)((new Date(e(n).completedAt).getTime()-new Date(e(n).startedAt).getTime())/1e3)),1)])):$("",!0)]),a("div",jt,[i[7]||(i[7]=a("p",{class:"text-sm font-medium"}," Command Inputs ",-1)),a("div",Vt,[a("span",Pt,y(JSON.stringify(e(n).inputs,null,4)),1)])]),e(n).error?(u(),x("div",It,[i[8]||(i[8]=a("p",{class:"text-sm font-medium text-destructive"}," Error ",-1)),a("div",Lt,y(e(n).error),1)])):$("",!0),a("div",Tt,[i[13]||(i[13]=a("p",{class:"text-sm font-medium"}," Timeline ",-1)),a("div",Bt,[a("div",Ft,[i[9]||(i[9]=a("span",{class:"text-muted-foreground"},"Created",-1)),a("span",null,y(e(S)(e(n).createdAt)),1)]),e(n).startedAt?(u(),x("div",Nt,[i[10]||(i[10]=a("span",{class:"text-muted-foreground"},"Started",-1)),a("span",null,y(e(S)(e(n).startedAt)),1)])):$("",!0),e(n).completedAt?(u(),x("div",Qt,[i[11]||(i[11]=a("span",{class:"text-muted-foreground"},"Completed",-1)),a("span",null,y(e(S)(e(n).completedAt)),1)])):$("",!0),a("div",Gt,[i[12]||(i[12]=a("span",{class:"text-muted-foreground"},"Last Updated",-1)),a("span",null,y(e(S)(e(n).updatedAt)),1)])])]),a("div",Ut,[e(n).status==="QUEUED"?(u(),f(e(A),{key:0,variant:"destructive",class:"flex-1",disabled:""},{default:s(()=>i[14]||(i[14]=[g(" Remove From Queue ")])),_:1})):e(n).status==="PROCESSING"?(u(),f(e(A),{key:1,variant:"destructive",class:"flex-1",disabled:""},{default:s(()=>i[15]||(i[15]=[g(" Stop Execution ")])),_:1})):(u(),f(e(A),{key:2,variant:"outline",class:"flex-1",disabled:""},{default:s(()=>i[16]||(i[16]=[g(" Re-run ")])),_:1}))])])):$("",!0)]),_:1})]),_:1},8,["open"]))}}),Kt=p.discriminatedUnion("type",[p.object({type:p.literal("STOP_MOVEMENT"),inputs:p.object({})}),p.object({type:p.literal("MOVE_TO"),inputs:p.object({location:p.string()})}),p.object({type:p.literal("MOVE_FORWARD"),inputs:p.object({})}),p.object({type:p.literal("MOVE_BACKWARD"),inputs:p.object({})}),p.object({type:p.literal("CARGO_OPEN"),inputs:p.object({})}),p.object({type:p.literal("CARGO_CLOSE"),inputs:p.object({})}),p.object({type:p.literal("CARGO_LIFT"),inputs:p.object({})}),p.object({type:p.literal("CARGO_LOWER"),inputs:p.object({})}),p.object({type:p.literal("CARGO_CHECK_QR"),inputs:p.object({qrCode:p.string()})})]),qt={class:"space-y-4"},Wt={class:"flex items-center gap-2"},Jt={class:"flex items-center gap-2"},Xt={class:"flex items-center gap-2"},Yt={class:"flex items-center gap-2"},Zt={class:"flex items-center gap-2"},es={class:"flex items-center gap-2"},ts={class:"flex items-center gap-2"},ss={class:"flex items-center gap-2"},as={class:"flex items-center gap-2"},ns=v({__name:"CreateCommandForm",setup(c){const{values:o,handleSubmit:l,setFieldValue:r,resetForm:n}=nt({validationSchema:lt(Kt),initialValues:{type:"STOP_MOVEMENT",inputs:{}}}),m=I(()=>o.type);function C(i){r("type",i)}const{mutate:D,isPending:_}=He(),h=l(i=>{D(i,{onSuccess:()=>{N.success("Command created successfully")},onError:d=>{d instanceof Be?N.error({title:d.errorCode,message:d.message}):N.error("Failed to create command")}})});function w(){n()}return(i,d)=>(u(),f(e(ee),{class:"sticky top-6"},{default:s(()=>[t(e(Y),null,{default:s(()=>[t(e(Z),null,{default:s(()=>d[2]||(d[2]=[g("Create command")])),_:1})]),_:1}),a("form",{onSubmit:d[1]||(d[1]=j((...k)=>e(h)&&e(h)(...k),["prevent"]))},[t(e(te),null,{default:s(()=>[a("div",qt,[t(e(Q),{name:"type"},{default:s(()=>[t(e(G),null,{default:s(()=>[t(e(U),null,{default:s(()=>d[3]||(d[3]=[g("Command type")])),_:1}),t(e(xe),{disabled:e(_),"model-value":e(m),"onUpdate:modelValue":d[0]||(d[0]=k=>C(k))},{default:s(()=>[t(e(ot),null,{default:s(()=>[t(e(Ce),null,{default:s(()=>[t(e(be),{placeholder:"Select command type"})]),_:1})]),_:1}),t(e($e),null,{default:s(()=>[t(e(b),{value:"STOP_MOVEMENT"},{default:s(()=>[a("div",Wt,[t(e(we),{class:"w-4 h-4"}),d[4]||(d[4]=a("span",null,"Stop Movement",-1))])]),_:1}),t(e(b),{value:"MOVE_FORWARD"},{default:s(()=>[a("div",Jt,[t(e(me),{class:"w-4 h-4"}),d[5]||(d[5]=a("span",null,"Move Forward",-1))])]),_:1}),t(e(b),{value:"MOVE_BACKWARD"},{default:s(()=>[a("div",Xt,[t(e(_e),{class:"w-4 h-4"}),d[6]||(d[6]=a("span",null,"Move Backward",-1))])]),_:1}),t(e(b),{value:"MOVE_TO"},{default:s(()=>[a("div",Yt,[t(e(ye),{class:"w-4 h-4"}),d[7]||(d[7]=a("span",null,"Move To",-1))])]),_:1}),t(e(b),{value:"CARGO_OPEN"},{default:s(()=>[a("div",Zt,[t(e(R),{class:"w-4 h-4"}),d[8]||(d[8]=a("span",null,"Cargo Open",-1))])]),_:1}),t(e(b),{value:"CARGO_CLOSE"},{default:s(()=>[a("div",es,[t(e(R),{class:"w-4 h-4"}),d[9]||(d[9]=a("span",null,"Cargo Close",-1))])]),_:1}),t(e(b),{value:"CARGO_LIFT"},{default:s(()=>[a("div",ts,[t(e(R),{class:"w-4 h-4"}),d[10]||(d[10]=a("span",null,"Cargo Lift",-1))])]),_:1}),t(e(b),{value:"CARGO_LOWER"},{default:s(()=>[a("div",ss,[t(e(R),{class:"w-4 h-4"}),d[11]||(d[11]=a("span",null,"Cargo Lower",-1))])]),_:1}),t(e(b),{value:"CARGO_CHECK_QR",disabled:""},{default:s(()=>[a("div",as,[t(e(he),{class:"w-4 h-4"}),d[12]||(d[12]=a("span",null,"Cargo Check QR",-1))])]),_:1})]),_:1})]),_:1},8,["disabled","model-value"]),t(e(z))]),_:1})]),_:1}),e(m)==="MOVE_TO"?(u(),f(e(Q),{key:0,name:"inputs.location"},{default:s(({componentField:k})=>[t(e(G),null,{default:s(()=>[t(e(U),null,{default:s(()=>d[13]||(d[13]=[g("Location")])),_:1}),t(e(ie),O(k,{placeholder:"Enter location"}),null,16),t(e(z))]),_:2},1024)]),_:1})):e(m)==="CARGO_CHECK_QR"?(u(),f(e(Q),{key:1,name:"inputs.qrCode"},{default:s(({componentField:k})=>[t(e(G),null,{default:s(()=>[t(e(U),null,{default:s(()=>d[14]||(d[14]=[g("QR Code")])),_:1}),t(e(ie),O(k,{placeholder:"Enter QR code"}),null,16),t(e(z))]),_:2},1024)]),_:1})):$("",!0)])]),_:1}),t(e(ve),{class:"flex flex-col gap-2"},{default:s(()=>[t(e(A),{type:"submit",class:"w-full",disabled:e(_)},{default:s(()=>[e(_)?(u(),f(e(F),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):$("",!0),d[15]||(d[15]=g(" Add command "))]),_:1},8,["disabled"]),t(e(A),{type:"button",variant:"outline",class:"w-full",disabled:e(_),onClick:w},{default:s(()=>d[16]||(d[16]=[g(" Clear Form ")])),_:1},8,["disabled"])]),_:1})],32)]),_:1}))}}),M=v({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(c){const o=c,l=I(()=>{const{class:n,...m}=o;return m}),r=Ve(l);return(n,m)=>(u(),f(e(mt),O(e(r),{class:e(P)("relative flex cursor-default select-none items-center rounded-sm gap-2 px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n.inset&&"pl-8",o.class)}),{default:s(()=>[E(n.$slots,"default")]),_:3},16,["class"]))}}),Oe=v({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(c){const o=c,l=I(()=>{const{class:r,...n}=o;return n});return(r,n)=>(u(),f(e(ct),O(l.value,{class:e(P)("-mx-1 my-1 h-px bg-muted",o.class)}),null,16,["class"]))}}),os={class:"flex items-center justify-between"},ls={class:"flex items-center gap-2 font-medium"},is={class:"flex items-center gap-2 text-sm text-muted-foreground"},rs={key:0,class:"text-sm"},ds={key:1,class:"text-sm"},us=1e3,ms=v({__name:"CurrentProcessingCommandCard",emits:["viewDetails"],setup(c,{emit:o}){const l=o,{data:r,refetch:n,isError:m}=Ke({axiosOpts:{doNotShowLoading:!0}}),C=setInterval(n,us);return de(()=>{clearInterval(C)}),(D,_)=>e(r)&&!e(m)?(u(),f(e(ee),{key:0},{default:s(()=>[t(e(Y),{class:"pb-3"},{default:s(()=>[t(e(Z),{class:"flex items-center justify-between"},{default:s(()=>[_[3]||(_[3]=a("span",null,"Current Command",-1)),t(ae,{status:e(r).status},null,8,["status"])]),_:1})]),_:1}),t(e(te),null,{default:s(()=>[a("div",{class:"p-4 space-y-3 border rounded-lg cursor-pointer bg-muted/50",onClick:_[2]||(_[2]=h=>l("viewDetails",e(r).id))},[a("div",os,[a("div",ls,[(u(),f(L(e(ne)(e(r).type)),{class:"w-5 h-5"})),a("span",null,y(e(oe)(e(r).type)),1)]),a("div",{class:"flex items-center gap-2",onClick:_[1]||(_[1]=j(()=>{},["stop"]))},[t(se,{source:e(r).source},null,8,["source"]),t(e(ce),null,{default:s(()=>[t(e(pe),{"as-child":""},{default:s(()=>[t(e(A),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(Ee),{class:"w-4 h-4"})]),_:1})]),_:1}),t(e(fe),{align:"end"},{default:s(()=>[t(e(M),{onClick:_[0]||(_[0]=j(h=>l("viewDetails",e(r).id),["stop"]))},{default:s(()=>_[4]||(_[4]=[g(" View Details ")])),_:1}),t(e(Oe)),t(e(M),{class:"text-destructive"},{default:s(()=>_[5]||(_[5]=[g(" Cancel Command ")])),_:1})]),_:1})]),_:1})])]),a("div",is,[t(e(J),{class:"w-4 h-4"}),a("span",null,"Started at: "+y(e(r).startedAt?e(S)(e(r).startedAt):"N/A"),1)]),e(r).type==="MOVE_TO"?(u(),x("div",rs,[_[6]||(_[6]=a("span",{class:"font-medium"},"Location: ",-1)),g(" "+y(e(r).inputs.location),1)])):e(r).type==="CARGO_CHECK_QR"?(u(),x("div",ds,[_[7]||(_[7]=a("span",{class:"font-medium"},"QR Code: ",-1)),g(" "+y(e(r).inputs.qrCode),1)])):$("",!0)])]),_:1})]),_:1})):$("",!0)}}),cs={class:"flex items-center justify-between"},ps={class:"flex items-center gap-2 font-medium"},fs={class:"flex items-center gap-2 text-sm text-muted-foreground"},_s={key:0,class:"text-sm"},gs={key:1,class:"text-sm"},ys=v({__name:"QueuedCommandItem",props:{command:{}},emits:["viewDetails"],setup(c,{emit:o}){const l=c,r=o;return(n,m)=>(u(),x("div",{class:"p-4 space-y-3 transition-colors border rounded-lg cursor-pointer bg-muted/30 border-border/50 hover:border-border",onClick:m[3]||(m[3]=C=>r("viewDetails",l.command.id))},[a("div",cs,[a("div",ps,[(u(),f(L(e(ne)(l.command.type)),{class:"w-5 h-5"})),a("span",null,y(e(oe)(l.command.type)),1)]),a("div",{class:"flex items-center gap-2",onClick:m[2]||(m[2]=j(()=>{},["stop"]))},[t(ae,{status:l.command.status},null,8,["status"]),t(se,{source:l.command.source},null,8,["source"]),t(e(ce),null,{default:s(()=>[t(e(pe),{"as-child":""},{default:s(()=>[t(e(A),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(Ee),{"class-name":"h-4 w-4"})]),_:1})]),_:1}),t(e(fe),{align:"end",onClick:m[1]||(m[1]=j(()=>{},["stop"]))},{default:s(()=>[t(e(M),{onClick:m[0]||(m[0]=C=>r("viewDetails",l.command.id))},{default:s(()=>m[4]||(m[4]=[g(" View Details ")])),_:1}),t(e(M),null,{default:s(()=>m[5]||(m[5]=[g("Edit Command")])),_:1}),t(e(Oe)),t(e(M),{class:"text-destructive",disabled:""},{default:s(()=>m[6]||(m[6]=[g(" Remove from Queue ")])),_:1})]),_:1})]),_:1})])]),a("div",fs,[t(e(J),{class:"w-4 h-4"}),a("span",null,"Created "+y(e(Ct)(l.command.createdAt)),1)]),l.command.type==="MOVE_TO"?(u(),x("div",_s,[m[7]||(m[7]=a("span",{class:"font-medium"},"Location: ",-1)),g(" "+y(n.command.inputs.location),1)])):l.command.type==="CARGO_CHECK_QR"?(u(),x("div",gs,[m[8]||(m[8]=a("span",{class:"font-medium"},"QR Code: ",-1)),g(" "+y(n.command.inputs.qrCode),1)])):$("",!0)]))}}),vs={key:1,class:"py-6 text-center text-muted-foreground"},xs={class:"flex items-center gap-1 text-sm text-muted-foreground"},Cs=2e3,bs=v({__name:"WaitingCommandList",emits:["viewDetails"],setup(c,{emit:o}){const l=o,r=T(1),n=T(5),{data:m,refetch:C}=qe(r,n,{axiosOpts:{doNotShowLoading:!0}});function D(){r.value=1}function _(w){r.value=w}const h=setInterval(C,Cs);return de(()=>{clearInterval(h)}),(w,i)=>e(m)?(u(),f(e(ee),{key:0},{default:s(()=>[t(e(Y),{class:"pb-3"},{default:s(()=>[t(e(Z),{class:"flex items-center justify-between"},{default:s(()=>[i[1]||(i[1]=a("span",null,"Waiting Commands",-1)),t(e(X),{variant:"outline"},{default:s(()=>[g(y(e(m).totalItems)+" commands ",1)]),_:1})]),_:1})]),_:1}),t(e(te),{class:"space-y-3"},{default:s(()=>[e(m).totalItems>0?(u(!0),x(Ne,{key:0},Fe(e(m).items,d=>(u(),f(ys,{key:d.id,command:d,onViewDetails:k=>l("viewDetails",d.id)},null,8,["command","onViewDetails"]))),128)):(u(),x("div",vs," No commands in queue "))]),_:1}),t(e(ve),{class:"flex items-center justify-between pt-4 border-t"},{default:s(()=>[a("div",xs,[i[5]||(i[5]=a("span",{class:"text-sm sr-only sm:not-sr-only"}," Items per page: ",-1)),t(e(xe),{modelValue:e(n),"onUpdate:modelValue":[i[0]||(i[0]=d=>ue(n)?n.value=d:null),D]},{default:s(()=>[t(e(Ce),{class:"w-16 h-8 ml-2"},{default:s(()=>[t(e(be),{placeholder:"5"})]),_:1}),t(e($e),null,{default:s(()=>[t(e(b),{value:"5"},{default:s(()=>i[2]||(i[2]=[g(" 5 ")])),_:1}),t(e(b),{value:"10"},{default:s(()=>i[3]||(i[3]=[g(" 10 ")])),_:1}),t(e(b),{value:"20"},{default:s(()=>i[4]||(i[4]=[g(" 20 ")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e(We),{"sibling-count":1,"items-per-page":e(n),total:e(m).totalItems,"default-page":e(r),"onUpdate:page":_},{default:s(()=>[t(e(Je),{class:"flex items-center gap-1"},{default:s(()=>[t(e(Xe)),t(e(Ye)),t(e(Ze)),t(e(et))]),_:1})]),_:1},8,["items-per-page","total","default-page"])]),_:1})]),_:1})):$("",!0)}}),$s={class:"flex items-center justify-between"},ws={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},Es={class:"space-y-6 md:col-span-2"},Bs=v({__name:"CommandQueueView",setup(c){const o=T(!1),l=T(null);function r(n){l.value=n,o.value=!0}return(n,m)=>(u(),f(it,null,{default:s(()=>[a("div",$s,[m[2]||(m[2]=a("div",null,[a("h1",{class:"text-xl font-semibold tracking-tight"}," Robot command queue "),a("p",{class:"text-sm text-muted-foreground"}," Manage and monitor robot commands in real-time ")],-1)),t(e(vt),null,{default:s(()=>[t(e(De),null,{default:s(()=>[t(e(Se),{"as-child":""},{default:s(()=>[t(e(A),{variant:"outline",size:"icon"},{default:s(()=>[t(e(F),{class:"w-4 h-4 animate-spin"})]),_:1})]),_:1}),t(e(Me),null,{default:s(()=>m[1]||(m[1]=[a("p",null,"Refreshing in real-time",-1)])),_:1})]),_:1})]),_:1})]),a("div",ws,[a("div",Es,[t(ms,{onViewDetails:r}),t(bs,{onViewDetails:r})]),a("div",null,[t(ns)])]),e(l)?(u(),f(Ht,{key:0,"is-open":e(o),"onUpdate:isOpen":m[0]||(m[0]=C=>ue(o)?o.value=C:null),"command-id":e(l)},null,8,["is-open","command-id"])):$("",!0)]),_:1}))}});export{Bs as default};
