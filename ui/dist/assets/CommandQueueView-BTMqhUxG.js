import{_ as N}from"./index-lJKFTNPi.js";import{u as Y,g as $e,L as X,h as Te}from"./index-LzCD889f.js";import{u as ke,a as fe,b as Ce,_ as De,c as Me,d as Le,g as Z,e as ee,f as te,h as se,C as ne,S as Ie,Q as Ve,A as Fe,i as Ne,j as Pe,k as Be,l as ge,m as ve,E as ye,n as xe,o as G,t as Ge,p as We,q as Qe,r as he,s as je,v as Ke,w as Ue,x as qe}from"./PaginationPrev.vuevuetypescriptsetuptruelang-C8pizmYH.js";import{f as He,a as B,P as K,M as ze,A as Je,_ as Ye}from"./date-Bx14BM9l.js";import{d as x,c as f,o as i,w as s,a as oe,m as E,u as e,i as H,j as z,P as Xe,Q as Ze,R as et,S as tt,M as ce,g as t,p as y,D as L,s as p,l as a,y as h,v as O,T as W,I as b,J as st,k as J,E as Oe,F as j,h as Q,f as be,r as U,K as Se}from"./index-DxwmmwYy.js";import{_ as q,F as A,a as w,b as R,c as k,d as T,e as nt,o as g,l as M,n as I,u as ot,s as _e,f as at,t as lt}from"./FormMessage.vuevuetypescriptsetuptruelang-ngLssKMu.js";import{_ as ae,a as le}from"./CardContent.vuevuetypescriptsetuptruelang-B3NfROZY.js";import{_ as Ee}from"./CardFooter.vuevuetypescriptsetuptruelang-CH8kOYll.js";import{b as it,A as rt,_ as ie,a as re}from"./CardTitle.vuevuetypescriptsetuptruelang-lMSmSUV0.js";import{_ as de,a as me,b as ue,c as pe,d as P}from"./SelectValue.vuevuetypescriptsetuptruelang-sjkRP28k.js";import{u as dt,f as mt}from"./check-BmVWlGJ7.js";/* empty css                                                              */import{_ as ut}from"./Separator.vuevuetypescriptsetuptruelang-Dm8XKD7F.js";import{P as pt,a as ct}from"./http-B4KzYEr5.js";import{L as _t,_ as ft}from"./PageContainer.vuevuetypescriptsetuptruelang-98GadGMq.js";import{c as Ct,_ as gt,a as vt,b as yt}from"./TooltipTrigger.vuevuetypescriptsetuptruelang-CKxf-Lnr.js";const xt=x({__name:"MenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(r){const m=r;return(n,l)=>(i(),f(e(pt),E(m,{role:"separator","aria-orientation":"horizontal"}),{default:s(()=>[oe(n.$slots,"default")]),_:3},16))}}),Ot=x({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(r){const m=r;return dt(),(n,l)=>(i(),f(e(xt),H(z(m)),{default:s(()=>[oe(n.$slots,"default")]),_:3},16))}}),bt=x({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(r){const m=r;return(n,l)=>(i(),f(e(Ct),H(z(m)),{default:s(()=>[oe(n.$slots,"default")]),_:3},16))}}),St={key:0},Et={class:"flex items-center justify-center py-8"},At={key:1},wt={key:2,class:"mt-6 space-y-6"},Rt={class:"flex items-center justify-between"},$t={class:"flex items-center gap-2"},Tt={class:"text-sm font-medium"},kt={class:"grid grid-cols-2 gap-4"},Dt={class:"font-medium"},Mt={class:"flex flex-col items-start gap-2"},Lt={key:0},It={class:"font-medium"},Vt={class:"space-y-2"},Ft={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Nt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},Pt={key:0,class:"space-y-2"},Bt={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Gt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},Wt={key:1,class:"space-y-2"},Qt={class:"p-3 text-red-500 rounded-md bg-red-500/10"},ht={class:"space-y-2"},jt={class:"space-y-3"},Kt={class:"flex justify-between text-sm"},Ut={key:0,class:"flex justify-between text-sm"},qt={key:1,class:"flex justify-between text-sm"},Ht={class:"flex justify-between text-sm"},zt={class:"flex gap-2 pt-4"},Jt=1e3,Yt=x({__name:"CommandDetailSheet",props:Xe({commandId:{}},{isOpen:{type:Boolean,required:!0},isOpenModifiers:{}}),emits:["update:isOpen"],setup(r){const m=r,n=Ze(r,"isOpen"),l=et(m,"commandId"),{data:o,isPending:C,isError:S,refetch:v}=ke(l,{axiosOpts:{doNotShowLoading:!0}}),{mutate:c}=fe(),{mutate:D}=Ce(),{openConfirmation:F}=Y(),{pause:_,resume:d}=tt(()=>{v()},Jt,{immediate:!1});ce(o,$=>{$&&["SUCCEEDED","FAILED","CANCELED"].includes($.status)?_():d()},{immediate:!0}),ce(n,$=>{$?d():_()},{immediate:!0});function V(){F({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{c(m.commandId,{onSuccess:()=>{b.success("Command removed from queue")},onError:$=>{$ instanceof W?$.errorCode==="command.inProcessingCanNotBeDeleted"?b.error("Command is being processed and cannot be deleted"):b.error($.message):b.error($.message)}})},onCancel:()=>{}})}function we(){F({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{D(void 0,{onSuccess:()=>{b.success("Command cancelled successfully")},onError:$=>{$ instanceof W?$.errorCode==="command.noCommandBeingProcessed"?b.error("No command is being processed"):b.error($.message):b.error($.message)}})},onCancel:()=>{}})}return($,u)=>(i(),f(e($e),{open:n.value,"onUpdate:open":u[0]||(u[0]=Re=>n.value=Re)},{default:s(()=>[t(e(Te),{class:"max-h-screen overflow-y-auto sm:max-w-xl"},{default:s(()=>[t(e(De),null,{default:s(()=>[t(e(Me),null,{default:s(()=>u[1]||(u[1]=[p(" Command detail ")])),_:1,__:[1]}),t(e(Le),null,{default:s(()=>u[2]||(u[2]=[p(" Real-time information about the selected command ")])),_:1,__:[2]})]),_:1}),e(C)?(i(),y("div",St,[a("div",Et,[t(e(X),{class:"w-8 h-8 animate-spin"})])])):e(S)?(i(),y("div",At,u[3]||(u[3]=[a("div",{class:"flex items-center justify-center py-8"},[a("p",{class:"text-sm text-muted-foreground"}," Failed to load command details ")],-1)]))):e(o)?(i(),y("div",wt,[a("div",Rt,[a("div",$t,[(i(),f(h(e(Z)(e(o).type)))),a("span",Tt,O(e(ee)(e(o).type)),1)]),t(te,{status:e(o).status},null,8,["status"])]),a("div",kt,[a("div",null,[u[4]||(u[4]=a("p",{class:"text-sm text-muted-foreground"}," ID ",-1)),a("p",Dt,O(e(o).id),1)]),a("div",Mt,[u[5]||(u[5]=a("p",{class:"text-sm text-muted-foreground"}," Source ",-1)),t(se,{source:e(o).source},null,8,["source"])]),e(o).completedAt&&e(o).startedAt?(i(),y("div",Lt,[u[6]||(u[6]=a("p",{class:"text-sm text-muted-foreground"}," Duration ",-1)),a("p",It,O(e(He)((new Date(e(o).completedAt).getTime()-new Date(e(o).startedAt).getTime())/1e3)),1)])):L("",!0)]),a("div",Vt,[u[7]||(u[7]=a("p",{class:"text-sm font-medium"}," Command Inputs ",-1)),a("div",Ft,[a("span",Nt,O(JSON.stringify(e(o).inputs,null,4)),1)])]),e(o).status!=="PROCESSING"&&e(o).status!=="QUEUED"?(i(),y("div",Pt,[u[8]||(u[8]=a("p",{class:"text-sm font-medium"}," Command Outputs ",-1)),a("div",Bt,[a("span",Gt,O(JSON.stringify(e(o).outputs,null,4)),1)])])):L("",!0),e(o).error?(i(),y("div",Wt,[u[9]||(u[9]=a("p",{class:"text-sm font-medium text-red-500"}," Error ",-1)),a("div",Qt,O(e(o).error),1)])):L("",!0),a("div",ht,[u[14]||(u[14]=a("p",{class:"text-sm font-medium"}," Timeline ",-1)),a("div",jt,[a("div",Kt,[u[10]||(u[10]=a("span",{class:"text-muted-foreground"},"Created",-1)),a("span",null,O(e(B)(e(o).createdAt)),1)]),e(o).startedAt?(i(),y("div",Ut,[u[11]||(u[11]=a("span",{class:"text-muted-foreground"},"Started",-1)),a("span",null,O(e(B)(e(o).startedAt)),1)])):L("",!0),e(o).completedAt?(i(),y("div",qt,[u[12]||(u[12]=a("span",{class:"text-muted-foreground"},"Completed",-1)),a("span",null,O(e(B)(e(o).completedAt)),1)])):L("",!0),a("div",Ht,[u[13]||(u[13]=a("span",{class:"text-muted-foreground"},"Last Updated",-1)),a("span",null,O(e(B)(e(o).updatedAt)),1)])])]),a("div",zt,[e(o).status==="QUEUED"?(i(),f(e(N),{key:0,variant:"destructive",class:"flex-1",onClick:V},{default:s(()=>u[15]||(u[15]=[p(" Remove from queue ")])),_:1,__:[15]})):e(o).status==="PROCESSING"?(i(),f(e(N),{key:1,variant:"destructive",class:"flex-1",onClick:we},{default:s(()=>u[16]||(u[16]=[p(" Stop execution ")])),_:1,__:[16]})):(i(),f(e(N),{key:2,variant:"outline",class:"flex-1",disabled:""},{default:s(()=>u[17]||(u[17]=[p(" Re-run ")])),_:1,__:[17]}))])])):L("",!0)]),_:1})]),_:1},8,["open"]))}}),Xt="command-config",Zt={moveTo:{direction:"FORWARD",motorSpeed:80},moveForward:{motorSpeed:80},moveBackward:{motorSpeed:80},cargoOpen:{motorSpeed:80},cargoClose:{motorSpeed:80},cargoLift:{motorSpeed:80,position:20},cargoLower:{motorSpeed:80,position:100,bottomObstacleTracking:{enterDistance:10,exitDistance:20}}};function es(){const r=st(Xt,Zt),m=J(()=>r.value),n={STOP_MOVEMENT:()=>{},MOVE_BACKWARD:o=>{r.value={...r.value,moveBackward:{motorSpeed:o.motorSpeed}}},MOVE_FORWARD:o=>{r.value={...r.value,moveForward:{motorSpeed:o.motorSpeed}}},MOVE_TO:o=>{r.value={...r.value,moveTo:{direction:o.direction,motorSpeed:o.motorSpeed}}},CARGO_OPEN:o=>{r.value={...r.value,cargoOpen:{motorSpeed:o.motorSpeed}}},CARGO_CLOSE:o=>{r.value={...r.value,cargoClose:{motorSpeed:o.motorSpeed}}},CARGO_LIFT:o=>{r.value={...r.value,cargoLift:{motorSpeed:o.motorSpeed,position:o.position}}},CARGO_LOWER:o=>{r.value={...r.value,cargoLower:{motorSpeed:o.motorSpeed,position:o.position,bottomObstacleTracking:o.bottomObstacleTracking}}},CARGO_CHECK_QR:()=>{},SCAN_LOCATION:()=>{},WAIT:()=>{}};function l(o,C){const S=n[o];S&&S(C)}return{commandConfig:m,updateCommandConfigFromInputs:l}}const ts={class:"flex items-center gap-2"},ss=x({__name:"CommandTypeSelect",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},by:{type:[String,Function]},dir:{},multiple:{type:Boolean},autocomplete:{},disabled:{type:Boolean},name:{},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(r,{emit:m}){const o=mt(r,m),C={STOP_MOVEMENT:{icon:Ne,label:"Stop Movement"},MOVE_FORWARD:{icon:Fe,label:"Move Forward"},MOVE_BACKWARD:{icon:Je,label:"Move Backward"},MOVE_TO:{icon:ze,label:"Move To"},CARGO_OPEN:{icon:K,label:"Cargo Open"},CARGO_CLOSE:{icon:K,label:"Cargo Close"},CARGO_LIFT:{icon:K,label:"Cargo Lift"},CARGO_LOWER:{icon:K,label:"Cargo Lower"},CARGO_CHECK_QR:{icon:Ve,label:"Cargo Check QR"},SCAN_LOCATION:{icon:Ie,label:"Scan Location"},WAIT:{icon:ne,label:"Wait"}};return(S,v)=>(i(),f(e(de),H(z(e(o))),{default:s(()=>[t(e(q),null,{default:s(()=>[t(e(me),null,{default:s(()=>[t(e(ue),{placeholder:"Select command type"})]),_:1})]),_:1}),t(e(pe),null,{default:s(()=>[(i(),y(j,null,Oe(C,(c,D)=>t(e(P),{key:D,value:D},{default:s(()=>[a("div",ts,[(i(),f(h(c.icon),{class:"w-4 h-4"})),a("span",null,O(c.label),1)])]),_:2},1032,["value"])),64))]),_:1})]),_:1},16))}}),ns=x({__name:"CargoCheckQRInputs",setup(r){return(m,n)=>(i(),f(e(A),{name:"inputs.qrCode"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[0]||(n[0]=[p("QR Code")])),_:1,__:[0]}),t(e(k),E(l,{type:"text",placeholder:"Enter QR code"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),os=x({__name:"CargoCloseInputs",setup(r){return(m,n)=>(i(),f(e(A),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[0]||(n[0]=[p("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(k),E(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),as=x({__name:"CargoLiftInputs",setup(r){return(m,n)=>(i(),y(j,null,[t(e(A),{name:"inputs.position"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[0]||(n[0]=[p("Lift position (cm)")])),_:1,__:[0]}),t(e(k),E(l,{type:"number",placeholder:"Enter lift position"}),null,16),t(e(T))]),_:2},1024)]),_:1}),t(e(A),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[1]||(n[1]=[p("Motor Speed (0-100%)")])),_:1,__:[1]}),t(e(k),E(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1})],64))}}),ls={class:"space-y-4"},is={class:"grid grid-cols-2 gap-4"},rs=x({__name:"CargoLowerInputs",setup(r){return(m,n)=>(i(),y(j,null,[t(e(A),{name:"inputs.position"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[0]||(n[0]=[p("Lower position (cm)")])),_:1,__:[0]}),t(e(k),E(l,{type:"number",placeholder:"Enter lower position"}),null,16),t(e(T))]),_:2},1024)]),_:1}),t(e(A),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[1]||(n[1]=[p("Motor Speed (0-100%)")])),_:1,__:[1]}),t(e(k),E(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1}),t(e(ut)),a("div",ls,[n[4]||(n[4]=a("h4",{class:"text-sm font-medium"}," Bottom Obstacle Tracking ",-1)),a("div",is,[t(e(A),{name:"inputs.bottomObstacleTracking.enterDistance"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[2]||(n[2]=[p("Enter Distance (cm)")])),_:1,__:[2]}),t(e(q),null,{default:s(()=>[t(e(k),E(l,{type:"number"}),null,16)]),_:2},1024),t(e(T))]),_:2},1024)]),_:1}),t(e(A),{name:"inputs.bottomObstacleTracking.exitDistance"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[3]||(n[3]=[p("Exit Distance (cm)")])),_:1,__:[3]}),t(e(q),null,{default:s(()=>[t(e(k),E(l,{type:"number"}),null,16)]),_:2},1024),t(e(T))]),_:2},1024)]),_:1})])])],64))}}),ds=x({__name:"CargoOpenInputs",setup(r){return(m,n)=>(i(),f(e(A),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[0]||(n[0]=[p("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(k),E(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),ms=x({__name:"MoveBackwardInputs",setup(r){return(m,n)=>(i(),f(e(A),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[0]||(n[0]=[p("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(k),E(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),us=x({__name:"MoveForwardInputs",setup(r){return(m,n)=>(i(),f(e(A),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[0]||(n[0]=[p("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(k),E(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),ps={class:"flex items-center gap-2"},cs={class:"flex items-center gap-2"},_s=x({__name:"MoveToInputs",setup(r){return(m,n)=>(i(),y(j,null,[t(e(A),{name:"inputs.location"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[0]||(n[0]=[p("Location")])),_:1,__:[0]}),t(e(k),E(l,{type:"text",placeholder:"Enter location"}),null,16),t(e(T))]),_:2},1024)]),_:1}),t(e(A),{name:"inputs.direction"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[1]||(n[1]=[p("Move direction")])),_:1,__:[1]}),t(e(de),H(z(l)),{default:s(()=>[t(e(q),null,{default:s(()=>[t(e(me),null,{default:s(()=>[t(e(ue),{placeholder:"Select direction"})]),_:1})]),_:1}),t(e(pe),null,{default:s(()=>[t(e(P),{value:"FORWARD"},{default:s(()=>[a("div",ps,[t(e(it),{class:"w-4 h-4"}),n[2]||(n[2]=a("span",null,"Forward",-1))])]),_:1}),t(e(P),{value:"BACKWARD"},{default:s(()=>[a("div",cs,[t(e(rt),{class:"w-4 h-4"}),n[3]||(n[3]=a("span",null,"Backward",-1))])]),_:1})]),_:1})]),_:2},1040)]),_:2},1024)]),_:1}),t(e(A),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[4]||(n[4]=[p("Motor Speed (0-100%)")])),_:1,__:[4]}),t(e(k),E(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1})],64))}}),fs=x({__name:"WaitInputs",setup(r){return(m,n)=>(i(),f(e(A),{name:"inputs.durationMs"},{default:s(({componentField:l})=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>n[0]||(n[0]=[p("Duration (ms)")])),_:1,__:[0]}),t(e(k),E(l,{type:"number",placeholder:"Enter duration"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),Cs=x({__name:"DynamicInputs",props:{commandType:{}},setup(r){const m=r,n={MOVE_TO:_s,MOVE_FORWARD:us,MOVE_BACKWARD:ms,CARGO_OPEN:ds,CARGO_CLOSE:os,CARGO_LIFT:as,CARGO_LOWER:rs,CARGO_CHECK_QR:ns,WAIT:fs,STOP_MOVEMENT:null,SCAN_LOCATION:null},l=J(()=>n[m.commandType]);return(o,C)=>e(l)?(i(),f(h(e(l)),{key:o.commandType})):L("",!0)}}),gs=nt("type",[g({type:M("STOP_MOVEMENT"),inputs:g({})}),g({type:M("MOVE_TO"),inputs:g({location:_e(),direction:ot([M("FORWARD"),M("BACKWARD")]),motorSpeed:I().min(0).max(100)})}),g({type:M("MOVE_FORWARD"),inputs:g({motorSpeed:I().min(0).max(100)})}),g({type:M("MOVE_BACKWARD"),inputs:g({motorSpeed:I().min(0).max(100)})}),g({type:M("CARGO_OPEN"),inputs:g({motorSpeed:I().min(0).max(100)})}),g({type:M("CARGO_CLOSE"),inputs:g({motorSpeed:I().min(0).max(100)})}),g({type:M("CARGO_LIFT"),inputs:g({motorSpeed:I().min(0).max(100),position:I().min(0)})}),g({type:M("CARGO_LOWER"),inputs:g({motorSpeed:I().min(0).max(100),bottomObstacleTracking:g({enterDistance:I().min(0),exitDistance:I().min(0)}),position:I().min(0)})}),g({type:M("CARGO_CHECK_QR"),inputs:g({qrCode:_e()})}),g({type:M("SCAN_LOCATION"),inputs:g({})}),g({type:M("WAIT"),inputs:g({durationMs:I()})})]),vs={class:"space-y-4"},ys=x({__name:"CreateCommandForm",setup(r){const{values:m,handleSubmit:n,setFieldValue:l}=at({validationSchema:lt(gs),initialValues:{type:"STOP_MOVEMENT",inputs:{}}}),o=J(()=>m.type),{mutate:C,isPending:S}=Pe(),{commandConfig:v,updateCommandConfigFromInputs:c}=es(),D=n(_=>{C(_,{onSuccess:()=>{b.success("Command created successfully")},onError:d=>{d instanceof W?b.error({title:d.errorCode,message:d.message}):b.error("Failed to create command")}}),c(o.value,_.inputs)});function F(_){l("type",_);const V={MOVE_TO:v.value.moveTo,MOVE_FORWARD:v.value.moveForward,MOVE_BACKWARD:v.value.moveBackward,CARGO_OPEN:v.value.cargoOpen,CARGO_CLOSE:v.value.cargoClose,CARGO_LIFT:v.value.cargoLift,CARGO_LOWER:v.value.cargoLower}[_]??{};l("inputs",{...V})}return(_,d)=>(i(),f(e(ae),{class:"sticky top-6"},{default:s(()=>[t(e(ie),null,{default:s(()=>[t(e(re),null,{default:s(()=>d[2]||(d[2]=[p("Create command")])),_:1,__:[2]})]),_:1}),a("form",{onSubmit:d[1]||(d[1]=Q((...V)=>e(D)&&e(D)(...V),["prevent"]))},[t(e(le),null,{default:s(()=>[a("div",vs,[t(e(A),{name:"type"},{default:s(()=>[t(e(w),null,{default:s(()=>[t(e(R),null,{default:s(()=>d[3]||(d[3]=[p("Command type")])),_:1,__:[3]}),t(ss,{disabled:e(S),"model-value":e(o),"onUpdate:modelValue":d[0]||(d[0]=V=>F(V))},null,8,["disabled","model-value"]),t(e(T))]),_:1})]),_:1}),t(Cs,{"command-type":e(o)},null,8,["command-type"])])]),_:1}),t(e(Ee),{class:"flex flex-col gap-2"},{default:s(()=>[t(e(N),{type:"submit",class:"w-full",disabled:e(S)},{default:s(()=>[e(S)?(i(),f(e(X),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):L("",!0),d[4]||(d[4]=p(" Create "))]),_:1,__:[4]},8,["disabled"])]),_:1})],32)]),_:1}))}}),Ae=x({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const m=r,n=J(()=>{const{class:l,...o}=m;return o});return(l,o)=>(i(),f(e(Ot),E(n.value,{class:e(ct)("-mx-1 my-1 h-px bg-muted",m.class)}),null,16,["class"]))}}),xs={key:0},Os={class:"flex items-center justify-center gap-2 p-9"},bs={class:"flex items-center justify-between"},Ss={class:"flex items-center gap-2 font-medium"},Es={class:"flex items-center gap-2 text-sm text-muted-foreground"},As={key:0,class:"text-sm"},ws={key:1,class:"text-sm"},Rs=1e3,$s=x({__name:"CurrentProcessingCommandCard",emits:["viewDetails"],setup(r,{emit:m}){const n=m,{openConfirmation:l}=Y(),{data:o,refetch:C,isError:S}=Be({axiosOpts:{doNotShowLoading:!0}}),{mutate:v,isPending:c}=Ce(),D=setInterval(C,Rs);be(()=>{clearInterval(D)});function F(){l({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{v(void 0,{onSuccess:()=>{b.success("Command cancelled successfully")},onError:_=>{_ instanceof W?_.errorCode==="command.noCommandBeingProcessed"?b.error("No command is being processed"):b.error(_.message):b.error(_.message)}})},onCancel:()=>{}})}return(_,d)=>e(o)&&!e(S)?(i(),f(e(ae),{key:0},{default:s(()=>[t(e(ie),{class:"pb-3"},{default:s(()=>[t(e(re),{class:"flex items-center justify-between"},{default:s(()=>[d[3]||(d[3]=a("span",null,"Current Command",-1)),t(te,{status:e(o).status},null,8,["status"])]),_:1,__:[3]})]),_:1}),t(e(le),null,{default:s(()=>[e(c)?(i(),y("div",xs,[a("div",Os,[t(e(_t),{class:"w-4 h-4 animate-spin"}),d[4]||(d[4]=a("span",null,"Cancelling command...",-1))])])):(i(),y("div",{key:1,class:"p-4 space-y-3 border rounded-lg cursor-pointer bg-muted/50",onClick:d[2]||(d[2]=V=>n("viewDetails",e(o).id))},[a("div",bs,[a("div",Ss,[(i(),f(h(e(Z)(e(o).type)),{class:"w-5 h-5"})),a("span",null,O(e(ee)(e(o).type)),1)]),a("div",{class:"flex items-center gap-2",onClick:d[1]||(d[1]=Q(()=>{},["stop"]))},[t(se,{source:e(o).source},null,8,["source"]),t(e(ge),null,{default:s(()=>[t(e(ve),{"as-child":""},{default:s(()=>[t(e(N),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(ye),{class:"w-4 h-4"})]),_:1})]),_:1}),t(e(xe),{align:"end"},{default:s(()=>[t(e(G),{class:"cursor-pointer",onClick:d[0]||(d[0]=Q(V=>n("viewDetails",e(o).id),["stop"]))},{default:s(()=>d[5]||(d[5]=[p(" View details ")])),_:1,__:[5]}),t(e(Ae)),t(e(G),{class:"text-red-500 cursor-pointer",onClick:F},{default:s(()=>d[6]||(d[6]=[p(" Cancel command ")])),_:1,__:[6]})]),_:1})]),_:1})])]),a("div",Es,[t(e(ne),{class:"w-4 h-4"}),a("span",null,"Started at: "+O(e(o).startedAt?e(B)(e(o).startedAt):"N/A"),1)]),e(o).type==="MOVE_TO"?(i(),y("div",As,[d[7]||(d[7]=a("span",{class:"font-medium"},"Location: ",-1)),p(" "+O(e(o).inputs.location),1)])):e(o).type==="CARGO_CHECK_QR"?(i(),y("div",ws,[d[8]||(d[8]=a("span",{class:"font-medium"},"QR Code: ",-1)),p(" "+O(e(o).inputs.qrCode),1)])):L("",!0)]))]),_:1})]),_:1})):L("",!0)}}),Ts={class:"flex items-center justify-between"},ks={class:"flex items-center gap-2 font-medium"},Ds={class:"flex items-center gap-2 text-sm text-muted-foreground"},Ms={key:0,class:"text-sm"},Ls={key:1,class:"text-sm"},Is=x({__name:"QueuedCommandItem",props:{command:{}},emits:["viewDetails"],setup(r,{emit:m}){const n=r,l=m,{openConfirmation:o}=Y(),{mutate:C}=fe();function S(){o({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{C(n.command.id,{onSuccess:()=>{b.success("Command removed from queue")},onError:v=>{v instanceof W?v.errorCode==="command.inProcessingCanNotBeDeleted"?b.error("Command is being processed and cannot be deleted"):b.error(v.message):b.error(v.message)}})},onCancel:()=>{}})}return(v,c)=>(i(),y("div",{class:"p-4 space-y-3 transition-colors border rounded-lg cursor-pointer bg-muted/30 border-border/50 hover:border-border",onClick:c[3]||(c[3]=D=>l("viewDetails",n.command.id))},[a("div",Ts,[a("div",ks,[(i(),f(h(e(Z)(n.command.type)),{class:"w-5 h-5"})),a("span",null,O(e(ee)(n.command.type)),1)]),a("div",{class:"flex items-center gap-2",onClick:c[2]||(c[2]=Q(()=>{},["stop"]))},[t(te,{status:n.command.status},null,8,["status"]),t(se,{source:n.command.source},null,8,["source"]),t(e(ge),null,{default:s(()=>[t(e(ve),{"as-child":""},{default:s(()=>[t(e(N),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(ye),{"class-name":"h-4 w-4"})]),_:1})]),_:1}),t(e(xe),{align:"end",onClick:c[1]||(c[1]=Q(()=>{},["stop"]))},{default:s(()=>[t(e(G),{onClick:c[0]||(c[0]=D=>l("viewDetails",n.command.id))},{default:s(()=>c[4]||(c[4]=[p(" View details ")])),_:1,__:[4]}),t(e(G),null,{default:s(()=>c[5]||(c[5]=[p("Edit command")])),_:1,__:[5]}),t(e(Ae)),t(e(G),{class:"text-red-500",onClick:S},{default:s(()=>c[6]||(c[6]=[p(" Remove from queue ")])),_:1,__:[6]})]),_:1})]),_:1})])]),a("div",Ds,[t(e(ne),{class:"w-4 h-4"}),a("span",null,"Created "+O(e(Ge)(n.command.createdAt)),1)]),n.command.type==="MOVE_TO"?(i(),y("div",Ms,[c[7]||(c[7]=a("span",{class:"font-medium"},"Location: ",-1)),p(" "+O(v.command.inputs.location),1)])):n.command.type==="CARGO_CHECK_QR"?(i(),y("div",Ls,[c[8]||(c[8]=a("span",{class:"font-medium"},"QR Code: ",-1)),p(" "+O(v.command.inputs.qrCode),1)])):L("",!0)]))}}),Vs={key:1,class:"py-6 text-center text-muted-foreground"},Fs={class:"flex items-center gap-1 text-sm text-muted-foreground"},Ns=2e3,Ps=x({__name:"WaitingCommandList",emits:["viewDetails"],setup(r,{emit:m}){const n=m,l=U(1),o=U(5),{data:C,refetch:S}=We(l,o,{axiosOpts:{doNotShowLoading:!0}});function v(){l.value=1}function c(F){l.value=F}const D=setInterval(S,Ns);return be(()=>{clearInterval(D)}),(F,_)=>e(C)?(i(),f(e(ae),{key:0},{default:s(()=>[t(e(ie),{class:"pb-3"},{default:s(()=>[t(e(re),{class:"flex items-center justify-between"},{default:s(()=>[_[1]||(_[1]=a("span",null,"Waiting Commands",-1)),t(e(Ye),{variant:"outline"},{default:s(()=>[p(O(e(C).totalItems)+" commands ",1)]),_:1})]),_:1,__:[1]})]),_:1}),t(e(le),{class:"space-y-3"},{default:s(()=>[e(C).totalItems>0?(i(!0),y(j,{key:0},Oe(e(C).items,d=>(i(),f(Is,{key:d.id,command:d,onViewDetails:V=>n("viewDetails",d.id)},null,8,["command","onViewDetails"]))),128)):(i(),y("div",Vs," No commands in queue "))]),_:1}),t(e(Ee),{class:"flex items-center justify-between pt-4 border-t"},{default:s(()=>[a("div",Fs,[_[5]||(_[5]=a("span",{class:"text-sm sr-only sm:not-sr-only"}," Items per page: ",-1)),t(e(de),{modelValue:e(o),"onUpdate:modelValue":[_[0]||(_[0]=d=>Se(o)?o.value=d:null),v]},{default:s(()=>[t(e(me),{class:"w-16 h-8 ml-2"},{default:s(()=>[t(e(ue),{placeholder:"5"})]),_:1}),t(e(pe),null,{default:s(()=>[t(e(P),{value:"5"},{default:s(()=>_[2]||(_[2]=[p(" 5 ")])),_:1,__:[2]}),t(e(P),{value:"10"},{default:s(()=>_[3]||(_[3]=[p(" 10 ")])),_:1,__:[3]}),t(e(P),{value:"20"},{default:s(()=>_[4]||(_[4]=[p(" 20 ")])),_:1,__:[4]})]),_:1})]),_:1},8,["modelValue"])]),t(e(Qe),{"sibling-count":1,"items-per-page":e(o),total:e(C).totalItems,"default-page":e(l),"onUpdate:page":c},{default:s(()=>[t(e(he),{class:"flex items-center gap-1"},{default:s(()=>[t(e(je)),t(e(Ke)),t(e(Ue)),t(e(qe))]),_:1})]),_:1},8,["items-per-page","total","default-page"])]),_:1})]),_:1})):L("",!0)}}),Bs={class:"flex items-center justify-between"},Gs={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},Ws={class:"space-y-6 md:col-span-2"},on=x({__name:"CommandQueueView",setup(r){const m=U(!1),n=U(null);function l(o){n.value=o,m.value=!0}return(o,C)=>(i(),f(ft,null,{default:s(()=>[a("div",Bs,[C[2]||(C[2]=a("div",null,[a("h1",{class:"text-xl font-semibold tracking-tight"}," Robot command queue "),a("p",{class:"text-sm text-muted-foreground"}," Manage and monitor robot commands in real-time ")],-1)),t(e(bt),null,{default:s(()=>[t(e(gt),null,{default:s(()=>[t(e(vt),{"as-child":""},{default:s(()=>[t(e(N),{variant:"outline",size:"icon"},{default:s(()=>[t(e(X),{class:"w-4 h-4 animate-spin"})]),_:1})]),_:1}),t(e(yt),null,{default:s(()=>C[1]||(C[1]=[a("p",null,"Refreshing in real-time",-1)])),_:1,__:[1]})]),_:1})]),_:1})]),a("div",Gs,[a("div",Ws,[t($s,{onViewDetails:l}),t(Ps,{onViewDetails:l})]),a("div",null,[t(ys)])]),e(n)?(i(),f(Yt,{key:0,"is-open":e(m),"onUpdate:isOpen":C[0]||(C[0]=S=>Se(m)?m.value=S:null),"command-id":e(n)},null,8,["is-open","command-id"])):L("",!0)]),_:1}))}});export{on as default};
