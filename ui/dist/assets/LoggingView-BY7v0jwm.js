import{l as P,L as J,_ as W,m as Q}from"./Switch.vuevuetypescriptsetuptruelang-B4Cq5oAw.js";import{_ as q}from"./index-DSccp9U9.js";import{z as u,u as A,F as m,_ as g,a as _,b as x,c as L,t as X,d as B}from"./vee-validate-zod-T7waZF-X.js";import{_ as w,a as T,b as k,c as V,d}from"./SelectValue.vuevuetypescriptsetuptruelang-yEKT1Xo_.js";import{u as z}from"./http-xk_3xMuy.js";import{d as F,I as U,p as $,o as r,u as e,g as l,l as c,w as t,s as o,i as N,j as E,c as O,D as S,F as H,m as M,N as Y,G as K,O as Z}from"./index-B4OrkhLT.js";import{L as D,_ as h}from"./PageContainer.vuevuetypescriptsetuptruelang-BlLi23dO.js";/* empty css                                                              */import{_ as ee,a as I,b as G,c as le}from"./TabsTrigger.vuevuetypescriptsetuptruelang-Do64NUwH.js";import"./check-B9-WhuNZ.js";const te={class:"space-y-0.5"},ae=F({__name:"LogConsoleConfigForm",props:{logConfig:{}},setup(y){const i=y,f=u.object({enable:u.boolean(),level:u.union([u.literal("DEBUG"),u.literal("INFO"),u.literal("WARN"),u.literal("ERROR")]),format:u.union([u.literal("JSON"),u.literal("TEXT")])}),p=A({validationSchema:X(f),initialValues:i.logConfig.console}),b=z(),{mutate:C,isPending:n}=P(),v=p.handleSubmit(R=>{const a={...i.logConfig,console:R};C(a,{onSuccess:()=>{b.setQueryData([J],a),U.success("Log configuration updated successfully!")},onError:()=>{U.error("Failed to update log configuration")}})});return(R,a)=>(r(),$("form",{class:"flex flex-col w-full max-w-lg space-y-6",onSubmit:a[0]||(a[0]=(...s)=>e(v)&&e(v)(...s))},[l(e(m),{name:"enable"},{default:t(({value:s,handleChange:j})=>[l(e(g),{class:"flex flex-row items-center justify-between p-4 border rounded-lg"},{default:t(()=>[c("div",te,[l(e(_),null,{default:t(()=>a[1]||(a[1]=[o("Enable Log Handler")])),_:1})]),l(e(x),null,{default:t(()=>[l(e(W),{"model-value":s,disabled:e(n),"aria-readonly":"","onUpdate:modelValue":j},null,8,["model-value","disabled","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1}),l(e(m),{name:"level"},{default:t(({componentField:s})=>[l(e(g),null,{default:t(()=>[l(e(_),null,{default:t(()=>a[2]||(a[2]=[o("Log Level")])),_:1}),l(e(w),N(E(s)),{default:t(()=>[l(e(x),null,{default:t(()=>[l(e(T),{disabled:e(n)},{default:t(()=>[l(e(k),{placeholder:"Select log level"})]),_:1},8,["disabled"])]),_:1}),l(e(V),null,{default:t(()=>[l(e(d),{value:"DEBUG"},{default:t(()=>a[3]||(a[3]=[o(" Debug ")])),_:1}),l(e(d),{value:"INFO"},{default:t(()=>a[4]||(a[4]=[o(" Info ")])),_:1}),l(e(d),{value:"WARN"},{default:t(()=>a[5]||(a[5]=[o(" Warning ")])),_:1}),l(e(d),{value:"ERROR"},{default:t(()=>a[6]||(a[6]=[o(" Error ")])),_:1})]),_:1})]),_:2},1040),l(e(L))]),_:2},1024)]),_:1}),l(e(m),{name:"format"},{default:t(({componentField:s})=>[l(e(g),null,{default:t(()=>[l(e(_),null,{default:t(()=>a[7]||(a[7]=[o("Log Formatter")])),_:1}),l(e(w),N(E(s)),{default:t(()=>[l(e(x),null,{default:t(()=>[l(e(T),{disabled:e(n)},{default:t(()=>[l(e(k),{placeholder:"Select log format"})]),_:1},8,["disabled"])]),_:1}),l(e(V),null,{default:t(()=>[l(e(d),{value:"JSON"},{default:t(()=>a[8]||(a[8]=[o(" JSON ")])),_:1}),l(e(d),{value:"TEXT"},{default:t(()=>a[9]||(a[9]=[o(" Text ")])),_:1})]),_:1})]),_:2},1040),l(e(L))]),_:2},1024)]),_:1}),c("div",null,[l(e(q),{type:"submit",disabled:e(n)},{default:t(()=>[e(n)?(r(),O(e(D),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):S("",!0),a[10]||(a[10]=o(" Save "))]),_:1},8,["disabled"])])],32))}}),oe={key:0,class:"flex items-center justify-center h-full"},ne=F({__name:"LogConsoleConfigTab",setup(y){const{data:i,isPending:f}=Q();return(p,b)=>(r(),$(H,null,[e(f)?(r(),$("div",oe,[l(e(D),{class:"w-4 h-4 animate-spin"})])):S("",!0),e(i)?(r(),O(ae,{key:1,"log-config":e(i)},null,8,["log-config"])):S("",!0)],64))}}),ue={class:"space-y-0.5"},se=F({__name:"LogFileConfigForm",props:{logConfig:{}},setup(y){const i=y,f=u.object({enable:u.boolean(),path:u.string().default("logs/raybot.log"),rotationCount:u.number().min(1).default(10),format:u.union([u.literal("JSON"),u.literal("TEXT")]),level:u.union([u.literal("DEBUG"),u.literal("INFO"),u.literal("WARN"),u.literal("ERROR")])}),p=A({validationSchema:X(f),initialValues:i.logConfig.file}),b=z(),{mutate:C,isPending:n}=P(),v=p.handleSubmit(R=>{const a={...i.logConfig,file:R};C(a,{onSuccess:()=>{b.setQueryData([J],a),U.success("Log configuration updated successfully!")},onError:()=>{U.error("Failed to update log configuration")}})});return(R,a)=>(r(),$("form",{class:"flex flex-col w-full max-w-lg space-y-6",onSubmit:a[0]||(a[0]=(...s)=>e(v)&&e(v)(...s))},[l(e(m),{name:"enable"},{default:t(({value:s,handleChange:j})=>[l(e(g),{class:"flex flex-row items-center justify-between p-4 border rounded-lg"},{default:t(()=>[c("div",ue,[l(e(_),null,{default:t(()=>a[1]||(a[1]=[o("Enable Log Handler")])),_:1})]),l(e(x),null,{default:t(()=>[l(e(W),{"model-value":s,disabled:e(n),"aria-readonly":"","onUpdate:modelValue":j},null,8,["model-value","disabled","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1}),l(e(m),{name:"path"},{default:t(({componentField:s})=>[l(e(g),null,{default:t(()=>[l(e(_),null,{default:t(()=>a[2]||(a[2]=[o("Log File Name")])),_:1}),l(e(B),N(E(s)),null,16),l(e(L))]),_:2},1024)]),_:1}),l(e(m),{name:"rotationCount"},{default:t(({componentField:s})=>[l(e(g),null,{default:t(()=>[l(e(_),null,{default:t(()=>a[3]||(a[3]=[o("Max Log Files Number")])),_:1}),l(e(B),M({type:"number"},s),null,16),l(e(L))]),_:2},1024)]),_:1}),l(e(m),{name:"level"},{default:t(({componentField:s})=>[l(e(g),null,{default:t(()=>[l(e(_),null,{default:t(()=>a[4]||(a[4]=[o("Log Level")])),_:1}),l(e(w),N(E(s)),{default:t(()=>[l(e(x),null,{default:t(()=>[l(e(T),{disabled:e(n)},{default:t(()=>[l(e(k),{placeholder:"Select log level"})]),_:1},8,["disabled"])]),_:1}),l(e(V),null,{default:t(()=>[l(e(d),{value:"DEBUG"},{default:t(()=>a[5]||(a[5]=[o(" Debug ")])),_:1}),l(e(d),{value:"INFO"},{default:t(()=>a[6]||(a[6]=[o(" Info ")])),_:1}),l(e(d),{value:"WARN"},{default:t(()=>a[7]||(a[7]=[o(" Warning ")])),_:1}),l(e(d),{value:"ERROR"},{default:t(()=>a[8]||(a[8]=[o(" Error ")])),_:1})]),_:1})]),_:2},1040),l(e(L))]),_:2},1024)]),_:1}),l(e(m),{name:"format"},{default:t(({componentField:s})=>[l(e(g),null,{default:t(()=>[l(e(_),null,{default:t(()=>a[9]||(a[9]=[o("Log Formatter")])),_:1}),l(e(w),N(E(s)),{default:t(()=>[l(e(x),null,{default:t(()=>[l(e(T),{disabled:e(n)},{default:t(()=>[l(e(k),{placeholder:"Select log format"})]),_:1},8,["disabled"])]),_:1}),l(e(V),null,{default:t(()=>[l(e(d),{value:"JSON"},{default:t(()=>a[10]||(a[10]=[o(" JSON ")])),_:1}),l(e(d),{value:"TEXT"},{default:t(()=>a[11]||(a[11]=[o(" Text ")])),_:1})]),_:1})]),_:2},1040),l(e(L))]),_:2},1024)]),_:1}),c("div",null,[l(e(q),{type:"submit",disabled:e(n)},{default:t(()=>[e(n)?(r(),O(e(D),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):S("",!0),a[12]||(a[12]=o(" Save "))]),_:1},8,["disabled"])])],32))}}),ie={key:0,class:"flex items-center justify-center h-full"},de=F({__name:"LogFileConfigTab",setup(y){const{data:i,isPending:f}=Q();return(p,b)=>(r(),$(H,null,[e(f)?(r(),$("div",ie,[l(e(D),{class:"w-4 h-4 animate-spin"})])):S("",!0),e(i)?(r(),O(se,{key:1,"log-config":e(i)},null,8,["log-config"])):S("",!0)],64))}}),re={class:"text-sm text-muted-foreground"},Le=F({__name:"LoggingView",setup(y){const i=Y(),f=Z(),p=i.query.tab??"console";function b(C){f.replace({query:{tab:C}})}return(C,n)=>{const v=K("RouterLink");return r(),O(h,null,{default:t(()=>[c("div",null,[n[2]||(n[2]=c("h1",{class:"text-xl font-semibold tracking-tight"}," Logging ",-1)),c("p",re,[n[1]||(n[1]=o(" Log configuration allows users to set up and manage the logging system ")),l(v,{to:"/reboot",class:"text-blue-500"},{default:t(()=>n[0]||(n[0]=[o(" (Reboot to apply changes) ")])),_:1})])]),l(e(le),{"default-value":e(p),"onUpdate:modelValue":b},{default:t(()=>[l(e(ee),null,{default:t(()=>[l(e(I),{value:"console"},{default:t(()=>n[3]||(n[3]=[o(" Console Log ")])),_:1}),l(e(I),{value:"file"},{default:t(()=>n[4]||(n[4]=[o(" File Log ")])),_:1})]),_:1}),l(e(G),{value:"console"},{default:t(()=>[l(ne)]),_:1}),l(e(G),{value:"file"},{default:t(()=>[l(de)]),_:1})]),_:1},8,["default-value"])]),_:1})}}});export{Le as default};
