import{i as M,u as A,_ as N,L as D,a as i,b as p}from"./http-Bfa_KUKo.js";import{C as y,_ as f,a as g}from"./CardTitle.vuevuetypescriptsetuptruelang-CyR33zZS.js";import{d as R,c as k,w as a,e as c,D as b,b as s,F as t,f as n,z as o,y as r,G as u}from"./index-DEANAfPF.js";import"./createLucideIcon-R--wCYkP.js";const T={getRobotState(d){return M.get("/robot-state",d)}};function V(d){return A({queryKey:["robotState"],queryFn:()=>T.getRobotState(d==null?void 0:d.axiosOpts),refetchInterval:d==null?void 0:d.refetchInterval})}function x(d){if(!d)return"N/A";const l=new Date(d);return Number.isNaN(l.getTime())?"Invalid date":new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,year:"numeric",month:"short",day:"numeric"}).format(l)}const B={key:0,class:"flex flex-col items-center justify-center gap-4 pt-20"},E={class:"flex items-center gap-4"},F={key:1,class:"flex flex-col items-center justify-center gap-4 pt-20"},I={class:"space-y-2 text-center"},Y={class:"text-sm text-muted-foreground"},$={key:2,class:"flex flex-col items-center justify-center gap-4 pt-20"},j={key:3,class:"flex flex-col w-full"},P={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},q={class:"mx-auto space-x-2"},z={class:"grid grid-cols-1 gap-2 sm:grid-cols-2"},H={class:"text-green-600"},O={class:"mx-auto space-x-2"},Q={class:"flex flex-col gap-2"},G={class:"mx-auto space-x-2"},K={class:"flex flex-col gap-2"},U={class:"mx-auto space-x-2"},J={class:"grid grid-rows-1 gap-2"},W={class:"grid grid-cols-1 gap-2 sm:grid-cols-2"},X={class:"mx-auto space-x-2"},Z={class:"grid grid-rows-1 gap-2"},h={class:"grid grid-cols-1 gap-2 sm:grid-cols-2"},tt={class:"mx-auto space-x-2"},et={class:"grid grid-rows-2 gap-2"},st={class:"mx-auto space-x-2"},lt={class:"grid grid-rows-1 gap-2"},nt=1e3,it=R({__name:"StateView",setup(d){const{data:l,isPending:S,isError:_,error:w}=V({axiosOpts:{doNotShowLoading:!0},refetchInterval:nt});function L(m){return m<20?"text-red-5500":m<40?"text-orange-500":m<60?"text-yellow-500":"text-green-500"}function C(m){return m<15?"text-blue-500":m<35?"text-green-500":"text-red-500"}return(m,e)=>(c(),k(N,null,{default:a(()=>[s(S)?(c(),b("div",B,[t("div",E,[n(s(D),{class:"w-8 h-8 animate-spin text-muted-foreground"})]),e[0]||(e[0]=t("p",{class:"text-lg text-muted-foreground"}," Loading state... ",-1))])):s(_)?(c(),b("div",F,[n(s(i),{class:"flex flex-col items-center gap-4 p-6 text-destructive"},{default:a(()=>{var v;return[n(s(y),{class:"w-8 h-8"}),t("div",I,[e[1]||(e[1]=t("h2",{class:"text-lg font-semibold"}," Failed to load state ",-1)),t("p",Y,o(((v=s(w))==null?void 0:v.message)||"An unexpected error occurred"),1)])]}),_:1})])):s(l)?(c(),b("div",j,[e[40]||(e[40]=t("div",{class:"mb-6"},[t("h1",{class:"text-xl font-semibold"}," Robot state "),t("p",{class:"text-sm text-muted-foreground"}," The current state of the robot is updated once per second. ")],-1)),t("div",P,[n(s(i),{class:"col-span-1 sm:col-span-2"},{default:a(()=>[n(s(f),null,{default:a(()=>[n(s(g),null,{default:a(()=>e[3]||(e[3]=[r("Battery State")])),_:1})]),_:1}),n(s(p),null,{default:a(()=>[t("div",q,[t("div",z,[t("p",null,[e[4]||(e[4]=t("span",{class:"font-medium"},"Current: ",-1)),r(o(s(l).battery.current)+" mA",1)]),t("p",null,[e[5]||(e[5]=t("span",{class:"font-medium"},"Battery level: ",-1)),t("span",{class:u(L(s(l).battery.percent))},o(s(l).battery.percent)+"%",3)]),t("p",null,[e[6]||(e[6]=t("span",{class:"font-medium"},"Voltage: ",-1)),r(o(s(l).battery.voltage)+" V",1)]),t("p",null,[e[7]||(e[7]=t("span",{class:"font-medium"},"Health: ",-1)),r(o(s(l).battery.health)+"%",1)]),t("p",null,[e[8]||(e[8]=t("span",{class:"font-medium"},"Cell voltages: ",-1)),t("span",null,o(s(l).battery.cellVoltages.join(", "))+" V",1)]),t("p",null,[e[9]||(e[9]=t("span",{class:"font-medium"},"Fault status: ",-1)),t("span",H,o(s(l).battery.fault),1)]),t("p",null,[e[10]||(e[10]=t("span",{class:"font-medium"},"Temperature: ",-1)),t("span",{class:u(C(s(l).battery.temp))},o(s(l).battery.temp)+"Â°C",3)]),t("p",null,[e[11]||(e[11]=t("span",{class:"font-medium"},"Last updated: ",-1)),r(o(s(x)(s(l).battery.updatedAt)),1)])])])]),_:1})]),_:1}),n(s(i),null,{default:a(()=>[n(s(f),null,{default:a(()=>[n(s(g),null,{default:a(()=>e[12]||(e[12]=[r("Charge State")])),_:1})]),_:1}),n(s(p),null,{default:a(()=>[t("div",O,[t("div",Q,[t("p",null,[e[13]||(e[13]=t("span",{class:"font-medium"},"Current limit: ",-1)),r(o(s(l).charge.currentLimit)+" mA ",1)]),t("p",null,[e[14]||(e[14]=t("span",{class:"font-medium"},"Charging: ",-1)),t("span",{class:u(s(l).charge.enabled?"text-green-500":"text-red-500")},o(s(l).charge.enabled?"Yes":"No"),3)]),t("p",null,[e[15]||(e[15]=t("span",{class:"font-medium"},"Last updated: ",-1)),r(" "+o(s(x)(s(l).charge.updatedAt)),1)])])])]),_:1})]),_:1}),n(s(i),null,{default:a(()=>[n(s(f),null,{default:a(()=>[n(s(g),null,{default:a(()=>e[16]||(e[16]=[r("Discharge State")])),_:1})]),_:1}),n(s(p),null,{default:a(()=>[t("div",G,[t("div",K,[t("p",null,[e[17]||(e[17]=t("span",{class:"font-medium"},"Current limit: ",-1)),r(o(s(l).discharge.currentLimit)+" mA ",1)]),t("p",null,[e[18]||(e[18]=t("span",{class:"font-medium"},"Discharging: ",-1)),t("span",{class:u(s(l).discharge.enabled?"text-green-500":"text-red-500")},o(s(l).discharge.enabled?"Yes":"No"),3)]),t("p",null,[e[19]||(e[19]=t("span",{class:"font-medium"},"Last updated: ",-1)),r(o(s(x)(s(l).discharge.updatedAt)),1)])])])]),_:1})]),_:1}),n(s(i),null,{default:a(()=>[n(s(f),null,{default:a(()=>[n(s(g),null,{default:a(()=>e[20]||(e[20]=[r("Lift Motor State")])),_:1})]),_:1}),n(s(p),null,{default:a(()=>[t("div",U,[t("div",J,[t("div",W,[t("p",null,[e[21]||(e[21]=t("span",{class:"font-medium"},"Current: ",-1)),r(o(s(l).liftMotor.currentPosition)+" cm",1)]),t("p",null,[e[22]||(e[22]=t("span",{class:"font-medium"},"Target: ",-1)),r(o(s(l).liftMotor.targetPosition)+" cm",1)]),t("p",null,[e[23]||(e[23]=t("span",{class:"font-medium"},"Running: ",-1)),t("span",{class:u(s(l).liftMotor.isRunning?"text-green-500":"text-red-500")},o(s(l).liftMotor.isRunning?"Yes":"No"),3)]),t("p",null,[e[24]||(e[24]=t("span",{class:"font-medium"},"Enabled: ",-1)),t("span",{class:u(s(l).liftMotor.enabled?"text-green-500":"text-red-500")},o(s(l).liftMotor.enabled?"Yes":"No"),3)])]),t("p",null,[e[25]||(e[25]=t("span",{class:"font-medium"},"Last updated:",-1)),r(" "+o(s(x)(s(l).liftMotor.updatedAt)),1)])])])]),_:1})]),_:1}),n(s(i),null,{default:a(()=>[n(s(f),null,{default:a(()=>[n(s(g),null,{default:a(()=>e[26]||(e[26]=[r("Drive Motor State")])),_:1})]),_:1}),n(s(p),null,{default:a(()=>[t("div",X,[t("div",Z,[t("p",null,[e[27]||(e[27]=t("span",{class:"font-medium"},"Direction: ",-1)),r(o(s(l).driveMotor.direction),1)]),t("p",null,[e[28]||(e[28]=t("span",{class:"font-medium"},"Speed: ",-1)),r(o(s(l).driveMotor.speed)+" %",1)]),t("div",h,[t("p",null,[e[29]||(e[29]=t("span",{class:"font-medium"},"Running: ",-1)),t("span",{class:u(s(l).driveMotor.isRunning?"text-green-500":"text-red-500")},o(s(l).driveMotor.isRunning?"Yes":"No"),3)]),t("p",null,[e[30]||(e[30]=t("span",{class:"font-medium"},"Enabled: ",-1)),t("span",{class:u(s(l).driveMotor.enabled?"text-green-500":"text-red-500")},o(s(l).driveMotor.enabled?"Yes":"No"),3)])]),t("p",null,[e[31]||(e[31]=t("span",{class:"font-medium"},"Last updated: ",-1)),r(o(s(x)(s(l).driveMotor.updatedAt)),1)])])])]),_:1})]),_:1}),n(s(i),null,{default:a(()=>[n(s(f),null,{default:a(()=>[n(s(g),null,{default:a(()=>e[32]||(e[32]=[r("Distance Sensor State")])),_:1})]),_:1}),n(s(p),null,{default:a(()=>[t("div",tt,[t("div",et,[t("p",null,[e[33]||(e[33]=t("span",{class:"font-medium"},"Front: ",-1)),r(o(s(l).distanceSensor.frontDistance)+" cm",1)]),t("p",null,[e[34]||(e[34]=t("span",{class:"font-medium"},"Back: ",-1)),r(o(s(l).distanceSensor.backDistance)+" cm",1)]),t("p",null,[e[35]||(e[35]=t("span",{class:"font-medium"},"Down: ",-1)),r(o(s(l).distanceSensor.downDistance)+" cm",1)]),t("p",null,[e[36]||(e[36]=t("span",{class:"font-medium"},"Last updated: ",-1)),r(o(s(x)(s(l).distanceSensor.updatedAt)),1)])])])]),_:1})]),_:1}),n(s(i),null,{default:a(()=>[n(s(f),null,{default:a(()=>[n(s(g),null,{default:a(()=>e[37]||(e[37]=[r("Location State")])),_:1})]),_:1}),n(s(p),null,{default:a(()=>[t("div",st,[t("div",lt,[t("p",null,[e[38]||(e[38]=t("span",{class:"font-medium"},"Current location: ",-1)),r(o(s(l).location.currentLocation),1)]),t("p",null,[e[39]||(e[39]=t("span",{class:"font-medium"},"Last updated:",-1)),r(" "+o(s(x)(s(l).location.updatedAt)),1)])])])]),_:1})]),_:1})])])):(c(),b("div",$,[n(s(i),{class:"flex flex-col items-center gap-4 p-6"},{default:a(()=>[n(s(y),{class:"w-8 h-8 text-muted-foreground"}),e[2]||(e[2]=t("div",{class:"space-y-2 text-center"},[t("h2",{class:"text-lg font-semibold"}," Robot state not found "),t("p",{class:"text-sm text-muted-foreground"}," The robot state appears to be empty ")],-1))]),_:1})]))]),_:1}))}});export{it as default};
