import{_ as D}from"./index-CC57JQFj.js";import{i as ie,e as Oe,_ as Ee,a as Re,b as De,c as Se,d as Ae}from"./TooltipTrigger.vuevuetypescriptsetuptruelang-B1bIvhCO.js";import{P as K,c as j,a as P}from"./createLucideIcon-uuuZHjQh.js";import{u as B,b as Me,d as je}from"./PopperContent-D3nZhBrS.js";import{d as y,a as f,o as m,w as s,r as w,m as h,u as e,h as q,i as W,g as I,c as C,f as H,j as _,k as L,t as v,I as Pe,J as Ie,K as Le,L as Ve,D as Be,b as t,y as $,e as a,R as Fe,M as T,N as M,O as re,p as V,v as Te,F as Ne,B as de}from"./index-C4xk3hCt.js";import{_ as Qe,C as Ge,a as Ue,L as F,b as J,A as ue,u as ze,c as He,d as Ke,e as me,f as ce,g as pe,h as qe,i as We,j as Je,k as Xe,l as Ye,m as Ze,n as et}from"./PaginationPrev.vuevuetypescriptsetuptruelang-CxGwIxlv.js";import{_ as X,A as fe,d as _e,r as tt,a as N}from"./date-BSMqgJLu.js";import{C as st,P as R,M as ge,_ as Y,a as Z}from"./CardTitle.vuevuetypescriptsetuptruelang-BrRdeHwT.js";import{_ as ee,a as te}from"./CardContent.vuevuetypescriptsetuptruelang-D7O9pATY.js";import{_ as ye}from"./CardFooter.vuevuetypescriptsetuptruelang-CVWVxpQR.js";import{z as p,u as at,F as Q,_ as G,a as U,b as nt,c as z,d as le,t as ot}from"./vee-validate-zod-Ckx27CQS.js";import{_ as ve,a as Ce,b as xe,c as be,d as b}from"./SelectValue.vuevuetypescriptsetuptruelang-DagLmEJ8.js";import{_ as lt}from"./http-BqpH77Xt.js";import"./useMutation-ByJw-ViA.js";const it=y({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(c){const n=c,o=ie();return B(),(i,l)=>(m(),f(e(K),h(n,{id:e(o).titleId}),{default:s(()=>[w(i.$slots,"default")]),_:3},16,["id"]))}}),rt=y({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(c){const n=c;B();const o=ie();return(i,l)=>(m(),f(e(K),h(n,{id:e(o).descriptionId}),{default:s(()=>[w(i.$slots,"default")]),_:3},16,["id"]))}}),dt=y({__name:"MenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(c){const n=c;return(o,i)=>(m(),f(e(K),h(n,{role:"separator","aria-orientation":"horizontal"}),{default:s(()=>[w(o.$slots,"default")]),_:3},16))}}),ut=y({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(c,{emit:n}){const o=c,l=Me(n);return B(),(u,x)=>(m(),f(e(Qe),q(W({...o,...e(l)})),{default:s(()=>[w(u.$slots,"default")]),_:3},16))}}),mt=y({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(c){const n=c;return B(),(o,i)=>(m(),f(e(dt),q(W(n)),{default:s(()=>[w(o.$slots,"default")]),_:3},16))}});/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=j("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=j("circle-stop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=j("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=j("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=j("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),ft=y({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(c){const n=c,o=I(()=>{const{class:i,...l}=n;return l});return(i,l)=>(m(),f(e(rt),h({class:e(P)("text-sm text-muted-foreground",n.class)},o.value),{default:s(()=>[w(i.$slots,"default")]),_:3},16,["class"]))}}),_t=y({__name:"SheetHeader",props:{class:{}},setup(c){const n=c;return(o,i)=>(m(),C("div",{class:H(e(P)("flex flex-col gap-y-2 text-center sm:text-left",n.class))},[w(o.$slots,"default")],2))}}),gt=y({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(c){const n=c,o=I(()=>{const{class:i,...l}=n;return l});return(i,l)=>(m(),f(e(it),h({class:e(P)("text-lg font-semibold text-foreground",n.class)},o.value),{default:s(()=>[w(i.$slots,"default")]),_:3},16,["class"]))}}),yt=y({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(c){const n=c;return(o,i)=>(m(),f(e(Oe),q(W(n)),{default:s(()=>[w(o.$slots,"default")]),_:3},16))}}),se=y({__name:"SourceBadge",props:{source:{}},setup(c){const n=c,o={CLOUD:{icon:st,label:"Cloud"},APP:{icon:pt,label:"App"}};return(i,l)=>(m(),f(e(X),{variant:"outline",class:"flex items-center gap-1"},{default:s(()=>[(m(),f(L(o[n.source].icon),{class:"w-3 h-3"})),_(" "+v(o[n.source].label),1)]),_:1}))}}),ae=y({__name:"StatusBadge",props:{status:{}},setup(c){const n=c,o={QUEUED:{icon:J,label:"Queued",class:"bg-amber-500/10 text-amber-500 hover:bg-amber-500/20 hover:text-amber-500"},PROCESSING:{icon:F,label:"Processing",class:"bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 hover:text-blue-500"},SUCCEEDED:{icon:Ue,label:"Succeeded",class:"bg-green-500/10 text-green-500 hover:bg-green-500/20 hover:text-green-500"},FAILED:{icon:Ge,label:"Failed",class:"bg-red-500/10 text-red-500 hover:bg-red-500/20 hover:text-red-500"},CANCELED:{icon:ct,label:"Canceled",class:"bg-slate-500/10 text-slate-500 hover:bg-slate-500/20 hover:text-slate-500"}};return(i,l)=>(m(),f(e(X),{variant:"secondary",class:H(["flex items-center gap-1",[o[n.status].class]])},{default:s(()=>[(m(),f(L(o[n.status].icon),{class:H(["w-3 h-3",{"animate-spin":n.status==="PROCESSING"}])},null,8,["class"])),_(" "+v(o[n.status].label),1)]),_:1},8,["class"]))}});_e.extend(tt);const vt={STOP:$e,MOVE_FORWARD:ue,MOVE_BACKWARD:fe,MOVE_TO:ge,CARGO_OPEN:R,CARGO_CLOSE:R,CARGO_LIFT:R,CARGO_LOWER:R,CARGO_CHECK_QR:he};function ne(c){return vt[c]}function oe(c){return c.replace(/_/g," ").toLowerCase().replace(/\b\w/g,n=>n.toUpperCase())}function Ct(c){const n=_e(c);return n.isValid()?n.fromNow():"N/A"}const xt={key:0},bt={class:"flex items-center justify-center py-8"},$t={key:1},wt={key:2,class:"mt-6 space-y-6"},ht={class:"flex items-center justify-between"},kt={class:"flex items-center gap-2"},Ot={class:"text-sm font-medium"},Et={class:"grid grid-cols-2 gap-4"},Rt={class:"font-medium"},Dt={class:"flex flex-col items-start gap-2"},St={class:"space-y-2"},At={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Mt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},jt={key:0,class:"space-y-2"},Pt={class:"p-3 rounded-md bg-destructive/10 text-destructive"},It={class:"space-y-2"},Lt={class:"space-y-3"},Vt={class:"flex justify-between text-sm"},Bt={key:0,class:"flex justify-between text-sm"},Ft={class:"flex justify-between text-sm"},Tt={class:"flex gap-2 pt-4"},Nt=2e3,Qt=y({__name:"CommandDetailSheet",props:Pe({commandId:{}},{isOpen:{type:Boolean,required:!0},isOpenModifiers:{}}),emits:["update:isOpen"],setup(c){const n=c,o=Ie(c,"isOpen"),i=Le(n,"commandId"),{data:l,isPending:u,isError:x,refetch:S}=ze(i,{axiosOpts:{doNotShowLoading:!0}}),{pause:g,resume:k}=Ve(()=>{S()},Nt,{immediate:!1});return Be(l,O=>{O&&["SUCCEEDED","FAILED","CANCELED"].includes(O.status)?g():k()},{immediate:!0}),(O,r)=>(m(),f(e(Ee),{open:o.value,"onUpdate:open":r[0]||(r[0]=d=>o.value=d)},{default:s(()=>[t(e(Re),{class:"sm:max-w-md"},{default:s(()=>[t(e(_t),null,{default:s(()=>[t(e(gt),null,{default:s(()=>r[1]||(r[1]=[_(" Command detail ")])),_:1}),t(e(ft),null,{default:s(()=>r[2]||(r[2]=[_(" Real-time information about the selected command ")])),_:1})]),_:1}),e(u)?(m(),C("div",xt,[a("div",bt,[t(e(F),{class:"w-8 h-8 animate-spin"})])])):e(x)?(m(),C("div",$t,r[3]||(r[3]=[a("div",{class:"flex items-center justify-center py-8"},[a("p",{class:"text-sm text-muted-foreground"}," Failed to load command details ")],-1)]))):e(l)?(m(),C("div",wt,[a("div",ht,[a("div",kt,[(m(),f(L(e(ne)(e(l).type)))),a("span",Ot,v(e(oe)(e(l).type)),1)]),t(ae,{status:e(l).status},null,8,["status"])]),a("div",Et,[a("div",null,[r[4]||(r[4]=a("p",{class:"text-sm text-muted-foreground"}," ID ",-1)),a("p",Rt,v(e(l).id),1)]),a("div",Dt,[r[5]||(r[5]=a("p",{class:"text-sm text-muted-foreground"}," Source ",-1)),t(se,{source:e(l).source},null,8,["source"])])]),a("div",St,[r[6]||(r[6]=a("p",{class:"text-sm font-medium"}," Command Inputs ",-1)),a("div",At,[a("span",Mt,v(JSON.stringify(e(l).inputs,null,4)),1)])]),e(l).error?(m(),C("div",jt,[r[7]||(r[7]=a("p",{class:"text-sm font-medium text-destructive"}," Error ",-1)),a("div",Pt,v(e(l).error),1)])):$("",!0),a("div",It,[r[11]||(r[11]=a("p",{class:"text-sm font-medium"}," Timeline ",-1)),a("div",Lt,[a("div",Vt,[r[8]||(r[8]=a("span",{class:"text-muted-foreground"},"Created",-1)),a("span",null,v(e(N)(e(l).createdAt)),1)]),e(l).completedAt?(m(),C("div",Bt,[r[9]||(r[9]=a("span",{class:"text-muted-foreground"},"Completed",-1)),a("span",null,v(e(N)(e(l).completedAt)),1)])):$("",!0),a("div",Ft,[r[10]||(r[10]=a("span",{class:"text-muted-foreground"},"Last Updated",-1)),a("span",null,v(e(N)(e(l).updatedAt)),1)])])]),a("div",Tt,[e(l).status==="QUEUED"?(m(),f(e(D),{key:0,variant:"destructive",class:"flex-1",disabled:""},{default:s(()=>r[12]||(r[12]=[_(" Remove From Queue ")])),_:1})):e(l).status==="PROCESSING"?(m(),f(e(D),{key:1,variant:"destructive",class:"flex-1",disabled:""},{default:s(()=>r[13]||(r[13]=[_(" Stop Execution ")])),_:1})):(m(),f(e(D),{key:2,variant:"outline",class:"flex-1",disabled:""},{default:s(()=>r[14]||(r[14]=[_(" Re-run ")])),_:1}))])])):$("",!0)]),_:1})]),_:1},8,["open"]))}}),Gt=p.discriminatedUnion("type",[p.object({type:p.literal("STOP"),inputs:p.object({})}),p.object({type:p.literal("MOVE_TO"),inputs:p.object({location:p.string()})}),p.object({type:p.literal("MOVE_FORWARD"),inputs:p.object({})}),p.object({type:p.literal("MOVE_BACKWARD"),inputs:p.object({})}),p.object({type:p.literal("CARGO_OPEN"),inputs:p.object({})}),p.object({type:p.literal("CARGO_CLOSE"),inputs:p.object({})}),p.object({type:p.literal("CARGO_LIFT"),inputs:p.object({})}),p.object({type:p.literal("CARGO_LOWER"),inputs:p.object({})}),p.object({type:p.literal("CARGO_CHECK_QR"),inputs:p.object({qrCode:p.string()})})]),Ut={class:"space-y-4"},zt={class:"flex items-center gap-2"},Ht={class:"flex items-center gap-2"},Kt={class:"flex items-center gap-2"},qt={class:"flex items-center gap-2"},Wt={class:"flex items-center gap-2"},Jt={class:"flex items-center gap-2"},Xt={class:"flex items-center gap-2"},Yt={class:"flex items-center gap-2"},Zt={class:"flex items-center gap-2"},es=y({__name:"CreateCommandForm",setup(c){const{values:n,handleSubmit:o,setFieldValue:i,resetForm:l}=at({validationSchema:ot(Gt),initialValues:{type:"STOP",inputs:{}}}),u=I(()=>n.type);function x(r){i("type",r)}const{mutate:S,isPending:g}=He(),k=o(r=>{S(r,{onSuccess:()=>{T.success("Command created successfully")},onError:d=>{d instanceof Fe?T.error({title:d.errorCode,message:d.message}):T.error("Failed to create command")}})});function O(){l()}return(r,d)=>(m(),f(e(ee),{class:"sticky top-6"},{default:s(()=>[t(e(Y),null,{default:s(()=>[t(e(Z),null,{default:s(()=>d[2]||(d[2]=[_("Create command")])),_:1})]),_:1}),a("form",{onSubmit:d[1]||(d[1]=M((...E)=>e(k)&&e(k)(...E),["prevent"]))},[t(e(te),null,{default:s(()=>[a("div",Ut,[t(e(Q),{name:"type"},{default:s(()=>[t(e(G),null,{default:s(()=>[t(e(U),null,{default:s(()=>d[3]||(d[3]=[_("Command type")])),_:1}),t(e(ve),{disabled:e(g),"model-value":e(u),"onUpdate:modelValue":d[0]||(d[0]=E=>x(E))},{default:s(()=>[t(e(nt),null,{default:s(()=>[t(e(Ce),null,{default:s(()=>[t(e(xe),{placeholder:"Select command type"})]),_:1})]),_:1}),t(e(be),null,{default:s(()=>[t(e(b),{value:"STOP"},{default:s(()=>[a("div",zt,[t(e($e),{class:"w-4 h-4"}),d[4]||(d[4]=a("span",null,"Stop",-1))])]),_:1}),t(e(b),{value:"MOVE_FORWARD"},{default:s(()=>[a("div",Ht,[t(e(ue),{class:"w-4 h-4"}),d[5]||(d[5]=a("span",null,"Move Forward",-1))])]),_:1}),t(e(b),{value:"MOVE_BACKWARD"},{default:s(()=>[a("div",Kt,[t(e(fe),{class:"w-4 h-4"}),d[6]||(d[6]=a("span",null,"Move Backward",-1))])]),_:1}),t(e(b),{value:"MOVE_TO"},{default:s(()=>[a("div",qt,[t(e(ge),{class:"w-4 h-4"}),d[7]||(d[7]=a("span",null,"Move To",-1))])]),_:1}),t(e(b),{value:"CARGO_OPEN"},{default:s(()=>[a("div",Wt,[t(e(R),{class:"w-4 h-4"}),d[8]||(d[8]=a("span",null,"Cargo Open",-1))])]),_:1}),t(e(b),{value:"CARGO_CLOSE"},{default:s(()=>[a("div",Jt,[t(e(R),{class:"w-4 h-4"}),d[9]||(d[9]=a("span",null,"Cargo Close",-1))])]),_:1}),t(e(b),{value:"CARGO_LIFT"},{default:s(()=>[a("div",Xt,[t(e(R),{class:"w-4 h-4"}),d[10]||(d[10]=a("span",null,"Cargo Lift",-1))])]),_:1}),t(e(b),{value:"CARGO_LOWER"},{default:s(()=>[a("div",Yt,[t(e(R),{class:"w-4 h-4"}),d[11]||(d[11]=a("span",null,"Cargo Lower",-1))])]),_:1}),t(e(b),{value:"CARGO_CHECK_QR",disabled:""},{default:s(()=>[a("div",Zt,[t(e(he),{class:"w-4 h-4"}),d[12]||(d[12]=a("span",null,"Cargo Check QR",-1))])]),_:1})]),_:1})]),_:1},8,["disabled","model-value"]),t(e(z))]),_:1})]),_:1}),e(u)==="MOVE_TO"?(m(),f(e(Q),{key:0,name:"inputs.location"},{default:s(({componentField:E})=>[t(e(G),null,{default:s(()=>[t(e(U),null,{default:s(()=>d[13]||(d[13]=[_("Location")])),_:1}),t(e(le),h(E,{placeholder:"Enter location"}),null,16),t(e(z))]),_:2},1024)]),_:1})):e(u)==="CARGO_CHECK_QR"?(m(),f(e(Q),{key:1,name:"inputs.qrCode"},{default:s(({componentField:E})=>[t(e(G),null,{default:s(()=>[t(e(U),null,{default:s(()=>d[14]||(d[14]=[_("QR Code")])),_:1}),t(e(le),h(E,{placeholder:"Enter QR code"}),null,16),t(e(z))]),_:2},1024)]),_:1})):$("",!0)])]),_:1}),t(e(ye),{class:"flex flex-col gap-2"},{default:s(()=>[t(e(D),{type:"submit",class:"w-full",disabled:e(g)},{default:s(()=>[e(g)?(m(),f(e(F),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):$("",!0),d[15]||(d[15]=_(" Add command "))]),_:1},8,["disabled"]),t(e(D),{type:"button",variant:"outline",class:"w-full",disabled:e(g),onClick:O},{default:s(()=>d[16]||(d[16]=[_(" Clear Form ")])),_:1},8,["disabled"])]),_:1})],32)]),_:1}))}}),A=y({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(c){const n=c,o=I(()=>{const{class:l,...u}=n;return u}),i=je(o);return(l,u)=>(m(),f(e(ut),h(e(i),{class:e(P)("relative flex cursor-default select-none items-center rounded-sm gap-2 px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",l.inset&&"pl-8",n.class)}),{default:s(()=>[w(l.$slots,"default")]),_:3},16,["class"]))}}),ke=y({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(c){const n=c,o=I(()=>{const{class:i,...l}=n;return l});return(i,l)=>(m(),f(e(mt),h(o.value,{class:e(P)("-mx-1 my-1 h-px bg-muted",n.class)}),null,16,["class"]))}}),ts={class:"flex items-center justify-between"},ss={class:"flex items-center gap-2 font-medium"},as={class:"flex items-center gap-2 text-sm text-muted-foreground"},ns={key:0,class:"text-sm"},os={key:1,class:"text-sm"},ls=1e3,is=y({__name:"CurrentProcessingCommandCard",emits:["viewDetails"],setup(c,{emit:n}){const o=n,{data:i,refetch:l,isError:u}=Ke({axiosOpts:{doNotShowLoading:!0}}),x=setInterval(l,ls);return re(()=>{clearInterval(x)}),(S,g)=>e(i)&&!e(u)?(m(),f(e(ee),{key:0},{default:s(()=>[t(e(Y),{class:"pb-3"},{default:s(()=>[t(e(Z),{class:"flex items-center justify-between"},{default:s(()=>[g[3]||(g[3]=a("span",null,"Current Command",-1)),t(ae,{status:e(i).status},null,8,["status"])]),_:1})]),_:1}),t(e(te),null,{default:s(()=>[a("div",{class:"p-4 space-y-3 border rounded-lg cursor-pointer bg-muted/50",onClick:g[2]||(g[2]=k=>o("viewDetails",e(i).id))},[a("div",ts,[a("div",ss,[(m(),f(L(e(ne)(e(i).type)),{class:"w-5 h-5"})),a("span",null,v(e(oe)(e(i).type)),1)]),a("div",{class:"flex items-center gap-2",onClick:g[1]||(g[1]=M(()=>{},["stop"]))},[t(se,{source:e(i).source},null,8,["source"]),t(e(me),null,{default:s(()=>[t(e(ce),{"as-child":""},{default:s(()=>[t(e(D),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(we),{class:"w-4 h-4"})]),_:1})]),_:1}),t(e(pe),{align:"end"},{default:s(()=>[t(e(A),{onClick:g[0]||(g[0]=M(k=>o("viewDetails",e(i).id),["stop"]))},{default:s(()=>g[4]||(g[4]=[_(" View Details ")])),_:1}),t(e(ke)),t(e(A),{class:"text-destructive"},{default:s(()=>g[5]||(g[5]=[_(" Cancel Command ")])),_:1})]),_:1})]),_:1})])]),a("div",as,[t(e(J),{class:"w-4 h-4"}),a("span",null,"Started at "+v(e(i).createdAt),1)]),e(i).type==="MOVE_TO"?(m(),C("div",ns,[g[6]||(g[6]=a("span",{class:"font-medium"},"Location: ",-1)),_(" "+v(e(i).inputs.location),1)])):e(i).type==="CARGO_CHECK_QR"?(m(),C("div",os,[g[7]||(g[7]=a("span",{class:"font-medium"},"QR Code: ",-1)),_(" "+v(e(i).inputs.qrCode),1)])):$("",!0)])]),_:1})]),_:1})):$("",!0)}}),rs={class:"flex items-center justify-between"},ds={class:"flex items-center gap-2 font-medium"},us={class:"flex items-center gap-2 text-sm text-muted-foreground"},ms={key:0,class:"text-sm"},cs={key:1,class:"text-sm"},ps=y({__name:"QueuedCommandItem",props:{command:{}},emits:["viewDetails"],setup(c,{emit:n}){const o=c,i=n;return(l,u)=>(m(),C("div",{class:"p-4 space-y-3 transition-colors border rounded-lg cursor-pointer bg-muted/30 border-border/50 hover:border-border",onClick:u[3]||(u[3]=x=>i("viewDetails",o.command.id))},[a("div",rs,[a("div",ds,[(m(),f(L(e(ne)(o.command.type)),{class:"w-5 h-5"})),a("span",null,v(e(oe)(o.command.type)),1)]),a("div",{class:"flex items-center gap-2",onClick:u[2]||(u[2]=M(()=>{},["stop"]))},[t(ae,{status:o.command.status},null,8,["status"]),t(se,{source:o.command.source},null,8,["source"]),t(e(me),null,{default:s(()=>[t(e(ce),{"as-child":""},{default:s(()=>[t(e(D),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(we),{"class-name":"h-4 w-4"})]),_:1})]),_:1}),t(e(pe),{align:"end",onClick:u[1]||(u[1]=M(()=>{},["stop"]))},{default:s(()=>[t(e(A),{onClick:u[0]||(u[0]=x=>i("viewDetails",o.command.id))},{default:s(()=>u[4]||(u[4]=[_(" View Details ")])),_:1}),t(e(A),null,{default:s(()=>u[5]||(u[5]=[_("Edit Command")])),_:1}),t(e(ke)),t(e(A),{class:"text-destructive",disabled:""},{default:s(()=>u[6]||(u[6]=[_(" Remove from Queue ")])),_:1})]),_:1})]),_:1})])]),a("div",us,[t(e(J),{class:"w-4 h-4"}),a("span",null,"Created "+v(e(Ct)(o.command.createdAt)),1)]),o.command.type==="MOVE_TO"?(m(),C("div",ms,[u[7]||(u[7]=a("span",{class:"font-medium"},"Location: ",-1)),_(" "+v(l.command.inputs.location),1)])):o.command.type==="CARGO_CHECK_QR"?(m(),C("div",cs,[u[8]||(u[8]=a("span",{class:"font-medium"},"QR Code: ",-1)),_(" "+v(l.command.inputs.qrCode),1)])):$("",!0)]))}}),fs={key:1,class:"py-6 text-center text-muted-foreground"},_s={class:"flex items-center gap-1 text-sm text-muted-foreground"},gs=2e3,ys=y({__name:"WaitingCommandList",emits:["viewDetails"],setup(c,{emit:n}){const o=n,i=V(1),l=V(5),{data:u,refetch:x}=qe(i,l,{axiosOpts:{doNotShowLoading:!0}});function S(){i.value=1}function g(O){i.value=O}const k=setInterval(x,gs);return re(()=>{clearInterval(k)}),(O,r)=>e(u)?(m(),f(e(ee),{key:0},{default:s(()=>[t(e(Y),{class:"pb-3"},{default:s(()=>[t(e(Z),{class:"flex items-center justify-between"},{default:s(()=>[r[1]||(r[1]=a("span",null,"Waiting Commands",-1)),t(e(X),{variant:"outline"},{default:s(()=>[_(v(e(u).totalItems)+" commands ",1)]),_:1})]),_:1})]),_:1}),t(e(te),{class:"space-y-3"},{default:s(()=>[e(u).totalItems>0?(m(!0),C(Ne,{key:0},Te(e(u).items,d=>(m(),f(ps,{key:d.id,command:d,onViewDetails:E=>o("viewDetails",d.id)},null,8,["command","onViewDetails"]))),128)):(m(),C("div",fs," No commands in queue "))]),_:1}),t(e(ye),{class:"flex items-center justify-between pt-4 border-t"},{default:s(()=>[a("div",_s,[r[5]||(r[5]=a("span",{class:"text-sm sr-only sm:not-sr-only"}," Items per page: ",-1)),t(e(ve),{modelValue:e(l),"onUpdate:modelValue":[r[0]||(r[0]=d=>de(l)?l.value=d:null),S]},{default:s(()=>[t(e(Ce),{class:"w-16 h-8 ml-2"},{default:s(()=>[t(e(xe),{placeholder:"5"})]),_:1}),t(e(be),null,{default:s(()=>[t(e(b),{value:"5"},{default:s(()=>r[2]||(r[2]=[_(" 5 ")])),_:1}),t(e(b),{value:"10"},{default:s(()=>r[3]||(r[3]=[_(" 10 ")])),_:1}),t(e(b),{value:"20"},{default:s(()=>r[4]||(r[4]=[_(" 20 ")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e(We),{"sibling-count":1,"items-per-page":e(l),total:e(u).totalItems,"default-page":e(i),"onUpdate:page":g},{default:s(()=>[t(e(Je),{class:"flex items-center gap-1"},{default:s(()=>[t(e(Xe)),t(e(Ye)),t(e(Ze)),t(e(et))]),_:1})]),_:1},8,["items-per-page","total","default-page"])]),_:1})]),_:1})):$("",!0)}}),vs={class:"flex items-center justify-between"},Cs={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},xs={class:"space-y-6 md:col-span-2"},Is=y({__name:"CommandQueueView",setup(c){const n=V(!1),o=V(null);function i(l){o.value=l,n.value=!0}return(l,u)=>(m(),f(lt,null,{default:s(()=>[a("div",vs,[u[2]||(u[2]=a("div",null,[a("h1",{class:"text-xl font-semibold tracking-tight"}," Robot command queue "),a("p",{class:"text-sm text-muted-foreground"}," Manage and monitor robot commands in real-time ")],-1)),t(e(yt),null,{default:s(()=>[t(e(De),null,{default:s(()=>[t(e(Se),{"as-child":""},{default:s(()=>[t(e(D),{variant:"outline",size:"icon"},{default:s(()=>[t(e(F),{class:"w-4 h-4 animate-spin"})]),_:1})]),_:1}),t(e(Ae),null,{default:s(()=>u[1]||(u[1]=[a("p",null,"Refreshing in real-time",-1)])),_:1})]),_:1})]),_:1})]),a("div",Cs,[a("div",xs,[t(is,{onViewDetails:i}),t(ys,{onViewDetails:i})]),a("div",null,[t(es)])]),e(o)?(m(),f(Qt,{key:0,"is-open":e(n),"onUpdate:isOpen":u[0]||(u[0]=x=>de(n)?n.value=x:null),"command-id":e(o)},null,8,["is-open","command-id"])):$("",!0)]),_:1}))}});export{Is as default};
