import{_ as D}from"./index-DZ_kXgiO.js";import{u as K,g as Ae,h as Ee}from"./index-DoCmQrl8.js";import{u as Oe,a as me,b as ue,_ as Re,c as ke,d as Se,L as H,g as z,e as J,f as X,h as Y,i as De,C as Le,A as je,Q as Me,S as Ne,j as Z,k as Ie,l as ce,m as pe,E as fe,n as _e,o as I,t as Ve,p as Pe,q as Te,r as Fe,s as Be,v as Qe,w as Ge,x as We}from"./PaginationPrev.vuevuetypescriptsetuptruelang-0TeDpeH9.js";import{f as he,a as N,A as qe,M as Ue,P as F,_ as Ke}from"./date-Rm15EkDg.js";import{d as k,c as C,o as i,w as a,r as ee,m as V,u as e,n as te,g as se,J as He,K as ze,L as Je,M as Xe,E as de,b as t,f as y,y as E,i as c,e as s,k as ae,t as g,R as P,A as v,a as Ce,N as T,F as ge,O as ve,p as Q,v as Ye,C as ye}from"./index-D3oVL9HO.js";import{_ as ne,a as oe}from"./CardContent.vuevuetypescriptsetuptruelang-D6rIamAA.js";import{_ as xe}from"./CardFooter.vuevuetypescriptsetuptruelang-B5-zS2V-.js";import{_ as le,a as ie,b as Ze,A as et}from"./CardTitle.vuevuetypescriptsetuptruelang-BUPwz7Yv.js";import{z as l,u as tt,F as L,_ as j,a as M,b as re,c as B,d as G,t as st}from"./vee-validate-zod-CVQdd5tQ.js";/* empty css                                                              */import{_ as W,a as h,b as q,c as U,d as w}from"./SelectValue.vuevuetypescriptsetuptruelang-D9ED9h_Q.js";import{P as at,a as nt}from"./http-CGFVBm3n.js";import{b as ot}from"./PopperContent-DIHMYRS_.js";import{L as lt,_ as it}from"./PageContainer.vuevuetypescriptsetuptruelang-B1X3ySXM.js";import{c as dt,_ as rt,a as mt,b as ut}from"./TooltipTrigger.vuevuetypescriptsetuptruelang-CtxKli9X.js";const ct=k({__name:"MenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(x){const p=x;return(r,_)=>(i(),C(e(at),V(p,{role:"separator","aria-orientation":"horizontal"}),{default:a(()=>[ee(r.$slots,"default")]),_:3},16))}}),pt=k({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(x){const p=x;return ot(),(r,_)=>(i(),C(e(ct),te(se(p)),{default:a(()=>[ee(r.$slots,"default")]),_:3},16))}}),ft=k({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(x){const p=x;return(r,_)=>(i(),C(e(dt),te(se(p)),{default:a(()=>[ee(r.$slots,"default")]),_:3},16))}}),_t={key:0},Ct={class:"flex items-center justify-center py-8"},gt={key:1},vt={key:2,class:"mt-6 space-y-6"},yt={class:"flex items-center justify-between"},xt={class:"flex items-center gap-2"},bt={class:"text-sm font-medium"},wt={class:"grid grid-cols-2 gap-4"},$t={class:"font-medium"},At={class:"flex flex-col items-start gap-2"},Et={key:0},Ot={class:"font-medium"},Rt={class:"space-y-2"},kt={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},St={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},Dt={key:0,class:"space-y-2"},Lt={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},jt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},Mt={key:1,class:"space-y-2"},Nt={class:"p-3 text-red-500 rounded-md bg-red-500/10"},It={class:"space-y-2"},Vt={class:"space-y-3"},Pt={class:"flex justify-between text-sm"},Tt={key:0,class:"flex justify-between text-sm"},Ft={key:1,class:"flex justify-between text-sm"},Bt={class:"flex justify-between text-sm"},Qt={class:"flex gap-2 pt-4"},Gt=1e3,Wt=k({__name:"CommandDetailSheet",props:He({commandId:{}},{isOpen:{type:Boolean,required:!0},isOpenModifiers:{}}),emits:["update:isOpen"],setup(x){const p=x,r=ze(x,"isOpen"),_=Je(p,"commandId"),{data:o,isPending:f,isError:O,refetch:$}=Oe(_,{axiosOpts:{doNotShowLoading:!0}}),{mutate:m}=me(),{mutate:R}=ue(),{openConfirmation:S}=K(),{pause:u,resume:n}=Xe(()=>{$()},Gt,{immediate:!1});de(o,A=>{A&&["SUCCEEDED","FAILED","CANCELED"].includes(A.status)?u():n()},{immediate:!0}),de(r,A=>{A?n():u()},{immediate:!0});function b(){S({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{m(p.commandId,{onSuccess:()=>{v.success("Command removed from queue")},onError:A=>{A instanceof P?A.errorCode==="command.inProcessingCanNotBeDeleted"?v.error("Command is being processed and cannot be deleted"):v.error(A.message):v.error(A.message)}})},onCancel:()=>{}})}function we(){S({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{R(void 0,{onSuccess:()=>{v.success("Command cancelled successfully")},onError:A=>{A instanceof P?A.errorCode==="command.noCommandBeingProcessed"?v.error("No command is being processed"):v.error(A.message):v.error(A.message)}})},onCancel:()=>{}})}return(A,d)=>(i(),C(e(Ae),{open:r.value,"onUpdate:open":d[0]||(d[0]=$e=>r.value=$e)},{default:a(()=>[t(e(Ee),{class:"max-h-screen overflow-y-auto sm:max-w-xl"},{default:a(()=>[t(e(Re),null,{default:a(()=>[t(e(ke),null,{default:a(()=>d[1]||(d[1]=[c(" Command detail ")])),_:1}),t(e(Se),null,{default:a(()=>d[2]||(d[2]=[c(" Real-time information about the selected command ")])),_:1})]),_:1}),e(f)?(i(),y("div",_t,[s("div",Ct,[t(e(H),{class:"w-8 h-8 animate-spin"})])])):e(O)?(i(),y("div",gt,d[3]||(d[3]=[s("div",{class:"flex items-center justify-center py-8"},[s("p",{class:"text-sm text-muted-foreground"}," Failed to load command details ")],-1)]))):e(o)?(i(),y("div",vt,[s("div",yt,[s("div",xt,[(i(),C(ae(e(z)(e(o).type)))),s("span",bt,g(e(J)(e(o).type)),1)]),t(X,{status:e(o).status},null,8,["status"])]),s("div",wt,[s("div",null,[d[4]||(d[4]=s("p",{class:"text-sm text-muted-foreground"}," ID ",-1)),s("p",$t,g(e(o).id),1)]),s("div",At,[d[5]||(d[5]=s("p",{class:"text-sm text-muted-foreground"}," Source ",-1)),t(Y,{source:e(o).source},null,8,["source"])]),e(o).completedAt&&e(o).startedAt?(i(),y("div",Et,[d[6]||(d[6]=s("p",{class:"text-sm text-muted-foreground"}," Duration ",-1)),s("p",Ot,g(e(he)((new Date(e(o).completedAt).getTime()-new Date(e(o).startedAt).getTime())/1e3)),1)])):E("",!0)]),s("div",Rt,[d[7]||(d[7]=s("p",{class:"text-sm font-medium"}," Command Inputs ",-1)),s("div",kt,[s("span",St,g(JSON.stringify(e(o).inputs,null,4)),1)])]),e(o).status!=="PROCESSING"&&e(o).status!=="QUEUED"?(i(),y("div",Dt,[d[8]||(d[8]=s("p",{class:"text-sm font-medium"}," Command Outputs ",-1)),s("div",Lt,[s("span",jt,g(JSON.stringify(e(o).outputs,null,4)),1)])])):E("",!0),e(o).error?(i(),y("div",Mt,[d[9]||(d[9]=s("p",{class:"text-sm font-medium text-red-500"}," Error ",-1)),s("div",Nt,g(e(o).error),1)])):E("",!0),s("div",It,[d[14]||(d[14]=s("p",{class:"text-sm font-medium"}," Timeline ",-1)),s("div",Vt,[s("div",Pt,[d[10]||(d[10]=s("span",{class:"text-muted-foreground"},"Created",-1)),s("span",null,g(e(N)(e(o).createdAt)),1)]),e(o).startedAt?(i(),y("div",Tt,[d[11]||(d[11]=s("span",{class:"text-muted-foreground"},"Started",-1)),s("span",null,g(e(N)(e(o).startedAt)),1)])):E("",!0),e(o).completedAt?(i(),y("div",Ft,[d[12]||(d[12]=s("span",{class:"text-muted-foreground"},"Completed",-1)),s("span",null,g(e(N)(e(o).completedAt)),1)])):E("",!0),s("div",Bt,[d[13]||(d[13]=s("span",{class:"text-muted-foreground"},"Last Updated",-1)),s("span",null,g(e(N)(e(o).updatedAt)),1)])])]),s("div",Qt,[e(o).status==="QUEUED"?(i(),C(e(D),{key:0,variant:"destructive",class:"flex-1",onClick:b},{default:a(()=>d[15]||(d[15]=[c(" Remove from queue ")])),_:1})):e(o).status==="PROCESSING"?(i(),C(e(D),{key:1,variant:"destructive",class:"flex-1",onClick:we},{default:a(()=>d[16]||(d[16]=[c(" Stop execution ")])),_:1})):(i(),C(e(D),{key:2,variant:"outline",class:"flex-1",disabled:""},{default:a(()=>d[17]||(d[17]=[c(" Re-run ")])),_:1}))])])):E("",!0)]),_:1})]),_:1},8,["open"]))}}),ht=l.discriminatedUnion("type",[l.object({type:l.literal("STOP_MOVEMENT"),inputs:l.object({})}),l.object({type:l.literal("MOVE_TO"),inputs:l.object({location:l.string(),direction:l.union([l.literal("FORWARD"),l.literal("BACKWARD")])})}),l.object({type:l.literal("MOVE_FORWARD"),inputs:l.object({})}),l.object({type:l.literal("MOVE_BACKWARD"),inputs:l.object({})}),l.object({type:l.literal("CARGO_OPEN"),inputs:l.object({})}),l.object({type:l.literal("CARGO_CLOSE"),inputs:l.object({})}),l.object({type:l.literal("CARGO_LIFT"),inputs:l.object({})}),l.object({type:l.literal("CARGO_LOWER"),inputs:l.object({})}),l.object({type:l.literal("CARGO_CHECK_QR"),inputs:l.object({qrCode:l.string()})}),l.object({type:l.literal("SCAN_LOCATION"),inputs:l.object({})}),l.object({type:l.literal("WAIT"),inputs:l.object({durationMs:l.number()})})]),qt={class:"space-y-4"},Ut={class:"flex items-center gap-2"},Kt={class:"flex items-center gap-2"},Ht={class:"flex items-center gap-2"},zt={class:"flex items-center gap-2"},Jt={class:"flex items-center gap-2"},Xt={class:"flex items-center gap-2"},Yt={class:"flex items-center gap-2"},Zt={class:"flex items-center gap-2"},es={class:"flex items-center gap-2"},ts={class:"flex items-center gap-2"},ss={class:"flex items-center gap-2"},as={class:"flex items-center gap-2"},ns={class:"flex items-center gap-2"},os=k({__name:"CreateCommandForm",setup(x){const{values:p,handleSubmit:r,setFieldValue:_,resetForm:o}=tt({validationSchema:st(ht),initialValues:{type:"STOP_MOVEMENT",inputs:{}}}),f=Ce(()=>p.type);function O(u){_("type",u)}const{mutate:$,isPending:m}=De(),R=r(u=>{$(u,{onSuccess:()=>{v.success("Command created successfully")},onError:n=>{n instanceof P?v.error({title:n.errorCode,message:n.message}):v.error("Failed to create command")}})});function S(){o()}return(u,n)=>(i(),C(e(ne),{class:"sticky top-6"},{default:a(()=>[t(e(le),null,{default:a(()=>[t(e(ie),null,{default:a(()=>n[2]||(n[2]=[c("Create command")])),_:1})]),_:1}),s("form",{onSubmit:n[1]||(n[1]=T((...b)=>e(R)&&e(R)(...b),["prevent"]))},[t(e(oe),null,{default:a(()=>[s("div",qt,[t(e(L),{name:"type"},{default:a(()=>[t(e(j),null,{default:a(()=>[t(e(M),null,{default:a(()=>n[3]||(n[3]=[c("Command type")])),_:1}),t(e(W),{disabled:e(m),"model-value":e(f),"onUpdate:modelValue":n[0]||(n[0]=b=>O(b))},{default:a(()=>[t(e(re),null,{default:a(()=>[t(e(h),null,{default:a(()=>[t(e(q),{placeholder:"Select command type"})]),_:1})]),_:1}),t(e(U),null,{default:a(()=>[t(e(w),{value:"STOP_MOVEMENT"},{default:a(()=>[s("div",Ut,[t(e(Le),{class:"w-4 h-4"}),n[4]||(n[4]=s("span",null,"Stop Movement",-1))])]),_:1}),t(e(w),{value:"MOVE_FORWARD"},{default:a(()=>[s("div",Kt,[t(e(je),{class:"w-4 h-4"}),n[5]||(n[5]=s("span",null,"Move Forward",-1))])]),_:1}),t(e(w),{value:"MOVE_BACKWARD"},{default:a(()=>[s("div",Ht,[t(e(qe),{class:"w-4 h-4"}),n[6]||(n[6]=s("span",null,"Move Backward",-1))])]),_:1}),t(e(w),{value:"MOVE_TO"},{default:a(()=>[s("div",zt,[t(e(Ue),{class:"w-4 h-4"}),n[7]||(n[7]=s("span",null,"Move To",-1))])]),_:1}),t(e(w),{value:"CARGO_OPEN"},{default:a(()=>[s("div",Jt,[t(e(F),{class:"w-4 h-4"}),n[8]||(n[8]=s("span",null,"Cargo Open",-1))])]),_:1}),t(e(w),{value:"CARGO_CLOSE"},{default:a(()=>[s("div",Xt,[t(e(F),{class:"w-4 h-4"}),n[9]||(n[9]=s("span",null,"Cargo Close",-1))])]),_:1}),t(e(w),{value:"CARGO_LIFT"},{default:a(()=>[s("div",Yt,[t(e(F),{class:"w-4 h-4"}),n[10]||(n[10]=s("span",null,"Cargo Lift",-1))])]),_:1}),t(e(w),{value:"CARGO_LOWER"},{default:a(()=>[s("div",Zt,[t(e(F),{class:"w-4 h-4"}),n[11]||(n[11]=s("span",null,"Cargo Lower",-1))])]),_:1}),t(e(w),{value:"CARGO_CHECK_QR"},{default:a(()=>[s("div",es,[t(e(Me),{class:"w-4 h-4"}),n[12]||(n[12]=s("span",null,"Cargo Check QR",-1))])]),_:1}),t(e(w),{value:"SCAN_LOCATION"},{default:a(()=>[s("div",ts,[t(e(Ne),{class:"w-4 h-4"}),n[13]||(n[13]=s("span",null,"Scan Location",-1))])]),_:1}),t(e(w),{value:"WAIT"},{default:a(()=>[s("div",ss,[t(e(Z),{class:"w-4 h-4"}),n[14]||(n[14]=s("span",null,"Wait",-1))])]),_:1})]),_:1})]),_:1},8,["disabled","model-value"]),t(e(B))]),_:1})]),_:1}),e(f)==="MOVE_TO"?(i(),y(ge,{key:0},[t(e(L),{name:"inputs.location"},{default:a(({componentField:b})=>[t(e(j),null,{default:a(()=>[t(e(M),null,{default:a(()=>n[15]||(n[15]=[c("Location")])),_:1}),t(e(G),V(b,{placeholder:"Enter location"}),null,16),t(e(B))]),_:2},1024)]),_:1}),t(e(L),{name:"inputs.direction"},{default:a(({componentField:b})=>[t(e(j),null,{default:a(()=>[t(e(M),null,{default:a(()=>n[16]||(n[16]=[c("Move direction")])),_:1}),t(e(W),te(se(b)),{default:a(()=>[t(e(re),null,{default:a(()=>[t(e(h),null,{default:a(()=>[t(e(q),{placeholder:"Select direction"})]),_:1})]),_:1}),t(e(U),null,{default:a(()=>[t(e(w),{value:"FORWARD"},{default:a(()=>[s("div",as,[t(e(Ze),{class:"w-4 h-4"}),n[17]||(n[17]=s("span",null,"Forward",-1))])]),_:1}),t(e(w),{value:"BACKWARD"},{default:a(()=>[s("div",ns,[t(e(et),{class:"w-4 h-4"}),n[18]||(n[18]=s("span",null,"Backward",-1))])]),_:1})]),_:1})]),_:2},1040)]),_:2},1024)]),_:1})],64)):e(f)==="CARGO_CHECK_QR"?(i(),C(e(L),{key:1,name:"inputs.qrCode"},{default:a(({componentField:b})=>[t(e(j),null,{default:a(()=>[t(e(M),null,{default:a(()=>n[19]||(n[19]=[c("QR Code")])),_:1}),t(e(G),V(b,{placeholder:"Enter QR code"}),null,16),t(e(B))]),_:2},1024)]),_:1})):e(f)==="WAIT"?(i(),C(e(L),{key:2,name:"inputs.durationMs"},{default:a(({componentField:b})=>[t(e(j),null,{default:a(()=>[t(e(M),null,{default:a(()=>n[20]||(n[20]=[c("Duration (ms)")])),_:1}),t(e(G),V(b,{type:"number",placeholder:"Enter duration"}),null,16),t(e(B))]),_:2},1024)]),_:1})):E("",!0)])]),_:1}),t(e(xe),{class:"flex flex-col gap-2"},{default:a(()=>[t(e(D),{type:"submit",class:"w-full",disabled:e(m)},{default:a(()=>[e(m)?(i(),C(e(H),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):E("",!0),n[21]||(n[21]=c(" Add command "))]),_:1},8,["disabled"]),t(e(D),{type:"button",variant:"outline",class:"w-full",disabled:e(m),onClick:S},{default:a(()=>n[22]||(n[22]=[c(" Clear form ")])),_:1},8,["disabled"])]),_:1})],32)]),_:1}))}}),be=k({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(x){const p=x,r=Ce(()=>{const{class:_,...o}=p;return o});return(_,o)=>(i(),C(e(pt),V(r.value,{class:e(nt)("-mx-1 my-1 h-px bg-muted",p.class)}),null,16,["class"]))}}),ls={key:0},is={class:"flex items-center justify-center gap-2 p-9"},ds={class:"flex items-center justify-between"},rs={class:"flex items-center gap-2 font-medium"},ms={class:"flex items-center gap-2 text-sm text-muted-foreground"},us={key:0,class:"text-sm"},cs={key:1,class:"text-sm"},ps=1e3,fs=k({__name:"CurrentProcessingCommandCard",emits:["viewDetails"],setup(x,{emit:p}){const r=p,{openConfirmation:_}=K(),{data:o,refetch:f,isError:O}=Ie({axiosOpts:{doNotShowLoading:!0}}),{mutate:$,isPending:m}=ue(),R=setInterval(f,ps);ve(()=>{clearInterval(R)});function S(){_({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{$(void 0,{onSuccess:()=>{v.success("Command cancelled successfully")},onError:u=>{u instanceof P?u.errorCode==="command.noCommandBeingProcessed"?v.error("No command is being processed"):v.error(u.message):v.error(u.message)}})},onCancel:()=>{}})}return(u,n)=>e(o)&&!e(O)?(i(),C(e(ne),{key:0},{default:a(()=>[t(e(le),{class:"pb-3"},{default:a(()=>[t(e(ie),{class:"flex items-center justify-between"},{default:a(()=>[n[3]||(n[3]=s("span",null,"Current Command",-1)),t(X,{status:e(o).status},null,8,["status"])]),_:1})]),_:1}),t(e(oe),null,{default:a(()=>[e(m)?(i(),y("div",ls,[s("div",is,[t(e(lt),{class:"w-4 h-4 animate-spin"}),n[4]||(n[4]=s("span",null,"Cancelling command...",-1))])])):(i(),y("div",{key:1,class:"p-4 space-y-3 border rounded-lg cursor-pointer bg-muted/50",onClick:n[2]||(n[2]=b=>r("viewDetails",e(o).id))},[s("div",ds,[s("div",rs,[(i(),C(ae(e(z)(e(o).type)),{class:"w-5 h-5"})),s("span",null,g(e(J)(e(o).type)),1)]),s("div",{class:"flex items-center gap-2",onClick:n[1]||(n[1]=T(()=>{},["stop"]))},[t(Y,{source:e(o).source},null,8,["source"]),t(e(ce),null,{default:a(()=>[t(e(pe),{"as-child":""},{default:a(()=>[t(e(D),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:a(()=>[t(e(fe),{class:"w-4 h-4"})]),_:1})]),_:1}),t(e(_e),{align:"end"},{default:a(()=>[t(e(I),{class:"cursor-pointer",onClick:n[0]||(n[0]=T(b=>r("viewDetails",e(o).id),["stop"]))},{default:a(()=>n[5]||(n[5]=[c(" View details ")])),_:1}),t(e(be)),t(e(I),{class:"text-red-500 cursor-pointer",onClick:S},{default:a(()=>n[6]||(n[6]=[c(" Cancel command ")])),_:1})]),_:1})]),_:1})])]),s("div",ms,[t(e(Z),{class:"w-4 h-4"}),s("span",null,"Started at: "+g(e(o).startedAt?e(N)(e(o).startedAt):"N/A"),1)]),e(o).type==="MOVE_TO"?(i(),y("div",us,[n[7]||(n[7]=s("span",{class:"font-medium"},"Location: ",-1)),c(" "+g(e(o).inputs.location),1)])):e(o).type==="CARGO_CHECK_QR"?(i(),y("div",cs,[n[8]||(n[8]=s("span",{class:"font-medium"},"QR Code: ",-1)),c(" "+g(e(o).inputs.qrCode),1)])):E("",!0)]))]),_:1})]),_:1})):E("",!0)}}),_s={class:"flex items-center justify-between"},Cs={class:"flex items-center gap-2 font-medium"},gs={class:"flex items-center gap-2 text-sm text-muted-foreground"},vs={key:0,class:"text-sm"},ys={key:1,class:"text-sm"},xs=k({__name:"QueuedCommandItem",props:{command:{}},emits:["viewDetails"],setup(x,{emit:p}){const r=x,_=p,{openConfirmation:o}=K(),{mutate:f}=me();function O(){o({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{f(r.command.id,{onSuccess:()=>{v.success("Command removed from queue")},onError:$=>{$ instanceof P?$.errorCode==="command.inProcessingCanNotBeDeleted"?v.error("Command is being processed and cannot be deleted"):v.error($.message):v.error($.message)}})},onCancel:()=>{}})}return($,m)=>(i(),y("div",{class:"p-4 space-y-3 transition-colors border rounded-lg cursor-pointer bg-muted/30 border-border/50 hover:border-border",onClick:m[3]||(m[3]=R=>_("viewDetails",r.command.id))},[s("div",_s,[s("div",Cs,[(i(),C(ae(e(z)(r.command.type)),{class:"w-5 h-5"})),s("span",null,g(e(J)(r.command.type)),1)]),s("div",{class:"flex items-center gap-2",onClick:m[2]||(m[2]=T(()=>{},["stop"]))},[t(X,{status:r.command.status},null,8,["status"]),t(Y,{source:r.command.source},null,8,["source"]),t(e(ce),null,{default:a(()=>[t(e(pe),{"as-child":""},{default:a(()=>[t(e(D),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:a(()=>[t(e(fe),{"class-name":"h-4 w-4"})]),_:1})]),_:1}),t(e(_e),{align:"end",onClick:m[1]||(m[1]=T(()=>{},["stop"]))},{default:a(()=>[t(e(I),{onClick:m[0]||(m[0]=R=>_("viewDetails",r.command.id))},{default:a(()=>m[4]||(m[4]=[c(" View details ")])),_:1}),t(e(I),null,{default:a(()=>m[5]||(m[5]=[c("Edit command")])),_:1}),t(e(be)),t(e(I),{class:"text-red-500",onClick:O},{default:a(()=>m[6]||(m[6]=[c(" Remove from queue ")])),_:1})]),_:1})]),_:1})])]),s("div",gs,[t(e(Z),{class:"w-4 h-4"}),s("span",null,"Created "+g(e(Ve)(r.command.createdAt)),1)]),r.command.type==="MOVE_TO"?(i(),y("div",vs,[m[7]||(m[7]=s("span",{class:"font-medium"},"Location: ",-1)),c(" "+g($.command.inputs.location),1)])):r.command.type==="CARGO_CHECK_QR"?(i(),y("div",ys,[m[8]||(m[8]=s("span",{class:"font-medium"},"QR Code: ",-1)),c(" "+g($.command.inputs.qrCode),1)])):E("",!0)]))}}),bs={key:1,class:"py-6 text-center text-muted-foreground"},ws={class:"flex items-center gap-1 text-sm text-muted-foreground"},$s=2e3,As=k({__name:"WaitingCommandList",emits:["viewDetails"],setup(x,{emit:p}){const r=p,_=Q(1),o=Q(5),{data:f,refetch:O}=Pe(_,o,{axiosOpts:{doNotShowLoading:!0}});function $(){_.value=1}function m(S){_.value=S}const R=setInterval(O,$s);return ve(()=>{clearInterval(R)}),(S,u)=>e(f)?(i(),C(e(ne),{key:0},{default:a(()=>[t(e(le),{class:"pb-3"},{default:a(()=>[t(e(ie),{class:"flex items-center justify-between"},{default:a(()=>[u[1]||(u[1]=s("span",null,"Waiting Commands",-1)),t(e(Ke),{variant:"outline"},{default:a(()=>[c(g(e(f).totalItems)+" commands ",1)]),_:1})]),_:1})]),_:1}),t(e(oe),{class:"space-y-3"},{default:a(()=>[e(f).totalItems>0?(i(!0),y(ge,{key:0},Ye(e(f).items,n=>(i(),C(xs,{key:n.id,command:n,onViewDetails:b=>r("viewDetails",n.id)},null,8,["command","onViewDetails"]))),128)):(i(),y("div",bs," No commands in queue "))]),_:1}),t(e(xe),{class:"flex items-center justify-between pt-4 border-t"},{default:a(()=>[s("div",ws,[u[5]||(u[5]=s("span",{class:"text-sm sr-only sm:not-sr-only"}," Items per page: ",-1)),t(e(W),{modelValue:e(o),"onUpdate:modelValue":[u[0]||(u[0]=n=>ye(o)?o.value=n:null),$]},{default:a(()=>[t(e(h),{class:"w-16 h-8 ml-2"},{default:a(()=>[t(e(q),{placeholder:"5"})]),_:1}),t(e(U),null,{default:a(()=>[t(e(w),{value:"5"},{default:a(()=>u[2]||(u[2]=[c(" 5 ")])),_:1}),t(e(w),{value:"10"},{default:a(()=>u[3]||(u[3]=[c(" 10 ")])),_:1}),t(e(w),{value:"20"},{default:a(()=>u[4]||(u[4]=[c(" 20 ")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(e(Te),{"sibling-count":1,"items-per-page":e(o),total:e(f).totalItems,"default-page":e(_),"onUpdate:page":m},{default:a(()=>[t(e(Fe),{class:"flex items-center gap-1"},{default:a(()=>[t(e(Be)),t(e(Qe)),t(e(Ge)),t(e(We))]),_:1})]),_:1},8,["items-per-page","total","default-page"])]),_:1})]),_:1})):E("",!0)}}),Es={class:"flex items-center justify-between"},Os={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},Rs={class:"space-y-6 md:col-span-2"},Ws=k({__name:"CommandQueueView",setup(x){const p=Q(!1),r=Q(null);function _(o){r.value=o,p.value=!0}return(o,f)=>(i(),C(it,null,{default:a(()=>[s("div",Es,[f[2]||(f[2]=s("div",null,[s("h1",{class:"text-xl font-semibold tracking-tight"}," Robot command queue "),s("p",{class:"text-sm text-muted-foreground"}," Manage and monitor robot commands in real-time ")],-1)),t(e(ft),null,{default:a(()=>[t(e(rt),null,{default:a(()=>[t(e(mt),{"as-child":""},{default:a(()=>[t(e(D),{variant:"outline",size:"icon"},{default:a(()=>[t(e(H),{class:"w-4 h-4 animate-spin"})]),_:1})]),_:1}),t(e(ut),null,{default:a(()=>f[1]||(f[1]=[s("p",null,"Refreshing in real-time",-1)])),_:1})]),_:1})]),_:1})]),s("div",Os,[s("div",Rs,[t(fs,{onViewDetails:_}),t(As,{onViewDetails:_})]),s("div",null,[t(os)])]),e(r)?(i(),C(Wt,{key:0,"is-open":e(p),"onUpdate:isOpen":f[0]||(f[0]=O=>ye(p)?p.value=O:null),"command-id":e(r)},null,8,["is-open","command-id"])):E("",!0)]),_:1}))}});export{Ws as default};
