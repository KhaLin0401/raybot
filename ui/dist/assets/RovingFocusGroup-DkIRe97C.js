import{d as y,t as O,f as P,a as v,h as x,o as B,i as w,l as U,j as c,b as D}from"./index-Qb-K-lGR.js";import{j as I,c as N}from"./PopperContent-DGGPpA43.js";import{e as L,h as M}from"./SelectValue.vuevuetypescriptsetuptruelang-Cvg3gVg_.js";import{P as G}from"./createLucideIcon--oNMgtbN.js";const V="rovingFocusGroup.onEntryFocus",j={bubbles:!1,cancelable:!0},k={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function K(t,o){return o!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Q(t,o,n){const e=K(t.key,n);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(e))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(e)))return k[e]}function Y(t,o=!1){const n=I();for(const e of t)if(e===n||(e.focus({preventScroll:o}),I()!==n))return}function W(t,o){return t.map((n,e)=>t[(o+e)%t.length])}const[X,$]=N("RovingFocusGroup"),Z=y({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(t,{expose:o,emit:n}){const e=t,m=n,{loop:T,orientation:b,dir:A}=O(e),g=L(A),d=P(e,"currentTabStopId",m,{defaultValue:e.defaultCurrentTabStopId,passive:e.currentTabStopId===void 0}),i=v(!1),l=v(!1),f=v(0),{getItems:F,CollectionSlot:E}=M({isProvider:!0});function C(r){const a=!l.value;if(r.currentTarget&&r.target===r.currentTarget&&a&&!i.value){const u=new CustomEvent(V,j);if(r.currentTarget.dispatchEvent(u),m("entryFocus",u),!u.defaultPrevented){const p=F().map(s=>s.ref).filter(s=>s.dataset.disabled!==""),h=p.find(s=>s.getAttribute("data-active")===""),R=p.find(s=>s.id===d.value),_=[h,R,...p].filter(Boolean);Y(_,e.preventScrollOnEntryFocus)}}l.value=!1}function S(){setTimeout(()=>{l.value=!1},1)}return o({getItems:F}),$({loop:T,dir:g,orientation:b,currentTabStopId:d,onItemFocus:r=>{d.value=r},onItemShiftTab:()=>{i.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(r,a)=>(B(),x(c(E),null,{default:w(()=>[U(c(G),{tabindex:i.value||f.value===0?-1:0,"data-orientation":c(b),as:r.as,"as-child":r.asChild,dir:c(g),style:{outline:"none"},onMousedown:a[0]||(a[0]=u=>l.value=!0),onMouseup:S,onFocus:C,onBlur:a[1]||(a[1]=u=>i.value=!1)},{default:w(()=>[D(r.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});export{Z as _,Y as f,Q as g,X as i,W as w};
