import{_ as P}from"./index-QUIB5JY0.js";import{u as X,g as Me,L as Z,h as Te,A as De}from"./index-BXUyvvAi.js";import{u as ke,a as Ce,b as ge,_ as Le,c as Ie,d as Ne,g as ee,e as te,f as se,h as ne,C as oe,S as Ve,Q as Fe,i as Pe,j as Be,k as Ge,l as ye,m as Qe,n as ve,o as xe,E as Oe,p as be,q,t as We,r as he,s as Ke,v as Ue,w as qe,x as je,y as He,z as ze}from"./PaginationPrev.vuevuetypescriptsetuptruelang-CgLSrKEY.js";import{f as Ye,a as G,P as U,M as Je,A as Xe,_ as Ze}from"./date-ImrbNu_R.js";import{d as v,c as f,o as i,w as s,a as ae,m as S,u as e,i as z,j as Y,P as et,Q as tt,R as st,S as nt,M as _e,g as t,p as y,D as I,s as p,l as o,y as h,v as x,T as Q,I as O,J as ot,k as J,E as Ee,F as K,h as W,r as j,K as Se}from"./index-DMflrR4A.js";import{P as at,e as Re,a as lt}from"./http-BRxXTWto.js";import{_ as H,F as R,a as A,b as w,c as D,d as T,e as it,o as g,l as L,n as V,u as rt,s as fe,f as dt,t as ut}from"./FormMessage.vuevuetypescriptsetuptruelang-DzT3-0hi.js";import{_ as le,a as ie}from"./CardContent.vuevuetypescriptsetuptruelang-DcsXO7Nv.js";import{_ as Ae}from"./CardFooter.vuevuetypescriptsetuptruelang-CgfBvQEp.js";import{b as mt,A as pt,_ as re,a as de}from"./CardTitle.vuevuetypescriptsetuptruelang-CVs6bj-2.js";import{_ as ue,a as me,b as pe,c as ce,d as B}from"./SelectValue.vuevuetypescriptsetuptruelang-wwrFah_H.js";import{u as ct,f as _t}from"./check-Ct0H3vlp.js";/* empty css                                                              */import{_ as ft}from"./Separator.vuevuetypescriptsetuptruelang-DnKGy7RQ.js";import{L as Ct,_ as gt}from"./PageContainer.vuevuetypescriptsetuptruelang-B98G5rSm.js";import{c as yt,b as vt,_ as xt,a as Ot}from"./TooltipTrigger.vuevuetypescriptsetuptruelang-B7Aa-SBz.js";const bt=v({__name:"MenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(r){const d=r;return(n,l)=>(i(),f(e(at),S(d,{role:"separator","aria-orientation":"horizontal"}),{default:s(()=>[ae(n.$slots,"default")]),_:3},16))}}),Et=v({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{}},setup(r){const d=r;return ct(),(n,l)=>(i(),f(e(bt),z(Y(d)),{default:s(()=>[ae(n.$slots,"default")]),_:3},16))}}),St=v({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(r){const d=r;return(n,l)=>(i(),f(e(yt),z(Y(d)),{default:s(()=>[ae(n.$slots,"default")]),_:3},16))}}),Rt={key:0},At={class:"flex items-center justify-center py-8"},wt={key:1},$t={key:2,class:"mt-6 space-y-6"},Mt={class:"flex items-center justify-between"},Tt={class:"flex items-center gap-2"},Dt={class:"text-sm font-medium"},kt={class:"grid grid-cols-2 gap-4"},Lt={class:"font-medium"},It={class:"flex flex-col items-start gap-2"},Nt={key:0},Vt={class:"font-medium"},Ft={class:"space-y-2"},Pt={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Bt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},Gt={key:0,class:"space-y-2"},Qt={class:"p-4 bg-gray-100 rounded-xl dark:bg-gray-800"},Wt={class:"font-mono text-sm text-gray-800 break-words whitespace-pre-wrap dark:text-gray-200"},ht={key:1,class:"space-y-2"},Kt={class:"p-3 text-red-500 rounded-md bg-red-500/10"},Ut={class:"space-y-2"},qt={class:"space-y-3"},jt={class:"flex justify-between text-sm"},Ht={key:0,class:"flex justify-between text-sm"},zt={key:1,class:"flex justify-between text-sm"},Yt={class:"flex justify-between text-sm"},Jt={class:"flex gap-2 pt-4"},Xt=1e3,Zt=v({__name:"CommandDetailSheet",props:et({commandId:{}},{isOpen:{type:Boolean,required:!0},isOpenModifiers:{}}),emits:["update:isOpen"],setup(r){const d=r,n=tt(r,"isOpen"),l=st(d,"commandId"),{data:a,isPending:u,isError:$,refetch:b}=ke(l,{axiosOpts:{doNotShowLoading:!0}}),{mutate:c}=Ce(),{mutate:k}=ge(),{openConfirmation:C}=X(),{pause:_,resume:N}=nt(()=>{b()},Xt,{immediate:!1});_e(a,M=>{M&&["SUCCEEDED","FAILED","CANCELED"].includes(M.status)?_():N()},{immediate:!0}),_e(n,M=>{M?N():_()},{immediate:!0});function E(){C({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{c(d.commandId,{onSuccess:()=>{O.success("Command removed from queue")},onError:M=>{M instanceof Q?M.errorCode==="command.inProcessingCanNotBeDeleted"?O.error("Command is being processed and cannot be deleted"):O.error(M.message):O.error(M.message)}})},onCancel:()=>{}})}function F(){C({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{k(void 0,{onSuccess:()=>{O.success("Command cancelled successfully")},onError:M=>{M instanceof Q?M.errorCode==="command.noCommandBeingProcessed"?O.error("No command is being processed"):O.error(M.message):O.error(M.message)}})},onCancel:()=>{}})}return(M,m)=>(i(),f(e(Me),{open:n.value,"onUpdate:open":m[0]||(m[0]=$e=>n.value=$e)},{default:s(()=>[t(e(Te),{class:"max-h-screen overflow-y-auto sm:max-w-xl"},{default:s(()=>[t(e(Le),null,{default:s(()=>[t(e(Ie),null,{default:s(()=>m[1]||(m[1]=[p(" Command detail ")])),_:1,__:[1]}),t(e(Ne),null,{default:s(()=>m[2]||(m[2]=[p(" Real-time information about the selected command ")])),_:1,__:[2]})]),_:1}),e(u)?(i(),y("div",Rt,[o("div",At,[t(e(Z),{class:"w-8 h-8 animate-spin"})])])):e($)?(i(),y("div",wt,m[3]||(m[3]=[o("div",{class:"flex items-center justify-center py-8"},[o("p",{class:"text-sm text-muted-foreground"}," Failed to load command details ")],-1)]))):e(a)?(i(),y("div",$t,[o("div",Mt,[o("div",Tt,[(i(),f(h(e(ee)(e(a).type)))),o("span",Dt,x(e(te)(e(a).type)),1)]),t(se,{status:e(a).status},null,8,["status"])]),o("div",kt,[o("div",null,[m[4]||(m[4]=o("p",{class:"text-sm text-muted-foreground"}," ID ",-1)),o("p",Lt,x(e(a).id),1)]),o("div",It,[m[5]||(m[5]=o("p",{class:"text-sm text-muted-foreground"}," Source ",-1)),t(ne,{source:e(a).source},null,8,["source"])]),e(a).completedAt&&e(a).startedAt?(i(),y("div",Nt,[m[6]||(m[6]=o("p",{class:"text-sm text-muted-foreground"}," Duration ",-1)),o("p",Vt,x(e(Ye)((new Date(e(a).completedAt).getTime()-new Date(e(a).startedAt).getTime())/1e3)),1)])):I("",!0)]),o("div",Ft,[m[7]||(m[7]=o("p",{class:"text-sm font-medium"}," Command Inputs ",-1)),o("div",Pt,[o("span",Bt,x(JSON.stringify(e(a).inputs,null,4)),1)])]),e(a).status!=="PROCESSING"&&e(a).status!=="QUEUED"?(i(),y("div",Gt,[m[8]||(m[8]=o("p",{class:"text-sm font-medium"}," Command Outputs ",-1)),o("div",Qt,[o("span",Wt,x(JSON.stringify(e(a).outputs,null,4)),1)])])):I("",!0),e(a).error?(i(),y("div",ht,[m[9]||(m[9]=o("p",{class:"text-sm font-medium text-red-500"}," Error ",-1)),o("div",Kt,x(e(a).error),1)])):I("",!0),o("div",Ut,[m[14]||(m[14]=o("p",{class:"text-sm font-medium"}," Timeline ",-1)),o("div",qt,[o("div",jt,[m[10]||(m[10]=o("span",{class:"text-muted-foreground"},"Created",-1)),o("span",null,x(e(G)(e(a).createdAt)),1)]),e(a).startedAt?(i(),y("div",Ht,[m[11]||(m[11]=o("span",{class:"text-muted-foreground"},"Started",-1)),o("span",null,x(e(G)(e(a).startedAt)),1)])):I("",!0),e(a).completedAt?(i(),y("div",zt,[m[12]||(m[12]=o("span",{class:"text-muted-foreground"},"Completed",-1)),o("span",null,x(e(G)(e(a).completedAt)),1)])):I("",!0),o("div",Yt,[m[13]||(m[13]=o("span",{class:"text-muted-foreground"},"Last Updated",-1)),o("span",null,x(e(G)(e(a).updatedAt)),1)])])]),o("div",Jt,[e(a).status==="QUEUED"?(i(),f(e(P),{key:0,variant:"destructive",class:"flex-1",onClick:E},{default:s(()=>m[15]||(m[15]=[p(" Remove from queue ")])),_:1,__:[15]})):e(a).status==="PROCESSING"?(i(),f(e(P),{key:1,variant:"destructive",class:"flex-1",onClick:F},{default:s(()=>m[16]||(m[16]=[p(" Stop execution ")])),_:1,__:[16]})):(i(),f(e(P),{key:2,variant:"outline",class:"flex-1",disabled:""},{default:s(()=>m[17]||(m[17]=[p(" Re-run ")])),_:1,__:[17]}))])])):I("",!0)]),_:1})]),_:1},8,["open"]))}}),es="command-config",ts={moveTo:{direction:"FORWARD",motorSpeed:80},moveForward:{motorSpeed:80},moveBackward:{motorSpeed:80},cargoOpen:{motorSpeed:80},cargoClose:{motorSpeed:80},cargoLift:{motorSpeed:80,position:20},cargoLower:{motorSpeed:80,position:100,bottomObstacleTracking:{enterDistance:10,exitDistance:20}}};function ss(){const r=ot(es,ts),d=J(()=>r.value),n={STOP_MOVEMENT:()=>{},MOVE_BACKWARD:a=>{r.value={...r.value,moveBackward:{motorSpeed:a.motorSpeed}}},MOVE_FORWARD:a=>{r.value={...r.value,moveForward:{motorSpeed:a.motorSpeed}}},MOVE_TO:a=>{r.value={...r.value,moveTo:{direction:a.direction,motorSpeed:a.motorSpeed}}},CARGO_OPEN:a=>{r.value={...r.value,cargoOpen:{motorSpeed:a.motorSpeed}}},CARGO_CLOSE:a=>{r.value={...r.value,cargoClose:{motorSpeed:a.motorSpeed}}},CARGO_LIFT:a=>{r.value={...r.value,cargoLift:{motorSpeed:a.motorSpeed,position:a.position}}},CARGO_LOWER:a=>{r.value={...r.value,cargoLower:{motorSpeed:a.motorSpeed,position:a.position,bottomObstacleTracking:a.bottomObstacleTracking}}},CARGO_CHECK_QR:()=>{},SCAN_LOCATION:()=>{},WAIT:()=>{}};function l(a,u){const $=n[a];$&&$(u)}return{commandConfig:d,updateCommandConfigFromInputs:l}}const ns={class:"flex items-center gap-2"},os=v({__name:"CommandTypeSelect",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},by:{type:[String,Function]},dir:{},multiple:{type:Boolean},autocomplete:{},disabled:{type:Boolean},name:{},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(r,{emit:d}){const a=_t(r,d),u={STOP_MOVEMENT:{icon:Pe,label:"Stop Movement"},MOVE_FORWARD:{icon:De,label:"Move Forward"},MOVE_BACKWARD:{icon:Xe,label:"Move Backward"},MOVE_TO:{icon:Je,label:"Move To"},CARGO_OPEN:{icon:U,label:"Cargo Open"},CARGO_CLOSE:{icon:U,label:"Cargo Close"},CARGO_LIFT:{icon:U,label:"Cargo Lift"},CARGO_LOWER:{icon:U,label:"Cargo Lower"},CARGO_CHECK_QR:{icon:Fe,label:"Cargo Check QR"},SCAN_LOCATION:{icon:Ve,label:"Scan Location"},WAIT:{icon:oe,label:"Wait"}};return($,b)=>(i(),f(e(ue),z(Y(e(a))),{default:s(()=>[t(e(H),null,{default:s(()=>[t(e(me),null,{default:s(()=>[t(e(pe),{placeholder:"Select command type"})]),_:1})]),_:1}),t(e(ce),null,{default:s(()=>[(i(),y(K,null,Ee(u,(c,k)=>t(e(B),{key:k,value:k},{default:s(()=>[o("div",ns,[(i(),f(h(c.icon),{class:"w-4 h-4"})),o("span",null,x(c.label),1)])]),_:2},1032,["value"])),64))]),_:1})]),_:1},16))}}),as=v({__name:"CargoCheckQRInputs",setup(r){return(d,n)=>(i(),f(e(R),{name:"inputs.qrCode"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[0]||(n[0]=[p("QR Code")])),_:1,__:[0]}),t(e(D),S(l,{type:"text",placeholder:"Enter QR code"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),ls=v({__name:"CargoCloseInputs",setup(r){return(d,n)=>(i(),f(e(R),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[0]||(n[0]=[p("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(D),S(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),is=v({__name:"CargoLiftInputs",setup(r){return(d,n)=>(i(),y(K,null,[t(e(R),{name:"inputs.position"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[0]||(n[0]=[p("Lift position (cm)")])),_:1,__:[0]}),t(e(D),S(l,{type:"number",placeholder:"Enter lift position"}),null,16),t(e(T))]),_:2},1024)]),_:1}),t(e(R),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[1]||(n[1]=[p("Motor Speed (0-100%)")])),_:1,__:[1]}),t(e(D),S(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1})],64))}}),rs={class:"space-y-4"},ds={class:"grid grid-cols-2 gap-4"},us=v({__name:"CargoLowerInputs",setup(r){return(d,n)=>(i(),y(K,null,[t(e(R),{name:"inputs.position"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[0]||(n[0]=[p("Lower position (cm)")])),_:1,__:[0]}),t(e(D),S(l,{type:"number",placeholder:"Enter lower position"}),null,16),t(e(T))]),_:2},1024)]),_:1}),t(e(R),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[1]||(n[1]=[p("Motor Speed (0-100%)")])),_:1,__:[1]}),t(e(D),S(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1}),t(e(ft)),o("div",rs,[n[4]||(n[4]=o("h4",{class:"text-sm font-medium"}," Bottom Obstacle Tracking ",-1)),o("div",ds,[t(e(R),{name:"inputs.bottomObstacleTracking.enterDistance"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[2]||(n[2]=[p("Enter Distance (cm)")])),_:1,__:[2]}),t(e(H),null,{default:s(()=>[t(e(D),S(l,{type:"number"}),null,16)]),_:2},1024),t(e(T))]),_:2},1024)]),_:1}),t(e(R),{name:"inputs.bottomObstacleTracking.exitDistance"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[3]||(n[3]=[p("Exit Distance (cm)")])),_:1,__:[3]}),t(e(H),null,{default:s(()=>[t(e(D),S(l,{type:"number"}),null,16)]),_:2},1024),t(e(T))]),_:2},1024)]),_:1})])])],64))}}),ms=v({__name:"CargoOpenInputs",setup(r){return(d,n)=>(i(),f(e(R),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[0]||(n[0]=[p("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(D),S(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),ps=v({__name:"MoveBackwardInputs",setup(r){return(d,n)=>(i(),f(e(R),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[0]||(n[0]=[p("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(D),S(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),cs=v({__name:"MoveForwardInputs",setup(r){return(d,n)=>(i(),f(e(R),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[0]||(n[0]=[p("Motor Speed (0-100%)")])),_:1,__:[0]}),t(e(D),S(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),_s={class:"flex items-center gap-2"},fs={class:"flex items-center gap-2"},Cs=v({__name:"MoveToInputs",setup(r){return(d,n)=>(i(),y(K,null,[t(e(R),{name:"inputs.location"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[0]||(n[0]=[p("Location")])),_:1,__:[0]}),t(e(D),S(l,{type:"text",placeholder:"Enter location"}),null,16),t(e(T))]),_:2},1024)]),_:1}),t(e(R),{name:"inputs.direction"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[1]||(n[1]=[p("Move direction")])),_:1,__:[1]}),t(e(ue),z(Y(l)),{default:s(()=>[t(e(H),null,{default:s(()=>[t(e(me),null,{default:s(()=>[t(e(pe),{placeholder:"Select direction"})]),_:1})]),_:1}),t(e(ce),null,{default:s(()=>[t(e(B),{value:"FORWARD"},{default:s(()=>[o("div",_s,[t(e(mt),{class:"w-4 h-4"}),n[2]||(n[2]=o("span",null,"Forward",-1))])]),_:1}),t(e(B),{value:"BACKWARD"},{default:s(()=>[o("div",fs,[t(e(pt),{class:"w-4 h-4"}),n[3]||(n[3]=o("span",null,"Backward",-1))])]),_:1})]),_:1})]),_:2},1040)]),_:2},1024)]),_:1}),t(e(R),{name:"inputs.motorSpeed"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[4]||(n[4]=[p("Motor Speed (0-100%)")])),_:1,__:[4]}),t(e(D),S(l,{type:"number",placeholder:"Enter motor speed"}),null,16),t(e(T))]),_:2},1024)]),_:1})],64))}}),gs=v({__name:"WaitInputs",setup(r){return(d,n)=>(i(),f(e(R),{name:"inputs.durationMs"},{default:s(({componentField:l})=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>n[0]||(n[0]=[p("Duration (ms)")])),_:1,__:[0]}),t(e(D),S(l,{type:"number",placeholder:"Enter duration"}),null,16),t(e(T))]),_:2},1024)]),_:1}))}}),ys=v({__name:"DynamicInputs",props:{commandType:{}},setup(r){const d=r,n={MOVE_TO:Cs,MOVE_FORWARD:cs,MOVE_BACKWARD:ps,CARGO_OPEN:ms,CARGO_CLOSE:ls,CARGO_LIFT:is,CARGO_LOWER:us,CARGO_CHECK_QR:as,WAIT:gs,STOP_MOVEMENT:null,SCAN_LOCATION:null},l=J(()=>n[d.commandType]);return(a,u)=>e(l)?(i(),f(h(e(l)),{key:a.commandType})):I("",!0)}}),vs=it("type",[g({type:L("STOP_MOVEMENT"),inputs:g({}).default({})}),g({type:L("MOVE_TO"),inputs:g({location:fe(),direction:rt([L("FORWARD"),L("BACKWARD")]),motorSpeed:V().min(0).max(100)})}),g({type:L("MOVE_FORWARD"),inputs:g({motorSpeed:V().min(0).max(100)})}),g({type:L("MOVE_BACKWARD"),inputs:g({motorSpeed:V().min(0).max(100)})}),g({type:L("CARGO_OPEN"),inputs:g({motorSpeed:V().min(0).max(100)})}),g({type:L("CARGO_CLOSE"),inputs:g({motorSpeed:V().min(0).max(100)})}),g({type:L("CARGO_LIFT"),inputs:g({motorSpeed:V().min(0).max(100),position:V().min(0)})}),g({type:L("CARGO_LOWER"),inputs:g({motorSpeed:V().min(0).max(100),bottomObstacleTracking:g({enterDistance:V().min(0),exitDistance:V().min(0)}),position:V().min(0)})}),g({type:L("CARGO_CHECK_QR"),inputs:g({qrCode:fe()})}),g({type:L("SCAN_LOCATION"),inputs:g({}).default({})}),g({type:L("WAIT"),inputs:g({durationMs:V()})})]),xs={class:"space-y-4"},Os=v({__name:"CreateCommandForm",setup(r){const d=Re(),{values:n,handleSubmit:l,setFieldValue:a}=dt({validationSchema:ut(vs),initialValues:{type:"STOP_MOVEMENT",inputs:{}}}),u=J(()=>n.type),{mutate:$,isPending:b}=Be(),{commandConfig:c,updateCommandConfigFromInputs:k}=ss(),C=l(N=>{$(N,{onSuccess:()=>{O.success("Command created successfully"),d.invalidateQueries({queryKey:[Ge]}),d.invalidateQueries({queryKey:[ye]})},onError:E=>{E instanceof Q?O.error({title:E.errorCode,message:E.message}):O.error("Failed to create command")}}),k(u.value,N.inputs)});function _(N){a("type",N);const F={MOVE_TO:c.value.moveTo,MOVE_FORWARD:c.value.moveForward,MOVE_BACKWARD:c.value.moveBackward,CARGO_OPEN:c.value.cargoOpen,CARGO_CLOSE:c.value.cargoClose,CARGO_LIFT:c.value.cargoLift,CARGO_LOWER:c.value.cargoLower}[N]??{};a("inputs",{...F})}return(N,E)=>(i(),f(e(le),{class:"sticky top-6"},{default:s(()=>[t(e(re),null,{default:s(()=>[t(e(de),null,{default:s(()=>E[2]||(E[2]=[p("Create command")])),_:1,__:[2]})]),_:1}),o("form",{onSubmit:E[1]||(E[1]=W((...F)=>e(C)&&e(C)(...F),["prevent"]))},[t(e(ie),null,{default:s(()=>[o("div",xs,[t(e(R),{name:"type"},{default:s(()=>[t(e(A),null,{default:s(()=>[t(e(w),null,{default:s(()=>E[3]||(E[3]=[p("Command type")])),_:1,__:[3]}),t(os,{disabled:e(b),"model-value":e(u),"onUpdate:modelValue":E[0]||(E[0]=F=>_(F))},null,8,["disabled","model-value"]),t(e(T))]),_:1})]),_:1}),t(ys,{"command-type":e(u)},null,8,["command-type"])])]),_:1}),t(e(Ae),{class:"flex flex-col gap-2"},{default:s(()=>[t(e(P),{type:"submit",class:"w-full",disabled:e(b)},{default:s(()=>[e(b)?(i(),f(e(Z),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):I("",!0),E[4]||(E[4]=p(" Create "))]),_:1,__:[4]},8,["disabled"])]),_:1})],32)]),_:1}))}}),we=v({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(r){const d=r,n=J(()=>{const{class:l,...a}=d;return a});return(l,a)=>(i(),f(e(Et),S(n.value,{class:e(lt)("-mx-1 my-1 h-px bg-muted",d.class)}),null,16,["class"]))}}),bs={key:0},Es={class:"flex items-center justify-center gap-2 p-9"},Ss={class:"flex items-center justify-between"},Rs={class:"flex items-center gap-2 font-medium"},As={class:"flex items-center gap-2 text-sm text-muted-foreground"},ws={key:0,class:"text-sm"},$s={key:1,class:"text-sm"},Ms=1e3,Ts=v({__name:"CurrentProcessingCommandCard",emits:["viewDetails"],setup(r,{emit:d}){const n=d,l=Re(),{openConfirmation:a}=X(),{data:u,isError:$}=Qe({axiosOpts:{doNotShowLoading:!0},refetchInterval:Ms}),{mutate:b,isPending:c}=ge();function k(){a({title:"Cancel command",description:"Are you sure you want to cancel this command?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{b(void 0,{onSuccess:()=>{O.success("Command cancelled successfully"),l.setQueryData([ye],C=>({...C,status:"CANCELING"}))},onError:C=>{C instanceof Q?C.errorCode==="command.noCommandBeingProcessed"?O.error("No command is being processed"):O.error(C.message):O.error(C.message)}})},onCancel:()=>{}})}return(C,_)=>e(u)&&!e($)?(i(),f(e(le),{key:0},{default:s(()=>[t(e(re),{class:"pb-3"},{default:s(()=>[t(e(de),{class:"flex items-center justify-between"},{default:s(()=>[_[3]||(_[3]=o("span",null,"Current Command",-1)),t(se,{status:e(u).status},null,8,["status"])]),_:1,__:[3]})]),_:1}),t(e(ie),null,{default:s(()=>[e(c)?(i(),y("div",bs,[o("div",Es,[t(e(Ct),{class:"w-4 h-4 animate-spin"}),_[4]||(_[4]=o("span",null,"Cancelling command...",-1))])])):(i(),y("div",{key:1,class:"p-4 space-y-3 border rounded-lg cursor-pointer bg-muted/50",onClick:_[2]||(_[2]=N=>n("viewDetails",e(u).id))},[o("div",Ss,[o("div",Rs,[(i(),f(h(e(ee)(e(u).type)),{class:"w-5 h-5"})),o("span",null,x(e(te)(e(u).type)),1)]),o("div",{class:"flex items-center gap-2",onClick:_[1]||(_[1]=W(()=>{},["stop"]))},[t(ne,{source:e(u).source},null,8,["source"]),t(e(ve),null,{default:s(()=>[t(e(xe),{"as-child":""},{default:s(()=>[t(e(P),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(Oe),{class:"w-4 h-4"})]),_:1})]),_:1}),t(e(be),{align:"end"},{default:s(()=>[t(e(q),{class:"cursor-pointer",onClick:_[0]||(_[0]=W(N=>n("viewDetails",e(u).id),["stop"]))},{default:s(()=>_[5]||(_[5]=[p(" View details ")])),_:1,__:[5]}),t(e(we)),t(e(q),{class:"text-red-500 cursor-pointer",onClick:k},{default:s(()=>_[6]||(_[6]=[p(" Cancel command ")])),_:1,__:[6]})]),_:1})]),_:1})])]),o("div",As,[t(e(oe),{class:"w-4 h-4"}),o("span",null,"Started at: "+x(e(u).startedAt?e(G)(e(u).startedAt):"N/A"),1)]),e(u).type==="MOVE_TO"?(i(),y("div",ws,[_[7]||(_[7]=o("span",{class:"font-medium"},"Location: ",-1)),p(" "+x(e(u).inputs.location),1)])):e(u).type==="CARGO_CHECK_QR"?(i(),y("div",$s,[_[8]||(_[8]=o("span",{class:"font-medium"},"QR Code: ",-1)),p(" "+x(e(u).inputs.qrCode),1)])):I("",!0)]))]),_:1})]),_:1})):I("",!0)}}),Ds={class:"flex items-center justify-between"},ks={class:"flex items-center gap-2 font-medium"},Ls={class:"flex items-center gap-2 text-sm text-muted-foreground"},Is={key:0,class:"text-sm"},Ns={key:1,class:"text-sm"},Vs=v({__name:"QueuedCommandItem",props:{command:{}},emits:["viewDetails","onRemove"],setup(r,{emit:d}){const n=r,l=d,{openConfirmation:a}=X(),{mutate:u}=Ce();function $(){a({title:"Remove command",description:"Are you sure you want to remove this command from queue?",actionLabel:"Confirm",cancelLabel:"Cancel",onAction:()=>{u(n.command.id,{onSuccess:()=>{O.success("Command removed from queue"),l("onRemove")},onError:b=>{b instanceof Q?b.errorCode==="command.inProcessingCanNotBeDeleted"?O.error("Command is being processed and cannot be deleted"):O.error(b.message):O.error(b.message)}})},onCancel:()=>{}})}return(b,c)=>(i(),y("div",{class:"p-4 space-y-3 transition-colors border rounded-lg cursor-pointer bg-muted/30 border-border/50 hover:border-border",onClick:c[3]||(c[3]=k=>l("viewDetails",n.command.id))},[o("div",Ds,[o("div",ks,[(i(),f(h(e(ee)(n.command.type)),{class:"w-5 h-5"})),o("span",null,x(e(te)(n.command.type)),1)]),o("div",{class:"flex items-center gap-2",onClick:c[2]||(c[2]=W(()=>{},["stop"]))},[t(se,{status:n.command.status},null,8,["status"]),t(ne,{source:n.command.source},null,8,["source"]),t(e(ve),null,{default:s(()=>[t(e(xe),{"as-child":""},{default:s(()=>[t(e(P),{variant:"ghost",size:"icon",class:"w-8 h-8"},{default:s(()=>[t(e(Oe),{"class-name":"h-4 w-4"})]),_:1})]),_:1}),t(e(be),{align:"end",onClick:c[1]||(c[1]=W(()=>{},["stop"]))},{default:s(()=>[t(e(q),{onClick:c[0]||(c[0]=k=>l("viewDetails",n.command.id))},{default:s(()=>c[4]||(c[4]=[p(" View details ")])),_:1,__:[4]}),t(e(we)),t(e(q),{class:"text-red-500",onClick:$},{default:s(()=>c[5]||(c[5]=[p(" Remove from queue ")])),_:1,__:[5]})]),_:1})]),_:1})])]),o("div",Ls,[t(e(oe),{class:"w-4 h-4"}),o("span",null,"Created "+x(e(We)(n.command.createdAt)),1)]),n.command.type==="MOVE_TO"?(i(),y("div",Is,[c[6]||(c[6]=o("span",{class:"font-medium"},"Location: ",-1)),p(" "+x(b.command.inputs.location),1)])):n.command.type==="CARGO_CHECK_QR"?(i(),y("div",Ns,[c[7]||(c[7]=o("span",{class:"font-medium"},"QR Code: ",-1)),p(" "+x(b.command.inputs.qrCode),1)])):I("",!0)]))}}),Fs={key:1,class:"py-6 text-center text-muted-foreground"},Ps={class:"flex items-center gap-1 text-sm text-muted-foreground"},Bs=1e3,Gs=v({__name:"WaitingCommandList",emits:["viewDetails"],setup(r,{emit:d}){const n=d,l=j(1),a=j(5),{data:u,refetch:$}=he(l,a,{axiosOpts:{doNotShowLoading:!0},refetchInterval:Bs});function b(){l.value=1}function c(k){l.value=k}return(k,C)=>e(u)?(i(),f(e(le),{key:0},{default:s(()=>[t(e(re),{class:"pb-3"},{default:s(()=>[t(e(de),{class:"flex items-center justify-between"},{default:s(()=>[C[1]||(C[1]=o("span",null,"Waiting Commands",-1)),t(e(Ze),{variant:"outline"},{default:s(()=>[p(x(e(u).totalItems)+" commands ",1)]),_:1})]),_:1,__:[1]})]),_:1}),t(e(ie),{class:"space-y-3"},{default:s(()=>[e(u).totalItems>0?(i(!0),y(K,{key:0},Ee(e(u).items,_=>(i(),f(Vs,{key:_.id,command:_,onOnRemove:e($),onViewDetails:N=>n("viewDetails",_.id)},null,8,["command","onOnRemove","onViewDetails"]))),128)):(i(),y("div",Fs," No commands in queue "))]),_:1}),t(e(Ae),{class:"flex items-center justify-between pt-4 border-t"},{default:s(()=>[o("div",Ps,[C[5]||(C[5]=o("span",{class:"text-sm sr-only sm:not-sr-only"}," Items per page: ",-1)),t(e(ue),{modelValue:e(a),"onUpdate:modelValue":[C[0]||(C[0]=_=>Se(a)?a.value=_:null),b]},{default:s(()=>[t(e(me),{class:"w-16 h-8 ml-2"},{default:s(()=>[t(e(pe),{placeholder:"5"})]),_:1}),t(e(ce),null,{default:s(()=>[t(e(B),{value:"5"},{default:s(()=>C[2]||(C[2]=[p(" 5 ")])),_:1,__:[2]}),t(e(B),{value:"10"},{default:s(()=>C[3]||(C[3]=[p(" 10 ")])),_:1,__:[3]}),t(e(B),{value:"20"},{default:s(()=>C[4]||(C[4]=[p(" 20 ")])),_:1,__:[4]})]),_:1})]),_:1},8,["modelValue"])]),t(e(Ke),{"sibling-count":1,"items-per-page":e(a),total:e(u).totalItems,"default-page":e(l),"onUpdate:page":c},{default:s(()=>[t(e(Ue),{class:"flex items-center gap-1"},{default:s(()=>[t(e(qe)),t(e(je)),t(e(He)),t(e(ze))]),_:1})]),_:1},8,["items-per-page","total","default-page"])]),_:1})]),_:1})):I("",!0)}}),Qs={class:"flex items-center justify-between"},Ws={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},hs={class:"space-y-6 md:col-span-2"},ln=v({__name:"CommandQueueView",setup(r){const d=j(!1),n=j(null);function l(a){n.value=a,d.value=!0}return(a,u)=>(i(),f(gt,null,{default:s(()=>[o("div",Qs,[u[2]||(u[2]=o("div",null,[o("h1",{class:"text-xl font-semibold tracking-tight"}," Robot command queue "),o("p",{class:"text-sm text-muted-foreground"}," Manage and monitor robot commands in real-time ")],-1)),t(e(St),null,{default:s(()=>[t(e(vt),null,{default:s(()=>[t(e(xt),{"as-child":""},{default:s(()=>[t(e(P),{variant:"outline",size:"icon"},{default:s(()=>[t(e(Z),{class:"w-4 h-4 animate-spin"})]),_:1})]),_:1}),t(e(Ot),null,{default:s(()=>u[1]||(u[1]=[o("p",null,"Refreshing in real-time",-1)])),_:1,__:[1]})]),_:1})]),_:1})]),o("div",Ws,[o("div",hs,[t(Ts,{onViewDetails:l}),t(Gs,{onViewDetails:l})]),o("div",null,[t(Os)])]),e(n)?(i(),f(Zt,{key:0,"is-open":e(d),"onUpdate:isOpen":u[0]||(u[0]=$=>Se(d)?d.value=$:null),"command-id":e(n)},null,8,["is-open","command-id"])):I("",!0)]),_:1}))}});export{ln as default};
