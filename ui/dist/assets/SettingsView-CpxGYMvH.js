import{u as ae,C as se,a as ne,b as ue,c as oe,d as de,e as ie,G as re,_ as ee,f as fe,g as me,H as pe,h as be,i as _e,j as ce,k as ge,l as ye,W as ve,m as we}from"./Switch.vuevuetypescriptsetuptruelang-BQ9MNUUV.js";import{_ as M}from"./index-BM3KVDx1.js";import{d as F,z as u,u as K,F as c,_ as g,a as y,b as v,c as x,t as Z}from"./vee-validate-zod-BBBIAEWJ.js";/* empty css                                                              */import{c as te,a as Ce,u as z,i as Se}from"./http-BDjO1tEJ.js";import{d as R,J as xe,K as Pe,p as he,f as E,o,b as l,u as e,h as Ve,w as t,c as I,e as m,t as J,A as H,i as s,m as U,y as $,F as q,v as X,n as L,g as O,H as Ee,x as ke,I as Te}from"./index-BsT5NMph.js";import{L as j,_ as $e}from"./PageContainer.vuevuetypescriptsetuptruelang-ErTdFqfl.js";import{_ as Ie}from"./plugin-vueexport-helper-DlAUqK2U.js";import{_ as N,a as A,b as Q,c as B,d as V}from"./SelectValue.vuevuetypescriptsetuptruelang-B91VhQ0k.js";import{b as De}from"./PopperContent-C4cKnlYU.js";import{_ as Re,a as Y,b as W,c as Ue}from"./TabsTrigger.vuevuetypescriptsetuptruelang-CQcfqSPL.js";/**
 * @license lucide-vue-next v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=te("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=te("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),je={class:"relative"},Ne={class:"sr-only"},Ae=R({__name:"PasswordInput",props:xe({disabled:{type:Boolean},class:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(P){const d=P,p=Pe(P,"modelValue"),C=he(!1);function k(){C.value=!C.value}return(b,_)=>(o(),E("div",je,[l(e(F),{modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=f=>p.value=f),type:e(C)?"text":"password",class:Ve(e(Ce)("pr-10 hide-password-toggle",d.class))},null,8,["modelValue","type","class"]),l(e(M),{type:"button",variant:"ghost",size:"sm",class:"absolute top-0 right-0 h-full px-3 py-2 hover:bg-transparent",onClick:k},{default:t(()=>[e(C)&&!d.disabled?(o(),I(e(He),{key:0,class:"w-4 h-4","aria-hidden":"true"})):(o(),I(e(Fe),{key:1,class:"w-4 h-4","aria-hidden":"true"})),m("span",Ne,J(e(C)?"Hide password":"Show password"),1)]),_:1})]))}}),le=Ie(Ae,[["__scopeId","data-v-2606193e"]]),Qe=R({__name:"CargoConfigForm",props:{initialValues:{}},setup(P){const d=P,p=u.object({liftPosition:u.number().min(0,"Lift position must be at least 0"),lowerPosition:u.number().min(0,"Lower position must be at least 0"),bottomDistanceHysteresis:u.object({lowerThreshold:u.number().int("Lower threshold must be an integer").positive("Lower threshold must be positive").default(15),upperThreshold:u.number().int("Upper threshold must be an integer").positive("Upper threshold must be positive").default(20)})}).refine(i=>i.liftPosition<i.lowerPosition,{message:"Lift position must be less than lower position",path:["liftPosition"]}).superRefine((i,n)=>{i.bottomDistanceHysteresis.lowerThreshold>=i.bottomDistanceHysteresis.upperThreshold&&(n.addIssue({code:u.ZodIssueCode.custom,message:"Lower threshold must be less than upper threshold",path:["bottomDistanceHysteresis","lowerThreshold"]}),n.addIssue({code:u.ZodIssueCode.custom,message:"Upper threshold must be greater than lower threshold",path:["bottomDistanceHysteresis","upperThreshold"]}))}),C=z(),{mutate:k,isPending:b}=ae(),f=K({validationSchema:Z(p),initialValues:d.initialValues}).handleSubmit(i=>{k(i,{onSuccess:()=>{C.setQueryData([se],i),H.success("Cargo configuration updated successfully!")},onError:()=>{H.error("Failed to update cargo configuration")}})});return(i,n)=>(o(),E("form",{class:"flex flex-col w-full max-w-lg space-y-6",onSubmit:n[0]||(n[0]=(...r)=>e(f)&&e(f)(...r))},[n[6]||(n[6]=m("h3",{class:"pb-2 text-lg font-medium border-b"}," Cargo Configuration ",-1)),l(e(c),{name:"liftPosition"},{default:t(({componentField:r})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>n[1]||(n[1]=[s("Lift Position")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),U(r,{type:"number",placeholder:"Enter lift position",disabled:e(b)}),null,16,["disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"lowerPosition"},{default:t(({componentField:r})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>n[2]||(n[2]=[s("Lower Position")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),U(r,{type:"number",placeholder:"Enter lower position",disabled:e(b)}),null,16,["disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),n[7]||(n[7]=m("div",{class:"flex flex-col gap-2"},[m("h3",{class:"pb-2 text-lg font-medium border-b"}," Bottom Distance Hysteresis ")],-1)),l(e(c),{name:"bottomDistanceHysteresis.lowerThreshold"},{default:t(({componentField:r})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>n[3]||(n[3]=[s("Lower Threshold")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),U(r,{type:"number",placeholder:"Enter lower threshold",disabled:e(b)}),null,16,["disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"bottomDistanceHysteresis.upperThreshold"},{default:t(({componentField:r})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>n[4]||(n[4]=[s("Upper Threshold")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),U(r,{type:"number",placeholder:"Enter upper threshold",disabled:e(b)}),null,16,["disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),m("div",null,[l(e(M),{type:"submit",disabled:e(b)},{default:t(()=>[e(b)?(o(),I(e(j),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):$("",!0),n[5]||(n[5]=s(" Save "))]),_:1},8,["disabled"])])],32))}}),Be={key:0,class:"flex items-center justify-center h-full"},qe=R({__name:"CargoConfigTab",setup(P){const{data:d,isPending:p}=ne();return(C,k)=>(o(),E(q,null,[e(p)?(o(),E("div",Be,[l(e(j),{class:"w-4 h-4 animate-spin"})])):$("",!0),e(d)?(o(),I(Qe,{key:1,"initial-values":e(d)},null,8,["initial-values"])):$("",!0)],64))}}),Le=R({__name:"CloudConfigForm",props:{initialValues:{}},setup(P){const d=P,p=u.object({address:u.string().min(1,"Address is required"),token:u.string().min(1,"Token is required")}),C=z(),{mutate:k,isPending:b}=ue(),f=K({validationSchema:Z(p),initialValues:d.initialValues}).handleSubmit(i=>{k(i,{onSuccess:()=>{C.setQueryData([oe],i),H.success("Cloud configuration updated successfully!")},onError:()=>{H.error("Failed to update cloud configuration")}})});return(i,n)=>(o(),E("form",{class:"flex flex-col w-full max-w-lg space-y-6",onSubmit:n[0]||(n[0]=(...r)=>e(f)&&e(f)(...r))},[n[4]||(n[4]=m("h3",{class:"pb-2 text-lg font-medium border-b"}," Cloud Configuration ",-1)),l(e(c),{name:"address"},{default:t(({componentField:r})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>n[1]||(n[1]=[s("Cloud Address")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),U(r,{type:"url",placeholder:"https://cloud.example.com",disabled:e(b)}),null,16,["disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"token"},{default:t(({componentField:r})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>n[2]||(n[2]=[s("Auth token")])),_:1}),l(e(v),null,{default:t(()=>[l(e(le),U(r,{placeholder:"Enter your auth token",disabled:e(b)}),null,16,["disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),m("div",null,[l(e(M),{type:"submit",disabled:e(b)},{default:t(()=>[e(b)?(o(),I(e(j),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):$("",!0),n[3]||(n[3]=s(" Save "))]),_:1},8,["disabled"])])],32))}}),Oe={key:0,class:"flex items-center justify-center h-full"},Ge=R({__name:"CloudConfigTab",setup(P){const{data:d,isPending:p}=de();return(C,k)=>(o(),E(q,null,[e(p)?(o(),E("div",Oe,[l(e(j),{class:"w-4 h-4 animate-spin"})])):$("",!0),e(d)?(o(),I(Le,{key:1,"initial-values":e(d)},null,8,["initial-values"])):$("",!0)],64))}}),Me={class:"space-y-0.5"},Ye=R({__name:"GRPCConfigForm",props:{initialValues:{}},setup(P){const d=P,p=u.object({port:u.number().int().min(1024,"Port must be at least 1024").max(65535,"Port must be at most 65535"),enable:u.boolean().default(!1)}),C=z(),{mutate:k,isPending:b}=ie(),f=K({validationSchema:Z(p),initialValues:d.initialValues}).handleSubmit(i=>{k(i,{onSuccess:()=>{C.setQueryData([re],i),H.success("gRPC configuration updated successfully!")},onError:()=>{H.error("Failed to update gRPC configuration")}})});return(i,n)=>(o(),E("form",{class:"flex flex-col w-full max-w-lg space-y-6",onSubmit:n[0]||(n[0]=(...r)=>e(f)&&e(f)(...r))},[n[4]||(n[4]=m("h3",{class:"pb-2 text-lg font-medium border-b"}," gRPC Configuration ",-1)),l(e(c),{name:"port"},{default:t(({field:r})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>n[1]||(n[1]=[s("Port")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),{modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,type:"number",placeholder:"Enter port number",disabled:e(b),class:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"enable"},{default:t(({value:r,handleChange:T})=>[l(e(g),{class:"flex flex-row items-center justify-between p-4 border rounded-lg"},{default:t(()=>[m("div",Me,[l(e(y),null,{default:t(()=>n[2]||(n[2]=[s("Enable server")])),_:1})]),l(e(v),null,{default:t(()=>[l(e(ee),{"model-value":r,disabled:e(b),"aria-readonly":"","onUpdate:modelValue":T},null,8,["model-value","disabled","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1}),m("div",null,[l(e(M),{type:"submit",disabled:e(b)},{default:t(()=>[e(b)?(o(),I(e(j),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):$("",!0),n[3]||(n[3]=s(" Save "))]),_:1},8,["disabled"])])],32))}}),We={key:0,class:"flex items-center justify-center h-full"},Ke=R({__name:"GRPCConfigTab",setup(P){const{data:d,isPending:p}=fe();return(C,k)=>(o(),E(q,null,[e(p)?(o(),E("div",We,[l(e(j),{class:"w-4 h-4 animate-spin"})])):$("",!0),e(d)?(o(),I(Ye,{key:1,"initial-values":e(d)},null,8,["initial-values"])):$("",!0)],64))}}),Ze={listAvailableSerialPorts:P=>Se.get("/peripherals/serials",P)};function ze(P){return De({queryKey:["serial-ports"],queryFn:()=>Ze.listAvailableSerialPorts(P),select:d=>d.items})}const Je={class:"grid grid-cols-1 gap-8"},Xe={class:"space-y-6"},el={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},ll={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4"},tl={class:"space-y-6"},al={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},sl={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4"},nl=R({__name:"HardwareConfigForm",props:{initialValues:{}},setup(P){const d=P,p=[9600,19200,38400,57600,115200],C=u.object({port:u.string().min(1,"Port is required"),baudRate:u.number().int().positive("Baud rate must be positive"),parity:u.enum(["NONE","EVEN","ODD"]).default("NONE"),dataBits:u.union([u.literal(5),u.literal(6),u.literal(7),u.literal(8)]).default(8),stopBits:u.union([u.literal(1),u.literal(1.5),u.literal(2)]).default(1),readTimeout:u.number().int().nonnegative("Read timeout must be non-negative")}),k=u.object({esp:u.object({serial:C}),pic:u.object({serial:C})}).superRefine((h,a)=>{h.esp.serial.port===h.pic.serial.port&&(a.addIssue({code:u.ZodIssueCode.custom,message:"ESP and PIC cannot use the same port",path:["esp.serial.port"]}),a.addIssue({code:u.ZodIssueCode.custom,message:"ESP and PIC cannot use the same port",path:["pic.serial.port"]}))}),b=z(),{mutate:_,isPending:f}=me(),{data:i,refetch:n}=ze({doNotShowLoading:!0}),T=K({validationSchema:Z(k),initialValues:d.initialValues}).handleSubmit(h=>{_(h,{onSuccess:()=>{b.setQueryData([pe],h),H.success("Hardware configuration updated successfully!")},onError:()=>{H.error("Failed to update hardware configuration")}})});function w(h){h&&n()}return(h,a)=>(o(),E("form",{class:"flex flex-col w-full space-y-6",onSubmit:a[0]||(a[0]=(...S)=>e(T)&&e(T)(...S))},[m("div",Je,[m("div",Xe,[a[17]||(a[17]=m("h3",{class:"pb-2 text-lg font-medium border-b"}," ESP Serial Configuration ",-1)),m("div",el,[l(e(c),{name:"esp.serial.port"},{default:t(({componentField:S,value:D})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[1]||(a[1]=[s("Port")])),_:1}),l(e(N),U(S,{required:"","onUpdate:open":w}),{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(A),{disabled:e(f)},{default:t(()=>[l(e(Q),{placeholder:D},null,8,["placeholder"])]),_:2},1032,["disabled"])]),_:2},1024),e(i)?(o(),I(e(B),{key:0},{default:t(()=>[(o(!0),E(q,null,X(e(i),G=>(o(),I(e(V),{key:G.port,value:G.port},{default:t(()=>[s(J(G.port),1)]),_:2},1032,["value"]))),128))]),_:1})):$("",!0)]),_:2},1040),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"esp.serial.readTimeout"},{default:t(({field:S})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[2]||(a[2]=[s("Read Timeout (s)")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),{modelValue:S.value,"onUpdate:modelValue":D=>S.value=D,type:"number",disabled:e(f),placeholder:"e.g. 1"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1})]),m("div",ll,[l(e(c),{name:"esp.serial.baudRate"},{default:t(({componentField:S})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[3]||(a[3]=[s("Baud Rate")])),_:1}),l(e(N),L(O(S)),{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(A),{disabled:e(f)},{default:t(()=>[l(e(Q),{placeholder:"Select baud rate"})]),_:1},8,["disabled"])]),_:1}),l(e(B),null,{default:t(()=>[(o(),E(q,null,X(p,D=>l(e(V),{key:D,value:D},{default:t(()=>[s(J(D),1)]),_:2},1032,["value"])),64))]),_:1})]),_:2},1040),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"esp.serial.parity"},{default:t(({componentField:S})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[4]||(a[4]=[s("Parity")])),_:1}),l(e(N),L(O(S)),{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(A),{disabled:e(f)},{default:t(()=>[l(e(Q),{placeholder:"Select parity"})]),_:1},8,["disabled"])]),_:1}),l(e(B),null,{default:t(()=>[l(e(V),{value:"NONE"},{default:t(()=>a[5]||(a[5]=[s(" None ")])),_:1}),l(e(V),{value:"EVEN"},{default:t(()=>a[6]||(a[6]=[s(" Even ")])),_:1}),l(e(V),{value:"ODD"},{default:t(()=>a[7]||(a[7]=[s(" Odd ")])),_:1})]),_:1})]),_:2},1040),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"esp.serial.dataBits"},{default:t(({componentField:S})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[8]||(a[8]=[s("Data Bits")])),_:1}),l(e(N),L(O(S)),{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(A),{disabled:e(f)},{default:t(()=>[l(e(Q),{placeholder:"Select data bits"})]),_:1},8,["disabled"])]),_:1}),l(e(B),null,{default:t(()=>[l(e(V),{value:5},{default:t(()=>a[9]||(a[9]=[s(" 5 ")])),_:1}),l(e(V),{value:6},{default:t(()=>a[10]||(a[10]=[s(" 6 ")])),_:1}),l(e(V),{value:7},{default:t(()=>a[11]||(a[11]=[s(" 7 ")])),_:1}),l(e(V),{value:8},{default:t(()=>a[12]||(a[12]=[s(" 8 ")])),_:1})]),_:1})]),_:2},1040),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"esp.serial.stopBits"},{default:t(({componentField:S})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[13]||(a[13]=[s("Stop Bits")])),_:1}),l(e(N),L(O(S)),{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(A),{disabled:e(f)},{default:t(()=>[l(e(Q),{placeholder:"Select stop bits"})]),_:1},8,["disabled"])]),_:1}),l(e(B),null,{default:t(()=>[l(e(V),{value:1},{default:t(()=>a[14]||(a[14]=[s(" 1 ")])),_:1}),l(e(V),{value:1.5},{default:t(()=>a[15]||(a[15]=[s(" 1.5 ")])),_:1}),l(e(V),{value:2},{default:t(()=>a[16]||(a[16]=[s(" 2 ")])),_:1})]),_:1})]),_:2},1040),l(e(x))]),_:2},1024)]),_:1})])]),m("div",tl,[a[34]||(a[34]=m("h3",{class:"pb-2 text-lg font-medium border-b"}," PIC Serial Configuration ",-1)),m("div",al,[l(e(c),{name:"pic.serial.port"},{default:t(({componentField:S,value:D})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[18]||(a[18]=[s("Port")])),_:1}),l(e(N),U(S,{required:"","onUpdate:open":w}),{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(A),{disabled:e(f)},{default:t(()=>[l(e(Q),{placeholder:D},null,8,["placeholder"])]),_:2},1032,["disabled"])]),_:2},1024),l(e(B),null,{default:t(()=>[(o(!0),E(q,null,X(e(i),G=>(o(),I(e(V),{key:G.port,value:G.port},{default:t(()=>[s(J(G.port),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1040),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"pic.serial.readTimeout"},{default:t(({field:S})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[19]||(a[19]=[s("Read Timeout (s)")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),{modelValue:S.value,"onUpdate:modelValue":D=>S.value=D,type:"number",disabled:e(f),placeholder:"e.g. 1"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1})]),m("div",sl,[l(e(c),{name:"pic.serial.baudRate"},{default:t(({componentField:S})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[20]||(a[20]=[s("Baud Rate")])),_:1}),l(e(N),L(O(S)),{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(A),{disabled:e(f)},{default:t(()=>[l(e(Q),{placeholder:"Select baud rate"})]),_:1},8,["disabled"])]),_:1}),l(e(B),null,{default:t(()=>[(o(),E(q,null,X(p,D=>l(e(V),{key:D,value:D},{default:t(()=>[s(J(D),1)]),_:2},1032,["value"])),64))]),_:1})]),_:2},1040),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"pic.serial.parity"},{default:t(({componentField:S})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[21]||(a[21]=[s("Parity")])),_:1}),l(e(N),L(O(S)),{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(A),{disabled:e(f)},{default:t(()=>[l(e(Q),{placeholder:"Select parity"})]),_:1},8,["disabled"])]),_:1}),l(e(B),null,{default:t(()=>[l(e(V),{value:"NONE"},{default:t(()=>a[22]||(a[22]=[s(" None ")])),_:1}),l(e(V),{value:"EVEN"},{default:t(()=>a[23]||(a[23]=[s(" Even ")])),_:1}),l(e(V),{value:"ODD"},{default:t(()=>a[24]||(a[24]=[s(" Odd ")])),_:1})]),_:1})]),_:2},1040),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"pic.serial.dataBits"},{default:t(({componentField:S})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[25]||(a[25]=[s("Data Bits")])),_:1}),l(e(N),L(O(S)),{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(A),{disabled:e(f)},{default:t(()=>[l(e(Q),{placeholder:"Select data bits"})]),_:1},8,["disabled"])]),_:1}),l(e(B),null,{default:t(()=>[l(e(V),{value:5},{default:t(()=>a[26]||(a[26]=[s(" 5 ")])),_:1}),l(e(V),{value:6},{default:t(()=>a[27]||(a[27]=[s(" 6 ")])),_:1}),l(e(V),{value:7},{default:t(()=>a[28]||(a[28]=[s(" 7 ")])),_:1}),l(e(V),{value:8},{default:t(()=>a[29]||(a[29]=[s(" 8 ")])),_:1})]),_:1})]),_:2},1040),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"pic.serial.stopBits"},{default:t(({componentField:S})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>a[30]||(a[30]=[s("Stop Bits")])),_:1}),l(e(N),L(O(S)),{default:t(()=>[l(e(v),null,{default:t(()=>[l(e(A),{disabled:e(f)},{default:t(()=>[l(e(Q),{placeholder:"Select stop bits"})]),_:1},8,["disabled"])]),_:1}),l(e(B),null,{default:t(()=>[l(e(V),{value:1},{default:t(()=>a[31]||(a[31]=[s(" 1 ")])),_:1}),l(e(V),{value:1.5},{default:t(()=>a[32]||(a[32]=[s(" 1.5 ")])),_:1}),l(e(V),{value:2},{default:t(()=>a[33]||(a[33]=[s(" 2 ")])),_:1})]),_:1})]),_:2},1040),l(e(x))]),_:2},1024)]),_:1})])])]),m("div",null,[l(e(M),{type:"submit",disabled:e(f)},{default:t(()=>[e(f)?(o(),I(e(j),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):$("",!0),a[35]||(a[35]=s(" Save "))]),_:1},8,["disabled"])])],32))}}),ul={key:0,class:"flex items-center justify-center h-full"},ol=R({__name:"HardwareConfigTab",setup(P){const{data:d,isPending:p}=be();return(C,k)=>(o(),E(q,null,[e(p)?(o(),E("div",ul,[l(e(j),{class:"w-4 h-4 animate-spin"})])):$("",!0),e(d)?(o(),I(nl,{key:1,"initial-values":e(d)},null,8,["initial-values"])):$("",!0)],64))}}),dl={class:"space-y-0.5"},il=R({__name:"HTTPConfigForm",props:{initialValues:{}},setup(P){const d=P,p=u.object({port:u.number().int().min(1024,"Port must be at least 1024").max(65535,"Port must be at most 65535"),swagger:u.boolean().default(!1)}),C=z(),{mutate:k,isPending:b}=_e(),f=K({validationSchema:Z(p),initialValues:d.initialValues}).handleSubmit(i=>{k(i,{onSuccess:()=>{C.setQueryData([ce],i),H.success("HTTP configuration updated successfully!")},onError:()=>{H.error("Failed to update HTTP configuration")}})});return(i,n)=>(o(),E("form",{class:"flex flex-col w-full max-w-lg space-y-6",onSubmit:n[0]||(n[0]=(...r)=>e(f)&&e(f)(...r))},[n[4]||(n[4]=m("h3",{class:"pb-2 text-lg font-medium border-b"}," HTTP Configuration ",-1)),l(e(c),{name:"port"},{default:t(({field:r})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>n[1]||(n[1]=[s("Port")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),{modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,type:"number",placeholder:"Enter port number",disabled:e(b),class:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"swagger"},{default:t(({value:r,handleChange:T})=>[l(e(g),{class:"flex flex-row items-center justify-between p-4 border rounded-lg"},{default:t(()=>[m("div",dl,[l(e(y),null,{default:t(()=>n[2]||(n[2]=[s("Enable Swagger")])),_:1})]),l(e(v),null,{default:t(()=>[l(e(ee),{"model-value":r,disabled:e(b),"aria-readonly":"","onUpdate:modelValue":T},null,8,["model-value","disabled","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1}),m("div",null,[l(e(M),{type:"submit",disabled:e(b)},{default:t(()=>[e(b)?(o(),I(e(j),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):$("",!0),n[3]||(n[3]=s(" Save "))]),_:1},8,["disabled"])])],32))}}),rl={key:0,class:"flex items-center justify-center h-full"},fl=R({__name:"HTTPConfigTab",setup(P){const{data:d,isPending:p}=ge();return(C,k)=>(o(),E(q,null,[e(p)?(o(),E("div",rl,[l(e(j),{class:"w-4 h-4 animate-spin"})])):$("",!0),e(d)?(o(),I(il,{key:1,"initial-values":e(d)},null,8,["initial-values"])):$("",!0)],64))}}),ml={class:"space-y-0.5"},pl={class:"space-y-0.5"},bl=R({__name:"WifiConfigForm",props:{initialValues:{}},setup(P){const d=P,p=/^[\w\s\-.]*$/,C=/^[\x21-\x7E]*$/,k=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d{1,2})\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d{1,2})$/,b=u.object({ap:u.object({enable:u.boolean(),ssid:u.string().min(1,"SSID is required").max(32,"SSID must be at most 32 characters").regex(p,"SSID can only contain alphanumeric characters, spaces, hyphens, underscores, and dots"),password:u.string().min(8,"Password must be at least 8 characters").max(63,"Password must be at most 63 characters").regex(C,"Password can only contain printable characters"),ip:u.string().min(1,"IP address is required").regex(k,"Invalid IPv4 address format")}),sta:u.object({enable:u.boolean(),ssid:u.string().min(1,"SSID is required").max(32,"SSID must be at most 32 characters").regex(p,"SSID can only contain alphanumeric characters, spaces, hyphens, underscores, and dots"),password:u.string().min(8,"Password must be at least 8 characters").max(63,"Password must be at most 63 characters").regex(C,"Password can only contain printable characters")})}).superRefine((T,w)=>{(T.ap.enable&&T.sta.enable||!T.ap.enable&&!T.sta.enable)&&(w.addIssue({code:u.ZodIssueCode.custom,message:"AP and STA cannot be enabled or disabled at the same time",path:["ap.enable"]}),w.addIssue({code:u.ZodIssueCode.custom,message:"AP and STA cannot be enabled or disabled at the same time",path:["sta.enable"]}))}),_=z(),{mutate:f,isPending:i}=ye(),r=K({validationSchema:Z(b),initialValues:d.initialValues}).handleSubmit(T=>{f(T,{onSuccess:()=>{_.setQueryData([ve],T),H.success("WiFi configuration updated successfully!")},onError:()=>{H.error("Failed to update WiFi configuration")}})});return(T,w)=>(o(),E("form",{class:"flex flex-col w-full max-w-lg space-y-6",onSubmit:w[0]||(w[0]=(...h)=>e(r)&&e(r)(...h))},[w[9]||(w[9]=m("h3",{class:"pb-2 text-lg font-medium border-b"}," AP Configuration ",-1)),l(e(c),{type:"checkbox",name:"ap.enable"},{default:t(({value:h,handleChange:a})=>[l(e(g),{class:"flex flex-row items-center justify-between p-4 border rounded-lg"},{default:t(()=>[m("div",ml,[l(e(y),null,{default:t(()=>w[1]||(w[1]=[s("Enable AP")])),_:1})]),l(e(v),null,{default:t(()=>[l(e(ee),{"model-value":h,disabled:e(i),"onUpdate:modelValue":a},null,8,["model-value","disabled","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),l(e(x))]),_:1}),l(e(c),{name:"ap.ssid"},{default:t(({componentField:h})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>w[2]||(w[2]=[s("SSID")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),U(h,{placeholder:"Enter SSID",disabled:e(i)}),null,16,["disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"ap.password"},{default:t(({componentField:h})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>w[3]||(w[3]=[s("Password")])),_:1}),l(e(v),null,{default:t(()=>[l(e(le),U(h,{placeholder:"Enter password",disabled:e(i)}),null,16,["disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"ap.ip"},{default:t(({componentField:h})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>w[4]||(w[4]=[s("IP Address")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),U(h,{placeholder:"Enter IP address",disabled:e(i)}),null,16,["disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),w[10]||(w[10]=m("h3",{class:"pb-2 text-lg font-medium border-b"}," STA Configuration ",-1)),l(e(c),{type:"checkbox",name:"sta.enable"},{default:t(({value:h,handleChange:a})=>[l(e(g),{class:"flex flex-row items-center justify-between p-4 border rounded-lg"},{default:t(()=>[m("div",pl,[l(e(y),null,{default:t(()=>w[5]||(w[5]=[s("Enable STA")])),_:1})]),l(e(v),null,{default:t(()=>[l(e(ee),{"model-value":h,disabled:e(i),"onUpdate:modelValue":a},null,8,["model-value","disabled","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),l(e(x))]),_:1}),l(e(c),{name:"sta.ssid"},{default:t(({componentField:h})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>w[6]||(w[6]=[s("SSID")])),_:1}),l(e(v),null,{default:t(()=>[l(e(F),U(h,{placeholder:"Enter SSID",disabled:e(i)}),null,16,["disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),l(e(c),{name:"sta.password"},{default:t(({componentField:h})=>[l(e(g),null,{default:t(()=>[l(e(y),null,{default:t(()=>w[7]||(w[7]=[s("Password")])),_:1}),l(e(v),null,{default:t(()=>[l(e(le),U(h,{placeholder:"Enter password",disabled:e(i)}),null,16,["disabled"])]),_:2},1024),l(e(x))]),_:2},1024)]),_:1}),m("div",null,[l(e(M),{type:"submit",disabled:e(i)},{default:t(()=>[e(i)?(o(),I(e(j),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):$("",!0),w[8]||(w[8]=s(" Save "))]),_:1},8,["disabled"])])],32))}}),_l={key:0,class:"flex items-center justify-center h-full"},cl=R({__name:"WifiConfigTab",setup(P){const{data:d,isPending:p}=we();return(C,k)=>(o(),E(q,null,[e(p)?(o(),E("div",_l,[l(e(j),{class:"w-4 h-4 animate-spin"})])):$("",!0),e(d)?(o(),I(bl,{key:1,"initial-values":e(d)},null,8,["initial-values"])):$("",!0)],64))}}),gl={class:"text-sm text-muted-foreground"},Tl=R({__name:"SettingsView",setup(P){const d=Ee(),p=Te(),C=d.query.tab??"hardware";function k(b){p.replace({query:{tab:b}})}return(b,_)=>{const f=ke("RouterLink");return o(),I($e,null,{default:t(()=>[m("div",null,[_[2]||(_[2]=m("h1",{class:"text-xl font-semibold tracking-tight"}," Settings ",-1)),m("p",gl,[_[1]||(_[1]=s(" Configure your robot's settings ")),l(f,{to:"/reboot",class:"text-blue-500"},{default:t(()=>_[0]||(_[0]=[s(" (Reboot to apply changes) ")])),_:1})])]),l(e(Ue),{"default-value":e(C),"onUpdate:modelValue":k},{default:t(()=>[l(e(Re),null,{default:t(()=>[l(e(Y),{value:"hardware"},{default:t(()=>_[3]||(_[3]=[s(" Hardware ")])),_:1}),l(e(Y),{value:"cloud"},{default:t(()=>_[4]||(_[4]=[s(" Cloud ")])),_:1}),l(e(Y),{value:"grpc"},{default:t(()=>_[5]||(_[5]=[s(" GRPC ")])),_:1}),l(e(Y),{value:"http"},{default:t(()=>_[6]||(_[6]=[s(" HTTP ")])),_:1}),l(e(Y),{value:"cargo"},{default:t(()=>_[7]||(_[7]=[s(" Cargo ")])),_:1}),l(e(Y),{value:"wifi"},{default:t(()=>_[8]||(_[8]=[s(" WiFi ")])),_:1})]),_:1}),l(e(W),{value:"hardware"},{default:t(()=>[l(ol)]),_:1}),l(e(W),{value:"cloud"},{default:t(()=>[l(Ge)]),_:1}),l(e(W),{value:"grpc"},{default:t(()=>[l(Ke)]),_:1}),l(e(W),{value:"http"},{default:t(()=>[l(fl)]),_:1}),l(e(W),{value:"cargo"},{default:t(()=>[l(qe)]),_:1}),l(e(W),{value:"wifi"},{default:t(()=>[l(cl)]),_:1})]),_:1},8,["default-value"])]),_:1})}}});export{Tl as default};
